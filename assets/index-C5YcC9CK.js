var C1=Object.defineProperty;var j1=(t,e,n)=>e in t?C1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Bn=(t,e,n)=>j1(t,typeof e!="symbol"?e+"":e,n);function A1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function P1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W0={exports:{}},Bc={},q0={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=Symbol.for("react.element"),R1=Symbol.for("react.portal"),D1=Symbol.for("react.fragment"),V1=Symbol.for("react.strict_mode"),O1=Symbol.for("react.profiler"),L1=Symbol.for("react.provider"),M1=Symbol.for("react.context"),F1=Symbol.for("react.forward_ref"),U1=Symbol.for("react.suspense"),z1=Symbol.for("react.memo"),B1=Symbol.for("react.lazy"),Jp=Symbol.iterator;function $1(t){return t===null||typeof t!="object"?null:(t=Jp&&t[Jp]||t["@@iterator"],typeof t=="function"?t:null)}var G0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K0=Object.assign,Q0={};function zi(t,e,n){this.props=t,this.context=e,this.refs=Q0,this.updater=n||G0}zi.prototype.isReactComponent={};zi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function J0(){}J0.prototype=zi.prototype;function hf(t,e,n){this.props=t,this.context=e,this.refs=Q0,this.updater=n||G0}var ff=hf.prototype=new J0;ff.constructor=hf;K0(ff,zi.prototype);ff.isPureReactComponent=!0;var Xp=Array.isArray,X0=Object.prototype.hasOwnProperty,mf={current:null},Y0={key:!0,ref:!0,__self:!0,__source:!0};function Z0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)X0.call(e,r)&&!Y0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:bo,type:t,key:i,ref:o,props:s,_owner:mf.current}}function H1(t,e){return{$$typeof:bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pf(t){return typeof t=="object"&&t!==null&&t.$$typeof===bo}function W1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yp=/\/+/g;function Hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?W1(""+t.key):e.toString(36)}function Il(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bo:case R1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Hu(o,0):r,Xp(s)?(n="",t!=null&&(n=t.replace(Yp,"$&/")+"/"),Il(s,e,n,"",function(d){return d})):s!=null&&(pf(s)&&(s=H1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Yp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Xp(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Hu(i,c);o+=Il(i,e,n,u,s)}else if(u=$1(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Hu(i,c++),o+=Il(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nl(t,e,n){if(t==null)return t;var r=[],s=0;return Il(t,r,"","",function(i){return e.call(n,i,s++)}),r}function q1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},Sl={transition:null},G1={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Sl,ReactCurrentOwner:mf};function ex(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:nl,forEach:function(t,e,n){nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nl(t,function(){e++}),e},toArray:function(t){return nl(t,function(e){return e})||[]},only:function(t){if(!pf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=zi;ce.Fragment=D1;ce.Profiler=O1;ce.PureComponent=hf;ce.StrictMode=V1;ce.Suspense=U1;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G1;ce.act=ex;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=K0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=mf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)X0.call(e,u)&&!Y0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:bo,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:M1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:L1,_context:t},t.Consumer=t};ce.createElement=Z0;ce.createFactory=function(t){var e=Z0.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:F1,render:t}};ce.isValidElement=pf;ce.lazy=function(t){return{$$typeof:B1,_payload:{_status:-1,_result:t},_init:q1}};ce.memo=function(t,e){return{$$typeof:z1,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Sl.transition;Sl.transition={};try{t()}finally{Sl.transition=e}};ce.unstable_act=ex;ce.useCallback=function(t,e){return At.current.useCallback(t,e)};ce.useContext=function(t){return At.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return At.current.useDeferredValue(t)};ce.useEffect=function(t,e){return At.current.useEffect(t,e)};ce.useId=function(){return At.current.useId()};ce.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return At.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};ce.useRef=function(t){return At.current.useRef(t)};ce.useState=function(t){return At.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return At.current.useTransition()};ce.version="18.3.1";q0.exports=ce;var R=q0.exports;const pi=P1(R),K1=A1({__proto__:null,default:pi},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1=R,J1=Symbol.for("react.element"),X1=Symbol.for("react.fragment"),Y1=Object.prototype.hasOwnProperty,Z1=Q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eE={key:!0,ref:!0,__self:!0,__source:!0};function tx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Y1.call(e,r)&&!eE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:J1,type:t,key:i,ref:o,props:s,_owner:Z1.current}}Bc.Fragment=X1;Bc.jsx=tx;Bc.jsxs=tx;W0.exports=Bc;var a=W0.exports,nx={exports:{}},Gt={},rx={exports:{}},sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var J=B.length;B.push(Q);e:for(;0<J;){var de=J-1>>>1,se=B[de];if(0<s(se,Q))B[de]=Q,B[J]=se,J=de;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],J=B.pop();if(J!==Q){B[0]=J;e:for(var de=0,se=B.length,oe=se>>>1;de<oe;){var $e=2*(de+1)-1,H=B[$e],Y=$e+1,xe=B[Y];if(0>s(H,J))Y<se&&0>s(xe,H)?(B[de]=xe,B[Y]=J,de=Y):(B[de]=H,B[$e]=J,de=$e);else if(Y<se&&0>s(xe,J))B[de]=xe,B[Y]=J,de=Y;else break e}}return Q}function s(B,Q){var J=B.sortIndex-Q.sortIndex;return J!==0?J:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,f=null,g=3,b=!1,N=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(B){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=B)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function j(B){if(C=!1,E(B),!N)if(n(u)!==null)N=!0,ve(L);else{var Q=n(d);Q!==null&&ue(j,Q.startTime-B)}}function L(B,Q){N=!1,C&&(C=!1,x(w),w=-1),b=!0;var J=g;try{for(E(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||B&&!A());){var de=f.callback;if(typeof de=="function"){f.callback=null,g=f.priorityLevel;var se=de(f.expirationTime<=Q);Q=t.unstable_now(),typeof se=="function"?f.callback=se:f===n(u)&&r(u),E(Q)}else r(u);f=n(u)}if(f!==null)var oe=!0;else{var $e=n(d);$e!==null&&ue(j,$e.startTime-Q),oe=!1}return oe}finally{f=null,g=J,b=!1}}var V=!1,I=null,w=-1,_=5,S=-1;function A(){return!(t.unstable_now()-S<_)}function P(){if(I!==null){var B=t.unstable_now();S=B;var Q=!0;try{Q=I(!0,B)}finally{Q?k():(V=!1,I=null)}}else V=!1}var k;if(typeof y=="function")k=function(){y(P)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ie=K.port2;K.port1.onmessage=P,k=function(){ie.postMessage(null)}}else k=function(){T(P,0)};function ve(B){I=B,V||(V=!0,k())}function ue(B,Q){w=T(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){N||b||(N=!0,ve(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var J=g;g=Q;try{return B()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=g;g=B;try{return Q()}finally{g=J}},t.unstable_scheduleCallback=function(B,Q,J){var de=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?de+J:de):J=de,B){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,B={id:m++,callback:Q,priorityLevel:B,startTime:J,expirationTime:se,sortIndex:-1},J>de?(B.sortIndex=J,e(d,B),n(u)===null&&B===n(d)&&(C?(x(w),w=-1):C=!0,ue(j,J-de))):(B.sortIndex=se,e(u,B),N||b||(N=!0,ve(L))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var Q=g;return function(){var J=g;g=Q;try{return B.apply(this,arguments)}finally{g=J}}}})(sx);rx.exports=sx;var tE=rx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE=R,qt=tE;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ix=new Set,Ka={};function Ms(t,e){Ii(t,e),Ii(t+"Capture",e)}function Ii(t,e){for(Ka[t]=e,t=0;t<e.length;t++)ix.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dd=Object.prototype.hasOwnProperty,rE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zp={},eg={};function sE(t){return Dd.call(eg,t)?!0:Dd.call(Zp,t)?!1:rE.test(t)?eg[t]=!0:(Zp[t]=!0,!1)}function iE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aE(t,e,n,r){if(e===null||typeof e>"u"||iE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var gf=/[\-:]([a-z])/g;function yf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gf,yf);pt[e]=new Pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gf,yf);pt[e]=new Pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gf,yf);pt[e]=new Pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Pt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xf(t,e,n,r){var s=pt.hasOwnProperty(e)?pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aE(e,n,s,r)&&(n=null),r||s===null?sE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=nE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),ni=Symbol.for("react.portal"),ri=Symbol.for("react.fragment"),vf=Symbol.for("react.strict_mode"),Vd=Symbol.for("react.profiler"),ax=Symbol.for("react.provider"),ox=Symbol.for("react.context"),wf=Symbol.for("react.forward_ref"),Od=Symbol.for("react.suspense"),Ld=Symbol.for("react.suspense_list"),_f=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),lx=Symbol.for("react.offscreen"),tg=Symbol.iterator;function pa(t){return t===null||typeof t!="object"?null:(t=tg&&t[tg]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Wu;function Ta(t){if(Wu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wu=e&&e[1]||""}return`
`+Wu+t}var qu=!1;function Gu(t,e){if(!t||qu)return"";qu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{qu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ta(t):""}function oE(t){switch(t.tag){case 5:return Ta(t.type);case 16:return Ta("Lazy");case 13:return Ta("Suspense");case 19:return Ta("SuspenseList");case 0:case 2:case 15:return t=Gu(t.type,!1),t;case 11:return t=Gu(t.type.render,!1),t;case 1:return t=Gu(t.type,!0),t;default:return""}}function Md(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ri:return"Fragment";case ni:return"Portal";case Vd:return"Profiler";case vf:return"StrictMode";case Od:return"Suspense";case Ld:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ox:return(t.displayName||"Context")+".Consumer";case ax:return(t._context.displayName||"Context")+".Provider";case wf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _f:return e=t.displayName||null,e!==null?e:Md(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return Md(t(e))}catch{}}return null}function lE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Md(e);case 8:return e===vf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cE(t){var e=cx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=cE(t))}function ux(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fd(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ng(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dx(t,e){e=e.checked,e!=null&&xf(t,"checked",e,!1)}function Ud(t,e){dx(t,e);var n=Kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zd(t,e.type,n):e.hasOwnProperty("defaultValue")&&zd(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zd(t,e,n){(e!=="number"||Kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function gi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ia(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kr(n)}}function hx(t,e){var n=Kr(e.value),r=Kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var il,mx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uE=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(t){uE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ra[e]=Ra[t]})});function px(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ra.hasOwnProperty(t)&&Ra[t]?(""+e).trim():e+"px"}function gx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=px(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dE=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hd(t,e){if(e){if(dE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Wd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=null;function bf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gd=null,yi=null,xi=null;function ag(t){if(t=To(t)){if(typeof Gd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Gc(e),Gd(t.stateNode,t.type,e))}}function yx(t){yi?xi?xi.push(t):xi=[t]:yi=t}function xx(){if(yi){var t=yi,e=xi;if(xi=yi=null,ag(t),e)for(t=0;t<e.length;t++)ag(e[t])}}function vx(t,e){return t(e)}function wx(){}var Ku=!1;function _x(t,e,n){if(Ku)return t(e,n);Ku=!0;try{return vx(t,e,n)}finally{Ku=!1,(yi!==null||xi!==null)&&(wx(),xx())}}function Ja(t,e){var n=t.stateNode;if(n===null)return null;var r=Gc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Kd=!1;if(Zn)try{var ga={};Object.defineProperty(ga,"passive",{get:function(){Kd=!0}}),window.addEventListener("test",ga,ga),window.removeEventListener("test",ga,ga)}catch{Kd=!1}function hE(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Da=!1,Ql=null,Jl=!1,Qd=null,fE={onError:function(t){Da=!0,Ql=t}};function mE(t,e,n,r,s,i,o,c,u){Da=!1,Ql=null,hE.apply(fE,arguments)}function pE(t,e,n,r,s,i,o,c,u){if(mE.apply(this,arguments),Da){if(Da){var d=Ql;Da=!1,Ql=null}else throw Error(z(198));Jl||(Jl=!0,Qd=d)}}function Fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function og(t){if(Fs(t)!==t)throw Error(z(188))}function gE(t){var e=t.alternate;if(!e){if(e=Fs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return og(s),t;if(i===r)return og(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Ex(t){return t=gE(t),t!==null?Nx(t):null}function Nx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nx(t);if(e!==null)return e;t=t.sibling}return null}var Tx=qt.unstable_scheduleCallback,lg=qt.unstable_cancelCallback,yE=qt.unstable_shouldYield,xE=qt.unstable_requestPaint,qe=qt.unstable_now,vE=qt.unstable_getCurrentPriorityLevel,Ef=qt.unstable_ImmediatePriority,Ix=qt.unstable_UserBlockingPriority,Xl=qt.unstable_NormalPriority,wE=qt.unstable_LowPriority,Sx=qt.unstable_IdlePriority,$c=null,Sn=null;function _E(t){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot($c,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:NE,bE=Math.log,EE=Math.LN2;function NE(t){return t>>>=0,t===0?32:31-(bE(t)/EE|0)|0}var al=64,ol=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Sa(c):(i&=o,i!==0&&(r=Sa(i)))}else o=n&~s,o!==0?r=Sa(o):i!==0&&(r=Sa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function TE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=TE(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Jd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kx(){var t=al;return al<<=1,!(al&4194240)&&(al=64),t}function Qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Eo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function SE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function Cx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jx,Tf,Ax,Px,Rx,Xd=!1,ll=[],Ar=null,Pr=null,Rr=null,Xa=new Map,Ya=new Map,br=[],kE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cg(t,e){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":Xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(e.pointerId)}}function ya(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=To(e),e!==null&&Tf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CE(t,e,n,r,s){switch(e){case"focusin":return Ar=ya(Ar,t,e,n,r,s),!0;case"dragenter":return Pr=ya(Pr,t,e,n,r,s),!0;case"mouseover":return Rr=ya(Rr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Xa.set(i,ya(Xa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ya.set(i,ya(Ya.get(i)||null,t,e,n,r,s)),!0}return!1}function Dx(t){var e=ys(t.target);if(e!==null){var n=Fs(e);if(n!==null){if(e=n.tag,e===13){if(e=bx(n),e!==null){t.blockedOn=e,Rx(t.priority,function(){Ax(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qd=r,n.target.dispatchEvent(r),qd=null}else return e=To(n),e!==null&&Tf(e),t.blockedOn=n,!1;e.shift()}return!0}function ug(t,e,n){kl(t)&&n.delete(e)}function jE(){Xd=!1,Ar!==null&&kl(Ar)&&(Ar=null),Pr!==null&&kl(Pr)&&(Pr=null),Rr!==null&&kl(Rr)&&(Rr=null),Xa.forEach(ug),Ya.forEach(ug)}function xa(t,e){t.blockedOn===e&&(t.blockedOn=null,Xd||(Xd=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,jE)))}function Za(t){function e(s){return xa(s,t)}if(0<ll.length){xa(ll[0],t);for(var n=1;n<ll.length;n++){var r=ll[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ar!==null&&xa(Ar,t),Pr!==null&&xa(Pr,t),Rr!==null&&xa(Rr,t),Xa.forEach(e),Ya.forEach(e),n=0;n<br.length;n++)r=br[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<br.length&&(n=br[0],n.blockedOn===null);)Dx(n),n.blockedOn===null&&br.shift()}var vi=cr.ReactCurrentBatchConfig,Zl=!0;function AE(t,e,n,r){var s=be,i=vi.transition;vi.transition=null;try{be=1,If(t,e,n,r)}finally{be=s,vi.transition=i}}function PE(t,e,n,r){var s=be,i=vi.transition;vi.transition=null;try{be=4,If(t,e,n,r)}finally{be=s,vi.transition=i}}function If(t,e,n,r){if(Zl){var s=Yd(t,e,n,r);if(s===null)id(t,e,r,ec,n),cg(t,r);else if(CE(s,t,e,n,r))r.stopPropagation();else if(cg(t,r),e&4&&-1<kE.indexOf(t)){for(;s!==null;){var i=To(s);if(i!==null&&jx(i),i=Yd(t,e,n,r),i===null&&id(t,e,r,ec,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else id(t,e,r,null,n)}}var ec=null;function Yd(t,e,n,r){if(ec=null,t=bf(r),t=ys(t),t!==null)if(e=Fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ec=t,null}function Vx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vE()){case Ef:return 1;case Ix:return 4;case Xl:case wE:return 16;case Sx:return 536870912;default:return 16}default:return 16}}var Sr=null,Sf=null,Cl=null;function Ox(){if(Cl)return Cl;var t,e=Sf,n=e.length,r,s="value"in Sr?Sr.value:Sr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Cl=s.slice(t,1<r?1-r:void 0)}function jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cl(){return!0}function dg(){return!1}function Kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cl:dg,this.isPropagationStopped=dg,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),e}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=Kt(Bi),No=Me({},Bi,{view:0,detail:0}),RE=Kt(No),Ju,Xu,va,Hc=Me({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==va&&(va&&t.type==="mousemove"?(Ju=t.screenX-va.screenX,Xu=t.screenY-va.screenY):Xu=Ju=0,va=t),Ju)},movementY:function(t){return"movementY"in t?t.movementY:Xu}}),hg=Kt(Hc),DE=Me({},Hc,{dataTransfer:0}),VE=Kt(DE),OE=Me({},No,{relatedTarget:0}),Yu=Kt(OE),LE=Me({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),ME=Kt(LE),FE=Me({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UE=Kt(FE),zE=Me({},Bi,{data:0}),fg=Kt(zE),BE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$E={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HE[t])?!!e[t]:!1}function Cf(){return WE}var qE=Me({},No,{key:function(t){if(t.key){var e=BE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$E[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cf,charCode:function(t){return t.type==="keypress"?jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GE=Kt(qE),KE=Me({},Hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=Kt(KE),QE=Me({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cf}),JE=Kt(QE),XE=Me({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),YE=Kt(XE),ZE=Me({},Hc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eN=Kt(ZE),tN=[9,13,27,32],jf=Zn&&"CompositionEvent"in window,Va=null;Zn&&"documentMode"in document&&(Va=document.documentMode);var nN=Zn&&"TextEvent"in window&&!Va,Lx=Zn&&(!jf||Va&&8<Va&&11>=Va),pg=" ",gg=!1;function Mx(t,e){switch(t){case"keyup":return tN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var si=!1;function rN(t,e){switch(t){case"compositionend":return Fx(e);case"keypress":return e.which!==32?null:(gg=!0,pg);case"textInput":return t=e.data,t===pg&&gg?null:t;default:return null}}function sN(t,e){if(si)return t==="compositionend"||!jf&&Mx(t,e)?(t=Ox(),Cl=Sf=Sr=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lx&&e.locale!=="ko"?null:e.data;default:return null}}var iN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iN[t.type]:e==="textarea"}function Ux(t,e,n,r){yx(r),e=tc(e,"onChange"),0<e.length&&(n=new kf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oa=null,eo=null;function aN(t){Xx(t,0)}function Wc(t){var e=oi(t);if(ux(e))return t}function oN(t,e){if(t==="change")return e}var zx=!1;if(Zn){var Zu;if(Zn){var ed="oninput"in document;if(!ed){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),ed=typeof xg.oninput=="function"}Zu=ed}else Zu=!1;zx=Zu&&(!document.documentMode||9<document.documentMode)}function vg(){Oa&&(Oa.detachEvent("onpropertychange",Bx),eo=Oa=null)}function Bx(t){if(t.propertyName==="value"&&Wc(eo)){var e=[];Ux(e,eo,t,bf(t)),_x(aN,e)}}function lN(t,e,n){t==="focusin"?(vg(),Oa=e,eo=n,Oa.attachEvent("onpropertychange",Bx)):t==="focusout"&&vg()}function cN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wc(eo)}function uN(t,e){if(t==="click")return Wc(e)}function dN(t,e){if(t==="input"||t==="change")return Wc(e)}function hN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:hN;function to(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Dd.call(e,s)||!_n(t[s],e[s]))return!1}return!0}function wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _g(t,e){var n=wg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wg(n)}}function $x(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$x(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hx(){for(var t=window,e=Kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kl(t.document)}return e}function Af(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fN(t){var e=Hx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$x(n.ownerDocument.documentElement,n)){if(r!==null&&Af(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=_g(n,i);var o=_g(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mN=Zn&&"documentMode"in document&&11>=document.documentMode,ii=null,Zd=null,La=null,eh=!1;function bg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eh||ii==null||ii!==Kl(r)||(r=ii,"selectionStart"in r&&Af(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),La&&to(La,r)||(La=r,r=tc(Zd,"onSelect"),0<r.length&&(e=new kf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ii)))}function ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ai={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionend:ul("Transition","TransitionEnd")},td={},Wx={};Zn&&(Wx=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);function qc(t){if(td[t])return td[t];if(!ai[t])return t;var e=ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Wx)return td[t]=e[n];return t}var qx=qc("animationend"),Gx=qc("animationiteration"),Kx=qc("animationstart"),Qx=qc("transitionend"),Jx=new Map,Eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){Jx.set(t,e),Ms(e,[t])}for(var nd=0;nd<Eg.length;nd++){var rd=Eg[nd],pN=rd.toLowerCase(),gN=rd[0].toUpperCase()+rd.slice(1);rs(pN,"on"+gN)}rs(qx,"onAnimationEnd");rs(Gx,"onAnimationIteration");rs(Kx,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(Qx,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function Ng(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pE(r,e,void 0,t),t.currentTarget=null}function Xx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Ng(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Ng(s,c,d),i=u}}}if(Jl)throw t=Qd,Jl=!1,Qd=null,t}function je(t,e){var n=e[ih];n===void 0&&(n=e[ih]=new Set);var r=t+"__bubble";n.has(r)||(Yx(e,t,2,!1),n.add(r))}function sd(t,e,n){var r=0;e&&(r|=4),Yx(n,t,r,e)}var dl="_reactListening"+Math.random().toString(36).slice(2);function no(t){if(!t[dl]){t[dl]=!0,ix.forEach(function(n){n!=="selectionchange"&&(yN.has(n)||sd(n,!1,t),sd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dl]||(e[dl]=!0,sd("selectionchange",!1,e))}}function Yx(t,e,n,r){switch(Vx(e)){case 1:var s=AE;break;case 4:s=PE;break;default:s=If}n=s.bind(null,e,n,t),s=void 0,!Kd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function id(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=ys(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}_x(function(){var d=i,m=bf(n),f=[];e:{var g=Jx.get(t);if(g!==void 0){var b=kf,N=t;switch(t){case"keypress":if(jl(n)===0)break e;case"keydown":case"keyup":b=GE;break;case"focusin":N="focus",b=Yu;break;case"focusout":N="blur",b=Yu;break;case"beforeblur":case"afterblur":b=Yu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=VE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=JE;break;case qx:case Gx:case Kx:b=ME;break;case Qx:b=YE;break;case"scroll":b=RE;break;case"wheel":b=eN;break;case"copy":case"cut":case"paste":b=UE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=mg}var C=(e&4)!==0,T=!C&&t==="scroll",x=C?g!==null?g+"Capture":null:g;C=[];for(var y=d,E;y!==null;){E=y;var j=E.stateNode;if(E.tag===5&&j!==null&&(E=j,x!==null&&(j=Ja(y,x),j!=null&&C.push(ro(y,j,E)))),T)break;y=y.return}0<C.length&&(g=new b(g,N,null,n,m),f.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",g&&n!==qd&&(N=n.relatedTarget||n.fromElement)&&(ys(N)||N[er]))break e;if((b||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,b?(N=n.relatedTarget||n.toElement,b=d,N=N?ys(N):null,N!==null&&(T=Fs(N),N!==T||N.tag!==5&&N.tag!==6)&&(N=null)):(b=null,N=d),b!==N)){if(C=hg,j="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(C=mg,j="onPointerLeave",x="onPointerEnter",y="pointer"),T=b==null?g:oi(b),E=N==null?g:oi(N),g=new C(j,y+"leave",b,n,m),g.target=T,g.relatedTarget=E,j=null,ys(m)===d&&(C=new C(x,y+"enter",N,n,m),C.target=E,C.relatedTarget=T,j=C),T=j,b&&N)t:{for(C=b,x=N,y=0,E=C;E;E=Qs(E))y++;for(E=0,j=x;j;j=Qs(j))E++;for(;0<y-E;)C=Qs(C),y--;for(;0<E-y;)x=Qs(x),E--;for(;y--;){if(C===x||x!==null&&C===x.alternate)break t;C=Qs(C),x=Qs(x)}C=null}else C=null;b!==null&&Tg(f,g,b,C,!1),N!==null&&T!==null&&Tg(f,T,N,C,!0)}}e:{if(g=d?oi(d):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var L=oN;else if(yg(g))if(zx)L=dN;else{L=cN;var V=lN}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=uN);if(L&&(L=L(t,d))){Ux(f,L,n,m);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&zd(g,"number",g.value)}switch(V=d?oi(d):window,t){case"focusin":(yg(V)||V.contentEditable==="true")&&(ii=V,Zd=d,La=null);break;case"focusout":La=Zd=ii=null;break;case"mousedown":eh=!0;break;case"contextmenu":case"mouseup":case"dragend":eh=!1,bg(f,n,m);break;case"selectionchange":if(mN)break;case"keydown":case"keyup":bg(f,n,m)}var I;if(jf)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else si?Mx(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Lx&&n.locale!=="ko"&&(si||w!=="onCompositionStart"?w==="onCompositionEnd"&&si&&(I=Ox()):(Sr=m,Sf="value"in Sr?Sr.value:Sr.textContent,si=!0)),V=tc(d,w),0<V.length&&(w=new fg(w,t,null,n,m),f.push({event:w,listeners:V}),I?w.data=I:(I=Fx(n),I!==null&&(w.data=I)))),(I=nN?rN(t,n):sN(t,n))&&(d=tc(d,"onBeforeInput"),0<d.length&&(m=new fg("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:d}),m.data=I))}Xx(f,e)})}function ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ja(t,n),i!=null&&r.unshift(ro(t,i,s)),i=Ja(t,e),i!=null&&r.push(ro(t,i,s))),t=t.return}return r}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Ja(n,i),u!=null&&o.unshift(ro(n,u,c))):s||(u=Ja(n,i),u!=null&&o.push(ro(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xN=/\r\n?/g,vN=/\u0000|\uFFFD/g;function Ig(t){return(typeof t=="string"?t:""+t).replace(xN,`
`).replace(vN,"")}function hl(t,e,n){if(e=Ig(e),Ig(t)!==e&&n)throw Error(z(425))}function nc(){}var th=null,nh=null;function rh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sh=typeof setTimeout=="function"?setTimeout:void 0,wN=typeof clearTimeout=="function"?clearTimeout:void 0,Sg=typeof Promise=="function"?Promise:void 0,_N=typeof queueMicrotask=="function"?queueMicrotask:typeof Sg<"u"?function(t){return Sg.resolve(null).then(t).catch(bN)}:sh;function bN(t){setTimeout(function(){throw t})}function ad(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Za(e)}function Dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $i=Math.random().toString(36).slice(2),Tn="__reactFiber$"+$i,so="__reactProps$"+$i,er="__reactContainer$"+$i,ih="__reactEvents$"+$i,EN="__reactListeners$"+$i,NN="__reactHandles$"+$i;function ys(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[Tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kg(t);t!==null;){if(n=t[Tn])return n;t=kg(t)}return e}t=n,n=t.parentNode}return null}function To(t){return t=t[Tn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Gc(t){return t[so]||null}var ah=[],li=-1;function ss(t){return{current:t}}function Re(t){0>li||(t.current=ah[li],ah[li]=null,li--)}function ke(t,e){li++,ah[li]=t.current,t.current=e}var Qr={},Tt=ss(Qr),Lt=ss(!1),Is=Qr;function Si(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function rc(){Re(Lt),Re(Tt)}function Cg(t,e,n){if(Tt.current!==Qr)throw Error(z(168));ke(Tt,e),ke(Lt,n)}function Zx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,lE(t)||"Unknown",s));return Me({},n,r)}function sc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Is=Tt.current,ke(Tt,t),ke(Lt,Lt.current),!0}function jg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Zx(t,e,Is),r.__reactInternalMemoizedMergedChildContext=t,Re(Lt),Re(Tt),ke(Tt,t)):Re(Lt),ke(Lt,n)}var Hn=null,Kc=!1,od=!1;function ev(t){Hn===null?Hn=[t]:Hn.push(t)}function TN(t){Kc=!0,ev(t)}function is(){if(!od&&Hn!==null){od=!0;var t=0,e=be;try{var n=Hn;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,Kc=!1}catch(s){throw Hn!==null&&(Hn=Hn.slice(t+1)),Tx(Ef,is),s}finally{be=e,od=!1}}return null}var ci=[],ui=0,ic=null,ac=0,en=[],tn=0,Ss=null,Gn=1,Kn="";function hs(t,e){ci[ui++]=ac,ci[ui++]=ic,ic=t,ac=e}function tv(t,e,n){en[tn++]=Gn,en[tn++]=Kn,en[tn++]=Ss,Ss=t;var r=Gn;t=Kn;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var i=32-yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-yn(e)+s|n<<s|r,Kn=i+t}else Gn=1<<i|n<<s|r,Kn=t}function Pf(t){t.return!==null&&(hs(t,1),tv(t,1,0))}function Rf(t){for(;t===ic;)ic=ci[--ui],ci[ui]=null,ac=ci[--ui],ci[ui]=null;for(;t===Ss;)Ss=en[--tn],en[tn]=null,Kn=en[--tn],en[tn]=null,Gn=en[--tn],en[tn]=null}var Wt=null,$t=null,Ve=!1,pn=null;function nv(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ag(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,$t=Dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ss!==null?{id:Gn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,$t=null,!0):!1;default:return!1}}function oh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lh(t){if(Ve){var e=$t;if(e){var n=e;if(!Ag(t,e)){if(oh(t))throw Error(z(418));e=Dr(n.nextSibling);var r=Wt;e&&Ag(t,e)?nv(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Wt=t)}}else{if(oh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ve=!1,Wt=t}}}function Pg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function fl(t){if(t!==Wt)return!1;if(!Ve)return Pg(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rh(t.type,t.memoizedProps)),e&&(e=$t)){if(oh(t))throw rv(),Error(z(418));for(;e;)nv(t,e),e=Dr(e.nextSibling)}if(Pg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Wt?Dr(t.stateNode.nextSibling):null;return!0}function rv(){for(var t=$t;t;)t=Dr(t.nextSibling)}function ki(){$t=Wt=null,Ve=!1}function Df(t){pn===null?pn=[t]:pn.push(t)}var IN=cr.ReactCurrentBatchConfig;function wa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function ml(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rg(t){var e=t._init;return e(t._payload)}function sv(t){function e(x,y){if(t){var E=x.deletions;E===null?(x.deletions=[y],x.flags|=16):E.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=Mr(x,y),x.index=0,x.sibling=null,x}function i(x,y,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<y?(x.flags|=2,y):E):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,y,E,j){return y===null||y.tag!==6?(y=md(E,x.mode,j),y.return=x,y):(y=s(y,E),y.return=x,y)}function u(x,y,E,j){var L=E.type;return L===ri?m(x,y,E.props.children,j,E.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wr&&Rg(L)===y.type)?(j=s(y,E.props),j.ref=wa(x,y,E),j.return=x,j):(j=Ll(E.type,E.key,E.props,null,x.mode,j),j.ref=wa(x,y,E),j.return=x,j)}function d(x,y,E,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=pd(E,x.mode,j),y.return=x,y):(y=s(y,E.children||[]),y.return=x,y)}function m(x,y,E,j,L){return y===null||y.tag!==7?(y=Es(E,x.mode,j,L),y.return=x,y):(y=s(y,E),y.return=x,y)}function f(x,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=md(""+y,x.mode,E),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rl:return E=Ll(y.type,y.key,y.props,null,x.mode,E),E.ref=wa(x,null,y),E.return=x,E;case ni:return y=pd(y,x.mode,E),y.return=x,y;case wr:var j=y._init;return f(x,j(y._payload),E)}if(Ia(y)||pa(y))return y=Es(y,x.mode,E,null),y.return=x,y;ml(x,y)}return null}function g(x,y,E,j){var L=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:c(x,y,""+E,j);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case rl:return E.key===L?u(x,y,E,j):null;case ni:return E.key===L?d(x,y,E,j):null;case wr:return L=E._init,g(x,y,L(E._payload),j)}if(Ia(E)||pa(E))return L!==null?null:m(x,y,E,j,null);ml(x,E)}return null}function b(x,y,E,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(E)||null,c(y,x,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case rl:return x=x.get(j.key===null?E:j.key)||null,u(y,x,j,L);case ni:return x=x.get(j.key===null?E:j.key)||null,d(y,x,j,L);case wr:var V=j._init;return b(x,y,E,V(j._payload),L)}if(Ia(j)||pa(j))return x=x.get(E)||null,m(y,x,j,L,null);ml(y,j)}return null}function N(x,y,E,j){for(var L=null,V=null,I=y,w=y=0,_=null;I!==null&&w<E.length;w++){I.index>w?(_=I,I=null):_=I.sibling;var S=g(x,I,E[w],j);if(S===null){I===null&&(I=_);break}t&&I&&S.alternate===null&&e(x,I),y=i(S,y,w),V===null?L=S:V.sibling=S,V=S,I=_}if(w===E.length)return n(x,I),Ve&&hs(x,w),L;if(I===null){for(;w<E.length;w++)I=f(x,E[w],j),I!==null&&(y=i(I,y,w),V===null?L=I:V.sibling=I,V=I);return Ve&&hs(x,w),L}for(I=r(x,I);w<E.length;w++)_=b(I,x,w,E[w],j),_!==null&&(t&&_.alternate!==null&&I.delete(_.key===null?w:_.key),y=i(_,y,w),V===null?L=_:V.sibling=_,V=_);return t&&I.forEach(function(A){return e(x,A)}),Ve&&hs(x,w),L}function C(x,y,E,j){var L=pa(E);if(typeof L!="function")throw Error(z(150));if(E=L.call(E),E==null)throw Error(z(151));for(var V=L=null,I=y,w=y=0,_=null,S=E.next();I!==null&&!S.done;w++,S=E.next()){I.index>w?(_=I,I=null):_=I.sibling;var A=g(x,I,S.value,j);if(A===null){I===null&&(I=_);break}t&&I&&A.alternate===null&&e(x,I),y=i(A,y,w),V===null?L=A:V.sibling=A,V=A,I=_}if(S.done)return n(x,I),Ve&&hs(x,w),L;if(I===null){for(;!S.done;w++,S=E.next())S=f(x,S.value,j),S!==null&&(y=i(S,y,w),V===null?L=S:V.sibling=S,V=S);return Ve&&hs(x,w),L}for(I=r(x,I);!S.done;w++,S=E.next())S=b(I,x,w,S.value,j),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?w:S.key),y=i(S,y,w),V===null?L=S:V.sibling=S,V=S);return t&&I.forEach(function(P){return e(x,P)}),Ve&&hs(x,w),L}function T(x,y,E,j){if(typeof E=="object"&&E!==null&&E.type===ri&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case rl:e:{for(var L=E.key,V=y;V!==null;){if(V.key===L){if(L=E.type,L===ri){if(V.tag===7){n(x,V.sibling),y=s(V,E.props.children),y.return=x,x=y;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wr&&Rg(L)===V.type){n(x,V.sibling),y=s(V,E.props),y.ref=wa(x,V,E),y.return=x,x=y;break e}n(x,V);break}else e(x,V);V=V.sibling}E.type===ri?(y=Es(E.props.children,x.mode,j,E.key),y.return=x,x=y):(j=Ll(E.type,E.key,E.props,null,x.mode,j),j.ref=wa(x,y,E),j.return=x,x=j)}return o(x);case ni:e:{for(V=E.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(x,y.sibling),y=s(y,E.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=pd(E,x.mode,j),y.return=x,x=y}return o(x);case wr:return V=E._init,T(x,y,V(E._payload),j)}if(Ia(E))return N(x,y,E,j);if(pa(E))return C(x,y,E,j);ml(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(x,y.sibling),y=s(y,E),y.return=x,x=y):(n(x,y),y=md(E,x.mode,j),y.return=x,x=y),o(x)):n(x,y)}return T}var Ci=sv(!0),iv=sv(!1),oc=ss(null),lc=null,di=null,Vf=null;function Of(){Vf=di=lc=null}function Lf(t){var e=oc.current;Re(oc),t._currentValue=e}function ch(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wi(t,e){lc=t,Vf=di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(Vf!==t)if(t={context:t,memoizedValue:e,next:null},di===null){if(lc===null)throw Error(z(308));di=t,lc.dependencies={lanes:0,firstContext:t}}else di=di.next=t;return e}var xs=null;function Mf(t){xs===null?xs=[t]:xs.push(t)}function av(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Mf(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function Ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ov(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,Mf(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function Al(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}function Dg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cc(t,e,n,r){var s=t.updateQueue;_r=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,m=d=u=null,c=i;do{var g=c.lane,b=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,C=c;switch(g=e,b=n,C.tag){case 1:if(N=C.payload,typeof N=="function"){f=N.call(b,f,g);break e}f=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,g=typeof N=="function"?N.call(b,f,g):N,g==null)break e;f=Me({},f,g);break e;case 2:_r=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else b={eventTime:b,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=b,u=f):m=m.next=b,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Cs|=o,t.lanes=o,t.memoizedState=f}}function Vg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Io={},kn=ss(Io),io=ss(Io),ao=ss(Io);function vs(t){if(t===Io)throw Error(z(174));return t}function Uf(t,e){switch(ke(ao,e),ke(io,t),ke(kn,Io),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$d(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$d(e,t)}Re(kn),ke(kn,e)}function ji(){Re(kn),Re(io),Re(ao)}function lv(t){vs(ao.current);var e=vs(kn.current),n=$d(e,t.type);e!==n&&(ke(io,t),ke(kn,n))}function zf(t){io.current===t&&(Re(kn),Re(io))}var Oe=ss(0);function uc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ld=[];function Bf(){for(var t=0;t<ld.length;t++)ld[t]._workInProgressVersionPrimary=null;ld.length=0}var Pl=cr.ReactCurrentDispatcher,cd=cr.ReactCurrentBatchConfig,ks=0,Le=null,Xe=null,st=null,dc=!1,Ma=!1,oo=0,SN=0;function vt(){throw Error(z(321))}function $f(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function Hf(t,e,n,r,s,i){if(ks=i,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pl.current=t===null||t.memoizedState===null?AN:PN,t=n(r,s),Ma){i=0;do{if(Ma=!1,oo=0,25<=i)throw Error(z(301));i+=1,st=Xe=null,e.updateQueue=null,Pl.current=RN,t=n(r,s)}while(Ma)}if(Pl.current=hc,e=Xe!==null&&Xe.next!==null,ks=0,st=Xe=Le=null,dc=!1,e)throw Error(z(300));return t}function Wf(){var t=oo!==0;return oo=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Le.memoizedState=st=t:st=st.next=t,st}function cn(){if(Xe===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=st===null?Le.memoizedState:st.next;if(e!==null)st=e,Xe=t;else{if(t===null)throw Error(z(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},st===null?Le.memoizedState=st=t:st=st.next=t}return st}function lo(t,e){return typeof e=="function"?e(t):e}function ud(t){var e=cn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var m=d.lane;if((ks&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,o=r):u=u.next=f,Le.lanes|=m,Cs|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,_n(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Le.lanes|=i,Cs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dd(t){var e=cn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);_n(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function cv(){}function uv(t,e){var n=Le,r=cn(),s=e(),i=!_n(r.memoizedState,s);if(i&&(r.memoizedState=s,Ot=!0),r=r.queue,qf(fv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,co(9,hv.bind(null,n,r,s,e),void 0,null),at===null)throw Error(z(349));ks&30||dv(n,e,s)}return s}function dv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hv(t,e,n,r){e.value=n,e.getSnapshot=r,mv(e)&&pv(t)}function fv(t,e,n){return n(function(){mv(e)&&pv(t)})}function mv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function pv(t){var e=tr(t,1);e!==null&&xn(e,t,1,-1)}function Og(t){var e=En();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},e.queue=t,t=t.dispatch=jN.bind(null,Le,t),[e.memoizedState,t]}function co(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gv(){return cn().memoizedState}function Rl(t,e,n,r){var s=En();Le.flags|=t,s.memoizedState=co(1|e,n,void 0,r===void 0?null:r)}function Qc(t,e,n,r){var s=cn();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&$f(r,o.deps)){s.memoizedState=co(e,n,i,r);return}}Le.flags|=t,s.memoizedState=co(1|e,n,i,r)}function Lg(t,e){return Rl(8390656,8,t,e)}function qf(t,e){return Qc(2048,8,t,e)}function yv(t,e){return Qc(4,2,t,e)}function xv(t,e){return Qc(4,4,t,e)}function vv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wv(t,e,n){return n=n!=null?n.concat([t]):null,Qc(4,4,vv.bind(null,e,t),n)}function Gf(){}function _v(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$f(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bv(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$f(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ev(t,e,n){return ks&21?(_n(n,e)||(n=kx(),Le.lanes|=n,Cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function kN(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=cd.transition;cd.transition={};try{t(!1),e()}finally{be=n,cd.transition=r}}function Nv(){return cn().memoizedState}function CN(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tv(t))Iv(e,n);else if(n=av(t,e,n,r),n!==null){var s=jt();xn(n,t,r,s),Sv(n,e,r)}}function jN(t,e,n){var r=Lr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tv(t))Iv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,_n(c,o)){var u=e.interleaved;u===null?(s.next=s,Mf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=av(t,e,s,r),n!==null&&(s=jt(),xn(n,t,r,s),Sv(n,e,r))}}function Tv(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function Iv(t,e){Ma=dc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}var hc={readContext:ln,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},AN={readContext:ln,useCallback:function(t,e){return En().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Lg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rl(4194308,4,vv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rl(4,2,t,e)},useMemo:function(t,e){var n=En();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=En();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CN.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=En();return t={current:t},e.memoizedState=t},useState:Og,useDebugValue:Gf,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=Og(!1),e=t[0];return t=kN.bind(null,t[1]),En().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,s=En();if(Ve){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),at===null)throw Error(z(349));ks&30||dv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Lg(fv.bind(null,r,i,t),[t]),r.flags|=2048,co(9,hv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=En(),e=at.identifierPrefix;if(Ve){var n=Kn,r=Gn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PN={readContext:ln,useCallback:_v,useContext:ln,useEffect:qf,useImperativeHandle:wv,useInsertionEffect:yv,useLayoutEffect:xv,useMemo:bv,useReducer:ud,useRef:gv,useState:function(){return ud(lo)},useDebugValue:Gf,useDeferredValue:function(t){var e=cn();return Ev(e,Xe.memoizedState,t)},useTransition:function(){var t=ud(lo)[0],e=cn().memoizedState;return[t,e]},useMutableSource:cv,useSyncExternalStore:uv,useId:Nv,unstable_isNewReconciler:!1},RN={readContext:ln,useCallback:_v,useContext:ln,useEffect:qf,useImperativeHandle:wv,useInsertionEffect:yv,useLayoutEffect:xv,useMemo:bv,useReducer:dd,useRef:gv,useState:function(){return dd(lo)},useDebugValue:Gf,useDeferredValue:function(t){var e=cn();return Xe===null?e.memoizedState=t:Ev(e,Xe.memoizedState,t)},useTransition:function(){var t=dd(lo)[0],e=cn().memoizedState;return[t,e]},useMutableSource:cv,useSyncExternalStore:uv,useId:Nv,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jc={isMounted:function(t){return(t=t._reactInternals)?Fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),s=Lr(t),i=Xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Vr(t,i,s),e!==null&&(xn(e,t,s,r),Al(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),s=Lr(t),i=Xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vr(t,i,s),e!==null&&(xn(e,t,s,r),Al(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=Lr(t),s=Xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vr(t,s,r),e!==null&&(xn(e,t,r,n),Al(e,t,r))}};function Mg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!to(n,r)||!to(s,i):!0}function kv(t,e,n){var r=!1,s=Qr,i=e.contextType;return typeof i=="object"&&i!==null?i=ln(i):(s=Mt(e)?Is:Tt.current,r=e.contextTypes,i=(r=r!=null)?Si(t,s):Qr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Fg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jc.enqueueReplaceState(e,e.state,null)}function dh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ff(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ln(i):(i=Mt(e)?Is:Tt.current,s.context=Si(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jc.enqueueReplaceState(s,s.state,null),cc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ai(t,e){try{var n="",r=e;do n+=oE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DN=typeof WeakMap=="function"?WeakMap:Map;function Cv(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mc||(mc=!0,bh=r),hh(t,e)},n}function jv(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hh(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ug(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=KN.bind(null,t,e,n),e.then(t,t))}function zg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var VN=cr.ReactCurrentOwner,Ot=!1;function Ct(t,e,n,r){e.child=t===null?iv(e,null,n,r):Ci(e,t.child,n,r)}function $g(t,e,n,r,s){n=n.render;var i=e.ref;return wi(e,s),r=Hf(t,e,n,r,i,s),n=Wf(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Ve&&n&&Pf(e),e.flags|=1,Ct(t,e,r,s),e.child)}function Hg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!tm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Av(t,e,i,r,s)):(t=Ll(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:to,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=Mr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Av(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(to(i,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,nr(t,e,s)}return fh(t,e,n,r,s)}function Pv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(fi,Bt),Bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(fi,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(fi,Bt),Bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke(fi,Bt),Bt|=r;return Ct(t,e,s,n),e.child}function Rv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fh(t,e,n,r,s){var i=Mt(n)?Is:Tt.current;return i=Si(e,i),wi(e,s),n=Hf(t,e,n,r,i,s),r=Wf(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Ve&&r&&Pf(e),e.flags|=1,Ct(t,e,n,s),e.child)}function Wg(t,e,n,r,s){if(Mt(n)){var i=!0;sc(e)}else i=!1;if(wi(e,s),e.stateNode===null)Dl(t,e),kv(e,n,r),dh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=ln(d):(d=Mt(n)?Is:Tt.current,d=Si(e,d));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Fg(e,o,r,d),_r=!1;var g=e.memoizedState;o.state=g,cc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Lt.current||_r?(typeof m=="function"&&(uh(e,n,m,r),u=e.memoizedState),(c=_r||Mg(e,n,c,r,g,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ov(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:fn(e.type,c),o.props=d,f=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ln(u):(u=Mt(n)?Is:Tt.current,u=Si(e,u));var b=n.getDerivedStateFromProps;(m=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==f||g!==u)&&Fg(e,o,r,u),_r=!1,g=e.memoizedState,o.state=g,cc(e,r,o,s);var N=e.memoizedState;c!==f||g!==N||Lt.current||_r?(typeof b=="function"&&(uh(e,n,b,r),N=e.memoizedState),(d=_r||Mg(e,n,d,r,g,N,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return mh(t,e,n,r,i,s)}function mh(t,e,n,r,s,i){Rv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&jg(e,n,!1),nr(t,e,i);r=e.stateNode,VN.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ci(e,t.child,null,i),e.child=Ci(e,null,c,i)):Ct(t,e,c,i),e.memoizedState=r.state,s&&jg(e,n,!0),e.child}function Dv(t){var e=t.stateNode;e.pendingContext?Cg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cg(t,e.context,!1),Uf(t,e.containerInfo)}function qg(t,e,n,r,s){return ki(),Df(s),e.flags|=256,Ct(t,e,n,r),e.child}var ph={dehydrated:null,treeContext:null,retryLane:0};function gh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vv(t,e,n){var r=e.pendingProps,s=Oe.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke(Oe,s&1),t===null)return lh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zc(o,r,0,null),t=Es(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gh(n),e.memoizedState=ph,t):Kf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return ON(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Mr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Mr(c,i):(i=Es(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?gh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ph,r}return i=t.child,t=i.sibling,r=Mr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kf(t,e){return e=Zc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pl(t,e,n,r){return r!==null&&Df(r),Ci(e,t.child,null,n),t=Kf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ON(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=hd(Error(z(422))),pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zc({mode:"visible",children:r.children},s,0,null),i=Es(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ci(e,t.child,null,o),e.child.memoizedState=gh(o),e.memoizedState=ph,i);if(!(e.mode&1))return pl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=hd(i,r,void 0),pl(t,e,o,r)}if(c=(o&t.childLanes)!==0,Ot||c){if(r=at,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),xn(r,t,s,-1))}return em(),r=hd(Error(z(421))),pl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=Dr(s.nextSibling),Wt=e,Ve=!0,pn=null,t!==null&&(en[tn++]=Gn,en[tn++]=Kn,en[tn++]=Ss,Gn=t.id,Kn=t.overflow,Ss=e),e=Kf(e,r.children),e.flags|=4096,e)}function Gg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ch(t.return,e,n)}function fd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ov(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ct(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gg(t,n,e);else if(t.tag===19)Gg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&uc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),fd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&uc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}fd(e,!0,n,null,i);break;case"together":fd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LN(t,e,n){switch(e.tag){case 3:Dv(e),ki();break;case 5:lv(e);break;case 1:Mt(e.type)&&sc(e);break;case 4:Uf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(oc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?Vv(t,e,n):(ke(Oe,Oe.current&1),t=nr(t,e,n),t!==null?t.sibling:null);ke(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ov(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,Pv(t,e,n)}return nr(t,e,n)}var Lv,yh,Mv,Fv;Lv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yh=function(){};Mv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,vs(kn.current);var i=null;switch(n){case"input":s=Fd(t,s),r=Fd(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=Bd(t,s),r=Bd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nc)}Hd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ka.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ka.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&je("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Fv=function(t,e,n,r){n!==r&&(e.flags|=4)};function _a(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MN(t,e,n){var r=e.pendingProps;switch(Rf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return Mt(e.type)&&rc(),wt(e),null;case 3:return r=e.stateNode,ji(),Re(Lt),Re(Tt),Bf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(Th(pn),pn=null))),yh(t,e),wt(e),null;case 5:zf(e);var s=vs(ao.current);if(n=e.type,t!==null&&e.stateNode!=null)Mv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return wt(e),null}if(t=vs(kn.current),fl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Tn]=e,r[so]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<ka.length;s++)je(ka[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":ng(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":sg(r,i),je("invalid",r)}Hd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,c,t),s=["children",""+c]):Ka.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":sl(r),rg(r,i,!0);break;case"textarea":sl(r),ig(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tn]=e,t[so]=r,Lv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wd(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<ka.length;s++)je(ka[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":ng(t,r),s=Fd(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),je("invalid",t);break;case"textarea":sg(t,r),s=Bd(t,r),je("invalid",t);break;default:s=r}Hd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?gx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Qa(t,u):typeof u=="number"&&Qa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ka.hasOwnProperty(i)?u!=null&&i==="onScroll"&&je("scroll",t):u!=null&&xf(t,i,u,o))}switch(n){case"input":sl(t),rg(t,r,!1);break;case"textarea":sl(t),ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?gi(t,!!r.multiple,i,!1):r.defaultValue!=null&&gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)Fv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=vs(ao.current),vs(kn.current),fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tn]=e,(i=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=e,e.stateNode=r}return wt(e),null;case 13:if(Re(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&$t!==null&&e.mode&1&&!(e.flags&128))rv(),ki(),e.flags|=98560,i=!1;else if(i=fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Tn]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),i=!1}else pn!==null&&(Th(pn),pn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?Ze===0&&(Ze=3):em())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return ji(),yh(t,e),t===null&&no(e.stateNode.containerInfo),wt(e),null;case 10:return Lf(e.type._context),wt(e),null;case 17:return Mt(e.type)&&rc(),wt(e),null;case 19:if(Re(Oe),i=e.memoizedState,i===null)return wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)_a(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=uc(t),o!==null){for(e.flags|=128,_a(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Oe,Oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>Pi&&(e.flags|=128,r=!0,_a(i,!1),e.lanes=4194304)}else{if(!r)if(t=uc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_a(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return wt(e),null}else 2*qe()-i.renderingStartTime>Pi&&n!==1073741824&&(e.flags|=128,r=!0,_a(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Oe.current,ke(Oe,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return Zf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function FN(t,e){switch(Rf(e),e.tag){case 1:return Mt(e.type)&&rc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ji(),Re(Lt),Re(Tt),Bf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zf(e),null;case 13:if(Re(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Oe),null;case 4:return ji(),null;case 10:return Lf(e.type._context),null;case 22:case 23:return Zf(),null;case 24:return null;default:return null}}var gl=!1,Et=!1,UN=typeof WeakSet=="function"?WeakSet:Set,q=null;function hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function xh(t,e,n){try{n()}catch(r){Be(t,e,r)}}var Kg=!1;function zN(t,e){if(th=Zl,t=Hx(),Af(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,m=0,f=t,g=null;t:for(;;){for(var b;f!==n||s!==0&&f.nodeType!==3||(c=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(b=f.firstChild)!==null;)g=f,f=b;for(;;){if(f===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++m===r&&(u=o),(b=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=b}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:t,selectionRange:n},Zl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,T=N.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?C:fn(e.type,C),T);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(j){Be(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return N=Kg,Kg=!1,N}function Fa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&xh(e,n,i)}s=s.next}while(s!==r)}}function Xc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Uv(t){var e=t.alternate;e!==null&&(t.alternate=null,Uv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[so],delete e[ih],delete e[EN],delete e[NN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zv(t){return t.tag===5||t.tag===3||t.tag===4}function Qg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nc));else if(r!==4&&(t=t.child,t!==null))for(wh(t,e,n),t=t.sibling;t!==null;)wh(t,e,n),t=t.sibling}function _h(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_h(t,e,n),t=t.sibling;t!==null;)_h(t,e,n),t=t.sibling}var ut=null,mn=!1;function gr(t,e,n){for(n=n.child;n!==null;)Bv(t,e,n),n=n.sibling}function Bv(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount($c,n)}catch{}switch(n.tag){case 5:Et||hi(n,e);case 6:var r=ut,s=mn;ut=null,gr(t,e,n),ut=r,mn=s,ut!==null&&(mn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(mn?(t=ut,n=n.stateNode,t.nodeType===8?ad(t.parentNode,n):t.nodeType===1&&ad(t,n),Za(t)):ad(ut,n.stateNode));break;case 4:r=ut,s=mn,ut=n.stateNode.containerInfo,mn=!0,gr(t,e,n),ut=r,mn=s;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xh(n,e,o),s=s.next}while(s!==r)}gr(t,e,n);break;case 1:if(!Et&&(hi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Be(n,e,c)}gr(t,e,n);break;case 21:gr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,gr(t,e,n),Et=r):gr(t,e,n);break;default:gr(t,e,n)}}function Jg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UN),e.forEach(function(r){var s=JN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:ut=c.stateNode,mn=!1;break e;case 3:ut=c.stateNode.containerInfo,mn=!0;break e;case 4:ut=c.stateNode.containerInfo,mn=!0;break e}c=c.return}if(ut===null)throw Error(z(160));Bv(i,o,s),ut=null,mn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Be(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$v(e,t),e=e.sibling}function $v(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),bn(t),r&4){try{Fa(3,t,t.return),Xc(3,t)}catch(C){Be(t,t.return,C)}try{Fa(5,t,t.return)}catch(C){Be(t,t.return,C)}}break;case 1:hn(e,t),bn(t),r&512&&n!==null&&hi(n,n.return);break;case 5:if(hn(e,t),bn(t),r&512&&n!==null&&hi(n,n.return),t.flags&32){var s=t.stateNode;try{Qa(s,"")}catch(C){Be(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&dx(s,i),Wd(c,o);var d=Wd(c,i);for(o=0;o<u.length;o+=2){var m=u[o],f=u[o+1];m==="style"?gx(s,f):m==="dangerouslySetInnerHTML"?mx(s,f):m==="children"?Qa(s,f):xf(s,m,f,d)}switch(c){case"input":Ud(s,i);break;case"textarea":hx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?gi(s,!!i.multiple,b,!1):g!==!!i.multiple&&(i.defaultValue!=null?gi(s,!!i.multiple,i.defaultValue,!0):gi(s,!!i.multiple,i.multiple?[]:"",!1))}s[so]=i}catch(C){Be(t,t.return,C)}}break;case 6:if(hn(e,t),bn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Be(t,t.return,C)}}break;case 3:if(hn(e,t),bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Za(e.containerInfo)}catch(C){Be(t,t.return,C)}break;case 4:hn(e,t),bn(t);break;case 13:hn(e,t),bn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xf=qe())),r&4&&Jg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(d=Et)||m,hn(e,t),Et=d):hn(e,t),bn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(q=t,m=t.child;m!==null;){for(f=q=m;q!==null;){switch(g=q,b=g.child,g.tag){case 0:case 11:case 14:case 15:Fa(4,g,g.return);break;case 1:hi(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(C){Be(r,n,C)}}break;case 5:hi(g,g.return);break;case 22:if(g.memoizedState!==null){Yg(f);continue}}b!==null?(b.return=g,q=b):Yg(f)}m=m.sibling}e:for(m=null,f=t;;){if(f.tag===5){if(m===null){m=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=px("display",o))}catch(C){Be(t,t.return,C)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(C){Be(t,t.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hn(e,t),bn(t),r&4&&Jg(t);break;case 21:break;default:hn(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zv(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qa(s,""),r.flags&=-33);var i=Qg(t);_h(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Qg(t);wh(t,c,o);break;default:throw Error(z(161))}}catch(u){Be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BN(t,e,n){q=t,Hv(t)}function Hv(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||gl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Et;c=gl;var d=Et;if(gl=o,(Et=u)&&!d)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Zg(s):u!==null?(u.return=o,q=u):Zg(s);for(;i!==null;)q=i,Hv(i),i=i.sibling;q=s,gl=c,Et=d}Xg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Xg(t)}}function Xg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||Xc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&Za(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Et||e.flags&512&&vh(e)}catch(g){Be(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Yg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Zg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xc(4,e)}catch(u){Be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Be(e,s,u)}}var i=e.return;try{vh(e)}catch(u){Be(e,i,u)}break;case 5:var o=e.return;try{vh(e)}catch(u){Be(e,o,u)}}}catch(u){Be(e,e.return,u)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var $N=Math.ceil,fc=cr.ReactCurrentDispatcher,Qf=cr.ReactCurrentOwner,an=cr.ReactCurrentBatchConfig,ge=0,at=null,Ke=null,mt=0,Bt=0,fi=ss(0),Ze=0,uo=null,Cs=0,Yc=0,Jf=0,Ua=null,Dt=null,Xf=0,Pi=1/0,$n=null,mc=!1,bh=null,Or=null,yl=!1,kr=null,pc=0,za=0,Eh=null,Vl=-1,Ol=0;function jt(){return ge&6?qe():Vl!==-1?Vl:Vl=qe()}function Lr(t){return t.mode&1?ge&2&&mt!==0?mt&-mt:IN.transition!==null?(Ol===0&&(Ol=kx()),Ol):(t=be,t!==0||(t=window.event,t=t===void 0?16:Vx(t.type)),t):1}function xn(t,e,n,r){if(50<za)throw za=0,Eh=null,Error(z(185));Eo(t,n,r),(!(ge&2)||t!==at)&&(t===at&&(!(ge&2)&&(Yc|=n),Ze===4&&Er(t,mt)),Ft(t,r),n===1&&ge===0&&!(e.mode&1)&&(Pi=qe()+500,Kc&&is()))}function Ft(t,e){var n=t.callbackNode;IE(t,e);var r=Yl(t,t===at?mt:0);if(r===0)n!==null&&lg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&lg(n),e===1)t.tag===0?TN(ey.bind(null,t)):ev(ey.bind(null,t)),_N(function(){!(ge&6)&&is()}),n=null;else{switch(Cx(r)){case 1:n=Ef;break;case 4:n=Ix;break;case 16:n=Xl;break;case 536870912:n=Sx;break;default:n=Xl}n=Yv(n,Wv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Wv(t,e){if(Vl=-1,Ol=0,ge&6)throw Error(z(327));var n=t.callbackNode;if(_i()&&t.callbackNode!==n)return null;var r=Yl(t,t===at?mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gc(t,r);else{e=r;var s=ge;ge|=2;var i=Gv();(at!==t||mt!==e)&&($n=null,Pi=qe()+500,bs(t,e));do try{qN();break}catch(c){qv(t,c)}while(!0);Of(),fc.current=i,ge=s,Ke!==null?e=0:(at=null,mt=0,e=Ze)}if(e!==0){if(e===2&&(s=Jd(t),s!==0&&(r=s,e=Nh(t,s))),e===1)throw n=uo,bs(t,0),Er(t,r),Ft(t,qe()),n;if(e===6)Er(t,r);else{if(s=t.current.alternate,!(r&30)&&!HN(s)&&(e=gc(t,r),e===2&&(i=Jd(t),i!==0&&(r=i,e=Nh(t,i))),e===1))throw n=uo,bs(t,0),Er(t,r),Ft(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:fs(t,Dt,$n);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=Xf+500-qe(),10<e)){if(Yl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=sh(fs.bind(null,t,Dt,$n),e);break}fs(t,Dt,$n);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$N(r/1960))-r,10<r){t.timeoutHandle=sh(fs.bind(null,t,Dt,$n),r);break}fs(t,Dt,$n);break;case 5:fs(t,Dt,$n);break;default:throw Error(z(329))}}}return Ft(t,qe()),t.callbackNode===n?Wv.bind(null,t):null}function Nh(t,e){var n=Ua;return t.current.memoizedState.isDehydrated&&(bs(t,e).flags|=256),t=gc(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&Th(e)),t}function Th(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function HN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!_n(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~Jf,e&=~Yc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function ey(t){if(ge&6)throw Error(z(327));_i();var e=Yl(t,0);if(!(e&1))return Ft(t,qe()),null;var n=gc(t,e);if(t.tag!==0&&n===2){var r=Jd(t);r!==0&&(e=r,n=Nh(t,r))}if(n===1)throw n=uo,bs(t,0),Er(t,e),Ft(t,qe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,Dt,$n),Ft(t,qe()),null}function Yf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Pi=qe()+500,Kc&&is())}}function js(t){kr!==null&&kr.tag===0&&!(ge&6)&&_i();var e=ge;ge|=1;var n=an.transition,r=be;try{if(an.transition=null,be=1,t)return t()}finally{be=r,an.transition=n,ge=e,!(ge&6)&&is()}}function Zf(){Bt=fi.current,Re(fi)}function bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wN(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Rf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rc();break;case 3:ji(),Re(Lt),Re(Tt),Bf();break;case 5:zf(r);break;case 4:ji();break;case 13:Re(Oe);break;case 19:Re(Oe);break;case 10:Lf(r.type._context);break;case 22:case 23:Zf()}n=n.return}if(at=t,Ke=t=Mr(t.current,null),mt=Bt=e,Ze=0,uo=null,Jf=Yc=Cs=0,Dt=Ua=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xs=null}return t}function qv(t,e){do{var n=Ke;try{if(Of(),Pl.current=hc,dc){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dc=!1}if(ks=0,st=Xe=Le=null,Ma=!1,oo=0,Qf.current=null,n===null||n.return===null){Ze=1,uo=e,Ke=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=mt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=zg(o);if(b!==null){b.flags&=-257,Bg(b,o,c,i,e),b.mode&1&&Ug(i,d,e),e=b,u=d;var N=e.updateQueue;if(N===null){var C=new Set;C.add(u),e.updateQueue=C}else N.add(u);break e}else{if(!(e&1)){Ug(i,d,e),em();break e}u=Error(z(426))}}else if(Ve&&c.mode&1){var T=zg(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Bg(T,o,c,i,e),Df(Ai(u,c));break e}}i=u=Ai(u,c),Ze!==4&&(Ze=2),Ua===null?Ua=[i]:Ua.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Cv(i,u,e);Dg(i,x);break e;case 1:c=u;var y=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Or===null||!Or.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=jv(i,c,e);Dg(i,j);break e}}i=i.return}while(i!==null)}Qv(n)}catch(L){e=L,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function Gv(){var t=fc.current;return fc.current=hc,t===null?hc:t}function em(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),at===null||!(Cs&268435455)&&!(Yc&268435455)||Er(at,mt)}function gc(t,e){var n=ge;ge|=2;var r=Gv();(at!==t||mt!==e)&&($n=null,bs(t,e));do try{WN();break}catch(s){qv(t,s)}while(!0);if(Of(),ge=n,fc.current=r,Ke!==null)throw Error(z(261));return at=null,mt=0,Ze}function WN(){for(;Ke!==null;)Kv(Ke)}function qN(){for(;Ke!==null&&!yE();)Kv(Ke)}function Kv(t){var e=Xv(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?Qv(t):Ke=e,Qf.current=null}function Qv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FN(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ke=null;return}}else if(n=MN(n,e,Bt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Ze===0&&(Ze=5)}function fs(t,e,n){var r=be,s=an.transition;try{an.transition=null,be=1,GN(t,e,n,r)}finally{an.transition=s,be=r}return null}function GN(t,e,n,r){do _i();while(kr!==null);if(ge&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(SE(t,i),t===at&&(Ke=at=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yl||(yl=!0,Yv(Xl,function(){return _i(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=an.transition,an.transition=null;var o=be;be=1;var c=ge;ge|=4,Qf.current=null,zN(t,n),$v(n,t),fN(nh),Zl=!!th,nh=th=null,t.current=n,BN(n),xE(),ge=c,be=o,an.transition=i}else t.current=n;if(yl&&(yl=!1,kr=t,pc=s),i=t.pendingLanes,i===0&&(Or=null),_E(n.stateNode),Ft(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mc)throw mc=!1,t=bh,bh=null,t;return pc&1&&t.tag!==0&&_i(),i=t.pendingLanes,i&1?t===Eh?za++:(za=0,Eh=t):za=0,is(),null}function _i(){if(kr!==null){var t=Cx(pc),e=an.transition,n=be;try{if(an.transition=null,be=16>t?16:t,kr===null)var r=!1;else{if(t=kr,kr=null,pc=0,ge&6)throw Error(z(331));var s=ge;for(ge|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(q=d;q!==null;){var m=q;switch(m.tag){case 0:case 11:case 15:Fa(8,m,i)}var f=m.child;if(f!==null)f.return=m,q=f;else for(;q!==null;){m=q;var g=m.sibling,b=m.return;if(Uv(m),m===d){q=null;break}if(g!==null){g.return=b,q=g;break}q=b}}}var N=i.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var T=C.sibling;C.sibling=null,C=T}while(C!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fa(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,q=x;break e}q=i.return}}var y=t.current;for(q=y;q!==null;){o=q;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,q=E;else e:for(o=y;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Xc(9,c)}}catch(L){Be(c,c.return,L)}if(c===o){q=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,q=j;break e}q=c.return}}if(ge=s,is(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot($c,t)}catch{}r=!0}return r}finally{be=n,an.transition=e}}return!1}function ty(t,e,n){e=Ai(n,e),e=Cv(t,e,1),t=Vr(t,e,1),e=jt(),t!==null&&(Eo(t,1,e),Ft(t,e))}function Be(t,e,n){if(t.tag===3)ty(t,t,n);else for(;e!==null;){if(e.tag===3){ty(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=Ai(n,t),t=jv(e,t,1),e=Vr(e,t,1),t=jt(),e!==null&&(Eo(e,1,t),Ft(e,t));break}}e=e.return}}function KN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(mt&n)===n&&(Ze===4||Ze===3&&(mt&130023424)===mt&&500>qe()-Xf?bs(t,0):Jf|=n),Ft(t,e)}function Jv(t,e){e===0&&(t.mode&1?(e=ol,ol<<=1,!(ol&130023424)&&(ol=4194304)):e=1);var n=jt();t=tr(t,e),t!==null&&(Eo(t,e,n),Ft(t,n))}function QN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jv(t,n)}function JN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Jv(t,n)}var Xv;Xv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,LN(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Ve&&e.flags&1048576&&tv(e,ac,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dl(t,e),t=e.pendingProps;var s=Si(e,Tt.current);wi(e,n),s=Hf(null,e,r,t,s,n);var i=Wf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(i=!0,sc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ff(e),s.updater=Jc,e.stateNode=s,s._reactInternals=e,dh(e,r,t,n),e=mh(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&Pf(e),Ct(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YN(r),t=fn(r,t),s){case 0:e=fh(null,e,r,t,n);break e;case 1:e=Wg(null,e,r,t,n);break e;case 11:e=$g(null,e,r,t,n);break e;case 14:e=Hg(null,e,r,fn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),fh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Wg(t,e,r,s,n);case 3:e:{if(Dv(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ov(t,e),cc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ai(Error(z(423)),e),e=qg(t,e,r,n,s);break e}else if(r!==s){s=Ai(Error(z(424)),e),e=qg(t,e,r,n,s);break e}else for($t=Dr(e.stateNode.containerInfo.firstChild),Wt=e,Ve=!0,pn=null,n=iv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),r===s){e=nr(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return lv(e),t===null&&lh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,rh(r,s)?o=null:i!==null&&rh(r,i)&&(e.flags|=32),Rv(t,e),Ct(t,e,o,n),e.child;case 6:return t===null&&lh(e),null;case 13:return Vv(t,e,n);case 4:return Uf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ci(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),$g(t,e,r,s,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ke(oc,r._currentValue),r._currentValue=o,i!==null)if(_n(i.value,o)){if(i.children===s.children&&!Lt.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Xn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),ch(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ch(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ct(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wi(e,n),s=ln(s),r=r(s),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),Hg(t,e,r,s,n);case 15:return Av(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Dl(t,e),e.tag=1,Mt(r)?(t=!0,sc(e)):t=!1,wi(e,n),kv(e,r,s),dh(e,r,s,n),mh(null,e,r,!0,t,n);case 19:return Ov(t,e,n);case 22:return Pv(t,e,n)}throw Error(z(156,e.tag))};function Yv(t,e){return Tx(t,e)}function XN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new XN(t,e,n,r)}function tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YN(t){if(typeof t=="function")return tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wf)return 11;if(t===_f)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ll(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")tm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ri:return Es(n.children,s,i,e);case vf:o=8,s|=8;break;case Vd:return t=sn(12,n,e,s|2),t.elementType=Vd,t.lanes=i,t;case Od:return t=sn(13,n,e,s),t.elementType=Od,t.lanes=i,t;case Ld:return t=sn(19,n,e,s),t.elementType=Ld,t.lanes=i,t;case lx:return Zc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ax:o=10;break e;case ox:o=9;break e;case wf:o=11;break e;case _f:o=14;break e;case wr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Es(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function Zc(t,e,n,r){return t=sn(22,t,r,e),t.elementType=lx,t.lanes=n,t.stateNode={isHidden:!1},t}function md(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function pd(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qu(0),this.expirationTimes=Qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function nm(t,e,n,r,s,i,o,c,u){return t=new ZN(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ff(i),t}function e2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Zv(t){if(!t)return Qr;t=t._reactInternals;e:{if(Fs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Mt(n))return Zx(t,n,e)}return e}function ew(t,e,n,r,s,i,o,c,u){return t=nm(n,r,!0,t,s,i,o,c,u),t.context=Zv(null),n=t.current,r=jt(),s=Lr(n),i=Xn(r,s),i.callback=e??null,Vr(n,i,s),t.current.lanes=s,Eo(t,s,r),Ft(t,r),t}function eu(t,e,n,r){var s=e.current,i=jt(),o=Lr(s);return n=Zv(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(s,e,o),t!==null&&(xn(t,s,o,i),Al(t,s,o)),o}function yc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ny(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rm(t,e){ny(t,e),(t=t.alternate)&&ny(t,e)}function t2(){return null}var tw=typeof reportError=="function"?reportError:function(t){console.error(t)};function sm(t){this._internalRoot=t}tu.prototype.render=sm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));eu(t,e,null,null)};tu.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){eu(null,t,null,null)}),e[er]=null}};function tu(t){this._internalRoot=t}tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Px();t={blockedOn:null,target:t,priority:e};for(var n=0;n<br.length&&e!==0&&e<br[n].priority;n++);br.splice(n,0,t),n===0&&Dx(t)}};function im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ry(){}function n2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=yc(o);i.call(d)}}var o=ew(e,r,t,0,null,!1,!1,"",ry);return t._reactRootContainer=o,t[er]=o.current,no(t.nodeType===8?t.parentNode:t),js(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=yc(u);c.call(d)}}var u=nm(t,0,!1,null,null,!1,!1,"",ry);return t._reactRootContainer=u,t[er]=u.current,no(t.nodeType===8?t.parentNode:t),js(function(){eu(e,u,n,r)}),u}function ru(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=yc(o);c.call(u)}}eu(e,o,t,s)}else o=n2(n,e,t,s,r);return yc(o)}jx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sa(e.pendingLanes);n!==0&&(Nf(e,n|1),Ft(e,qe()),!(ge&6)&&(Pi=qe()+500,is()))}break;case 13:js(function(){var r=tr(t,1);if(r!==null){var s=jt();xn(r,t,1,s)}}),rm(t,1)}};Tf=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=jt();xn(e,t,134217728,n)}rm(t,134217728)}};Ax=function(t){if(t.tag===13){var e=Lr(t),n=tr(t,e);if(n!==null){var r=jt();xn(n,t,e,r)}rm(t,e)}};Px=function(){return be};Rx=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Gd=function(t,e,n){switch(e){case"input":if(Ud(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gc(r);if(!s)throw Error(z(90));ux(r),Ud(r,s)}}}break;case"textarea":hx(t,n);break;case"select":e=n.value,e!=null&&gi(t,!!n.multiple,e,!1)}};vx=Yf;wx=js;var r2={usingClientEntryPoint:!1,Events:[To,oi,Gc,yx,xx,Yf]},ba={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s2={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ex(t),t===null?null:t.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||t2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xl.isDisabled&&xl.supportsFiber)try{$c=xl.inject(s2),Sn=xl}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r2;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!im(e))throw Error(z(200));return e2(t,e,null,n)};Gt.createRoot=function(t,e){if(!im(t))throw Error(z(299));var n=!1,r="",s=tw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=nm(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,no(t.nodeType===8?t.parentNode:t),new sm(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Ex(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return js(t)};Gt.hydrate=function(t,e,n){if(!nu(e))throw Error(z(200));return ru(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!im(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=tw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ew(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,no(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new tu(e)};Gt.render=function(t,e,n){if(!nu(e))throw Error(z(200));return ru(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!nu(t))throw Error(z(40));return t._reactRootContainer?(js(function(){ru(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Gt.unstable_batchedUpdates=Yf;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return ru(t,e,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nw)}catch(t){console.error(t)}}nw(),nx.exports=Gt;var rw=nx.exports,sw,sy=rw;sw=sy.createRoot,sy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ho(){return ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ho.apply(this,arguments)}var Cr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cr||(Cr={}));const iy="popstate";function i2(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return Ih("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xc(s)}return o2(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function iw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function a2(){return Math.random().toString(36).substr(2,8)}function ay(t,e){return{usr:t.state,key:t.key,idx:e}}function Ih(t,e,n,r){return n===void 0&&(n=null),ho({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hi(e):e,{state:n,key:e&&e.key||r||a2()})}function xc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function o2(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Cr.Pop,u=null,d=m();d==null&&(d=0,o.replaceState(ho({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function f(){c=Cr.Pop;let T=m(),x=T==null?null:T-d;d=T,u&&u({action:c,location:C.location,delta:x})}function g(T,x){c=Cr.Push;let y=Ih(C.location,T,x);d=m()+1;let E=ay(y,d),j=C.createHref(y);try{o.pushState(E,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(j)}i&&u&&u({action:c,location:C.location,delta:1})}function b(T,x){c=Cr.Replace;let y=Ih(C.location,T,x);d=m();let E=ay(y,d),j=C.createHref(y);o.replaceState(E,"",j),i&&u&&u({action:c,location:C.location,delta:0})}function N(T){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof T=="string"?T:xc(T);return y=y.replace(/ $/,"%20"),Je(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let C={get action(){return c},get location(){return t(s,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(iy,f),u=T,()=>{s.removeEventListener(iy,f),u=null}},createHref(T){return e(s,T)},createURL:N,encodeLocation(T){let x=N(T);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:b,go(T){return o.go(T)}};return C}var oy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oy||(oy={}));function l2(t,e,n){return n===void 0&&(n="/"),c2(t,e,n)}function c2(t,e,n,r){let s=typeof e=="string"?Hi(e):e,i=am(s.pathname||"/",n);if(i==null)return null;let o=aw(t);u2(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=b2(i);c=v2(o[u],d)}return c}function aw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Fr([r,u.relativePath]),m=n.concat(u);i.children&&i.children.length>0&&(Je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),aw(i.children,e,m,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:y2(d,i.index),routesMeta:m})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of ow(i.path))s(i,o,u)}),e}function ow(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ow(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function u2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:x2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const d2=/^:[\w-]+$/,h2=3,f2=2,m2=1,p2=10,g2=-2,ly=t=>t==="*";function y2(t,e){let n=t.split("/"),r=n.length;return n.some(ly)&&(r+=g2),e&&(r+=f2),n.filter(s=>!ly(s)).reduce((s,i)=>s+(d2.test(i)?h2:i===""?m2:p2),r)}function x2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function v2(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",f=w2({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),g=u.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Fr([i,f.pathname]),pathnameBase:I2(Fr([i,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(i=Fr([i,f.pathnameBase]))}return o}function w2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,m,f)=>{let{paramName:g,isOptional:b}=m;if(g==="*"){let C=c[f]||"";o=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const N=c[f];return b&&!N?d[g]=void 0:d[g]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function _2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),iw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function b2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return iw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function am(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function E2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hi(t):t;return{pathname:n?n.startsWith("/")?n:N2(n,e):e,search:S2(r),hash:k2(s)}}function N2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function gd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function T2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lw(t,e){let n=T2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cw(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Hi(t):(s=ho({},t),Je(!s.pathname||!s.pathname.includes("?"),gd("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),gd("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),gd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;s.pathname=g.join("/")}c=f>=0?e[f]:"/"}let u=E2(s,c),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const Fr=t=>t.join("/").replace(/\/\/+/g,"/"),I2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),S2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,k2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function C2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uw=["post","put","patch","delete"];new Set(uw);const j2=["get",...uw];new Set(j2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fo(){return fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fo.apply(this,arguments)}const om=R.createContext(null),A2=R.createContext(null),Us=R.createContext(null),su=R.createContext(null),zs=R.createContext({outlet:null,matches:[],isDataRoute:!1}),dw=R.createContext(null);function P2(t,e){let{relative:n}=e===void 0?{}:e;So()||Je(!1);let{basename:r,navigator:s}=R.useContext(Us),{hash:i,pathname:o,search:c}=fw(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Fr([r,o])),s.createHref({pathname:u,search:c,hash:i})}function So(){return R.useContext(su)!=null}function Wi(){return So()||Je(!1),R.useContext(su).location}function hw(t){R.useContext(Us).static||R.useLayoutEffect(t)}function lm(){let{isDataRoute:t}=R.useContext(zs);return t?W2():R2()}function R2(){So()||Je(!1);let t=R.useContext(om),{basename:e,future:n,navigator:r}=R.useContext(Us),{matches:s}=R.useContext(zs),{pathname:i}=Wi(),o=JSON.stringify(lw(s,n.v7_relativeSplatPath)),c=R.useRef(!1);return hw(()=>{c.current=!0}),R.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let f=cw(d,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Fr([e,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[e,r,o,i,t])}function fw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Us),{matches:s}=R.useContext(zs),{pathname:i}=Wi(),o=JSON.stringify(lw(s,r.v7_relativeSplatPath));return R.useMemo(()=>cw(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function D2(t,e){return V2(t,e)}function V2(t,e,n,r){So()||Je(!1);let{navigator:s}=R.useContext(Us),{matches:i}=R.useContext(zs),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Wi(),m;if(e){var f;let T=typeof e=="string"?Hi(e):e;u==="/"||(f=T.pathname)!=null&&f.startsWith(u)||Je(!1),m=T}else m=d;let g=m.pathname||"/",b=g;if(u!=="/"){let T=u.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(T.length).join("/")}let N=l2(t,{pathname:b}),C=U2(N&&N.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:Fr([u,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:Fr([u,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&C?R.createElement(su.Provider,{value:{location:fo({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Cr.Pop}},C):C}function O2(){let t=H2(),e=C2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,null)}const L2=R.createElement(O2,null);class M2 extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(zs.Provider,{value:this.props.routeContext},R.createElement(dw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F2(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(om);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(zs.Provider,{value:e},r)}function U2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=o.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);m>=0||Je(!1),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let f=o[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:g,errors:b}=n,N=f.route.loader&&g[f.route.id]===void 0&&(!b||b[f.route.id]===void 0);if(f.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,f,g)=>{let b,N=!1,C=null,T=null;n&&(b=c&&f.route.id?c[f.route.id]:void 0,C=f.route.errorElement||L2,u&&(d<0&&g===0?(q2("route-fallback"),N=!0,T=null):d===g&&(N=!0,T=f.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),y=()=>{let E;return b?E=C:N?E=T:f.route.Component?E=R.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,R.createElement(F2,{match:f,routeContext:{outlet:m,matches:x,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?R.createElement(M2,{location:n.location,revalidation:n.revalidation,component:C,error:b,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var mw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mw||{}),pw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pw||{});function z2(t){let e=R.useContext(om);return e||Je(!1),e}function B2(t){let e=R.useContext(A2);return e||Je(!1),e}function $2(t){let e=R.useContext(zs);return e||Je(!1),e}function gw(t){let e=$2(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function H2(){var t;let e=R.useContext(dw),n=B2(),r=gw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function W2(){let{router:t}=z2(mw.UseNavigateStable),e=gw(pw.UseNavigateStable),n=R.useRef(!1);return hw(()=>{n.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,fo({fromRouteId:e},i)))},[t,e])}const cy={};function q2(t,e,n){cy[t]||(cy[t]=!0)}function G2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Xs(t){Je(!1)}function K2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Cr.Pop,navigator:i,static:o=!1,future:c}=t;So()&&Je(!1);let u=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:u,navigator:i,static:o,future:fo({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=Hi(r));let{pathname:m="/",search:f="",hash:g="",state:b=null,key:N="default"}=r,C=R.useMemo(()=>{let T=am(m,u);return T==null?null:{location:{pathname:T,search:f,hash:g,state:b,key:N},navigationType:s}},[u,m,f,g,b,N,s]);return C==null?null:R.createElement(Us.Provider,{value:d},R.createElement(su.Provider,{children:n,value:C}))}function Q2(t){let{children:e,location:n}=t;return D2(Sh(e),n)}new Promise(()=>{});function Sh(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,Sh(r.props.children,i));return}r.type!==Xs&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kh(){return kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kh.apply(this,arguments)}function J2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function X2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Y2(t,e){return t.button===0&&(!e||e==="_self")&&!X2(t)}function Ch(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Z2(t,e){let n=Ch(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const eT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tT="6";try{window.__reactRouterVersion=tT}catch{}const nT="startTransition",uy=K1[nT];function rT(t){let{basename:e,children:n,future:r,window:s}=t,i=R.useRef();i.current==null&&(i.current=i2({window:s,v5Compat:!0}));let o=i.current,[c,u]=R.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=R.useCallback(f=>{d&&uy?uy(()=>u(f)):u(f)},[u,d]);return R.useLayoutEffect(()=>o.listen(m),[o,m]),R.useEffect(()=>G2(r),[r]),R.createElement(K2,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const sT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Se=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:m,viewTransition:f}=e,g=J2(e,eT),{basename:b}=R.useContext(Us),N,C=!1;if(typeof d=="string"&&iT.test(d)&&(N=d,sT))try{let E=new URL(window.location.href),j=d.startsWith("//")?new URL(E.protocol+d):new URL(d),L=am(j.pathname,b);j.origin===E.origin&&L!=null?d=L+j.search+j.hash:C=!0}catch{}let T=P2(d,{relative:s}),x=aT(d,{replace:o,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:f});function y(E){r&&r(E),E.defaultPrevented||x(E)}return R.createElement("a",kh({},g,{href:N||T,onClick:C||i?r:y,ref:n,target:u}))});var dy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dy||(dy={}));var hy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hy||(hy={}));function aT(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=lm(),d=Wi(),m=fw(t,{relative:o});return R.useCallback(f=>{if(Y2(f,n)){f.preventDefault();let g=r!==void 0?r:xc(d)===xc(m);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,u,m,r,s,n,t,i,o,c])}function oT(t){let e=R.useRef(Ch(t)),n=R.useRef(!1),r=Wi(),s=R.useMemo(()=>Z2(r.search,n.current?null:e.current),[r.search]),i=lm(),o=R.useCallback((c,u)=>{const d=Ch(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,o]}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,...d},m)=>R.createElement("svg",{ref:m,...lT,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${cT(t)}`,c].join(" "),...d},[...e.map(([f,g])=>R.createElement(f,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Z("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=Z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=Z("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=Z("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Z("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=Z("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=Z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=Z("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Z("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=Z("GitPullRequest",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=Z("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=Z("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=Z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Z("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=Z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=Z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Z("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),wT=()=>{};var gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_T=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,f=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(g=64)),r.push(n[m],n[f],n[g],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_T(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||f==null)throw new bT;const g=i<<2|c>>4;if(r.push(g),d!==64){const b=c<<4&240|d>>2;if(r.push(b),f!==64){const N=d<<6&192|f;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ET=function(t){const e=kw(t);return Cw.encodeByteArray(e,!0)},bc=function(t){return ET(t).replace(/\./g,"")},jw=function(t){try{return Cw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=()=>NT().__FIREBASE_DEFAULTS__,IT=()=>{if(typeof process>"u"||typeof gy>"u")return;const t=gy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ST=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jw(t[1]);return e&&JSON.parse(e)},lu=()=>{try{return wT()||TT()||IT()||ST()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Aw=t=>{var e,n;return(n=(e=lu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kT=t=>{const e=Aw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pw=()=>{var t;return(t=lu())===null||t===void 0?void 0:t.config},Rw=t=>{var e;return(e=lu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bc(JSON.stringify(n)),bc(JSON.stringify(o)),""].join(".")}const Ba={};function AT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ba))Ba[e]?t.emulator.push(e):t.prod.push(e);return t}function PT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let yy=!1;function Vw(t,e){if(typeof window>"u"||typeof document>"u"||!qi(window.location.host)||Ba[t]===e||Ba[t]||yy)return;Ba[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=AT().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,b){g.setAttribute("width","24"),g.setAttribute("id",b),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{yy=!0,o()},g}function m(g,b){g.setAttribute("id",b),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=PT(r),b=n("text"),N=document.getElementById(b)||document.createElement("span"),C=n("learnmore"),T=document.getElementById(C)||document.createElement("a"),x=n("preprendIcon"),y=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;c(E),m(T,C);const j=d();u(y,x),E.append(y,N,T,j),document.body.appendChild(E)}i?(N.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function DT(){var t;const e=(t=lu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MT(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FT(){return!DT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UT(){try{return typeof indexedDB=="object"}catch{return!1}}function zT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BT,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?$T(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new dr(s,c,r)}}function $T(t,e){return t.replace(HT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HT=/\{\$([^}]+)}/g;function WT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xy(i)&&xy(o)){if(!Rs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qT(t,e){const n=new GT(t,e);return n.subscribe.bind(n)}class GT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=wd),s.error===void 0&&(s.error=wd),s.complete===void 0&&(s.complete=wd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){return t&&t._delegate?t._delegate:t}class Ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new CT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XT(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JT(t){return t===ms?void 0:t}function XT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const ZT={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},eI=he.INFO,tI={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},nI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dm{constructor(e){this.name=e,this._logLevel=eI,this._logHandler=nI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const rI=(t,e)=>e.some(n=>t instanceof n);let vy,wy;function sI(){return vy||(vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iI(){return wy||(wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ow=new WeakMap,Oh=new WeakMap,Lw=new WeakMap,_d=new WeakMap,hm=new WeakMap;function aI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(zr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ow.set(n,t)}).catch(()=>{}),hm.set(e,t),e}function oI(t){if(Oh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Oh.set(t,e)}let Lh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Lw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lI(t){Lh=t(Lh)}function cI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bd(this),e,...n);return Lw.set(r,e.sort?e.sort():[e]),zr(r)}:iI().includes(t)?function(...e){return t.apply(bd(this),e),zr(Ow.get(this))}:function(...e){return zr(t.apply(bd(this),e))}}function uI(t){return typeof t=="function"?cI(t):(t instanceof IDBTransaction&&oI(t),rI(t,sI())?new Proxy(t,Lh):t)}function zr(t){if(t instanceof IDBRequest)return aI(t);if(_d.has(t))return _d.get(t);const e=uI(t);return e!==t&&(_d.set(t,e),hm.set(e,t)),e}const bd=t=>hm.get(t);function dI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=zr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(zr(o.result),u.oldVersion,u.newVersion,zr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const hI=["get","getKey","getAll","getAllKeys","count"],fI=["put","add","delete","clear"],Ed=new Map;function _y(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ed.get(e))return Ed.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hI.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Ed.set(e,i),i}lI(t=>({...t,get:(e,n,r)=>_y(e,n)||t.get(e,n,r),has:(e,n)=>!!_y(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mh="@firebase/app",by="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new dm("@firebase/app"),gI="@firebase/app-compat",yI="@firebase/analytics-compat",xI="@firebase/analytics",vI="@firebase/app-check-compat",wI="@firebase/app-check",_I="@firebase/auth",bI="@firebase/auth-compat",EI="@firebase/database",NI="@firebase/data-connect",TI="@firebase/database-compat",II="@firebase/functions",SI="@firebase/functions-compat",kI="@firebase/installations",CI="@firebase/installations-compat",jI="@firebase/messaging",AI="@firebase/messaging-compat",PI="@firebase/performance",RI="@firebase/performance-compat",DI="@firebase/remote-config",VI="@firebase/remote-config-compat",OI="@firebase/storage",LI="@firebase/storage-compat",MI="@firebase/firestore",FI="@firebase/ai",UI="@firebase/firestore-compat",zI="firebase",BI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="[DEFAULT]",$I={[Mh]:"fire-core",[gI]:"fire-core-compat",[xI]:"fire-analytics",[yI]:"fire-analytics-compat",[wI]:"fire-app-check",[vI]:"fire-app-check-compat",[_I]:"fire-auth",[bI]:"fire-auth-compat",[EI]:"fire-rtdb",[NI]:"fire-data-connect",[TI]:"fire-rtdb-compat",[II]:"fire-fn",[SI]:"fire-fn-compat",[kI]:"fire-iid",[CI]:"fire-iid-compat",[jI]:"fire-fcm",[AI]:"fire-fcm-compat",[PI]:"fire-perf",[RI]:"fire-perf-compat",[DI]:"fire-rc",[VI]:"fire-rc-compat",[OI]:"fire-gcs",[LI]:"fire-gcs-compat",[MI]:"fire-fst",[UI]:"fire-fst-compat",[FI]:"fire-vertex","fire-js":"fire-js",[zI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Map,HI=new Map,Uh=new Map;function Ey(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ri(t){const e=t.name;if(Uh.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Uh.set(e,t);for(const n of Ec.values())Ey(n,t);for(const n of HI.values())Ey(n,t);return!0}function fm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Co("app","Firebase",WI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=BI;function Mw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Br.create("bad-app-name",{appName:String(s)});if(n||(n=Pw()),!n)throw Br.create("no-options");const i=Ec.get(s);if(i){if(Rs(n,i.options)&&Rs(r,i.config))return i;throw Br.create("duplicate-app",{appName:s})}const o=new YT(s);for(const u of Uh.values())o.addComponent(u);const c=new qI(n,r,o);return Ec.set(s,c),c}function Fw(t=Fh){const e=Ec.get(t);if(!e&&t===Fh&&Pw())return Mw();if(!e)throw Br.create("no-app",{appName:t});return e}function $r(t,e,n){var r;let s=(r=$I[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(c.join(" "));return}Ri(new Ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="firebase-heartbeat-database",KI=1,mo="firebase-heartbeat-store";let Nd=null;function Uw(){return Nd||(Nd=dI(GI,KI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),Nd}async function QI(t){try{const n=(await Uw()).transaction(mo),r=await n.objectStore(mo).get(zw(t));return await n.done,r}catch(e){if(e instanceof dr)ir.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function Ny(t,e){try{const r=(await Uw()).transaction(mo,"readwrite");await r.objectStore(mo).put(e,zw(t)),await r.done}catch(n){if(n instanceof dr)ir.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(r.message)}}}function zw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=1024,XI=30;class YI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ty();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>XI){const o=tS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ty(),{heartbeatsToSend:r,unsentEntries:s}=ZI(this._heartbeatsCache.heartbeats),i=bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ir.warn(n),""}}}function Ty(){return new Date().toISOString().substring(0,10)}function ZI(t,e=JI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Iy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Iy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UT()?zT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ny(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ny(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Iy(t){return bc(JSON.stringify({version:2,heartbeats:t})).length}function tS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){Ri(new Ds("platform-logger",e=>new mI(e),"PRIVATE")),Ri(new Ds("heartbeat",e=>new YI(e),"PRIVATE")),$r(Mh,by,t),$r(Mh,by,"esm2017"),$r("fire-js","")}nS("");var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,Bw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function _(){}_.prototype=w.prototype,I.D=w.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(S,A,P){for(var k=Array(arguments.length-2),K=2;K<arguments.length;K++)k[K-2]=arguments[K];return w.prototype[A].apply(S,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,w,_){_||(_=0);var S=Array(16);if(typeof w=="string")for(var A=0;16>A;++A)S[A]=w.charCodeAt(_++)|w.charCodeAt(_++)<<8|w.charCodeAt(_++)<<16|w.charCodeAt(_++)<<24;else for(A=0;16>A;++A)S[A]=w[_++]|w[_++]<<8|w[_++]<<16|w[_++]<<24;w=I.g[0],_=I.g[1],A=I.g[2];var P=I.g[3],k=w+(P^_&(A^P))+S[0]+3614090360&4294967295;w=_+(k<<7&4294967295|k>>>25),k=P+(A^w&(_^A))+S[1]+3905402710&4294967295,P=w+(k<<12&4294967295|k>>>20),k=A+(_^P&(w^_))+S[2]+606105819&4294967295,A=P+(k<<17&4294967295|k>>>15),k=_+(w^A&(P^w))+S[3]+3250441966&4294967295,_=A+(k<<22&4294967295|k>>>10),k=w+(P^_&(A^P))+S[4]+4118548399&4294967295,w=_+(k<<7&4294967295|k>>>25),k=P+(A^w&(_^A))+S[5]+1200080426&4294967295,P=w+(k<<12&4294967295|k>>>20),k=A+(_^P&(w^_))+S[6]+2821735955&4294967295,A=P+(k<<17&4294967295|k>>>15),k=_+(w^A&(P^w))+S[7]+4249261313&4294967295,_=A+(k<<22&4294967295|k>>>10),k=w+(P^_&(A^P))+S[8]+1770035416&4294967295,w=_+(k<<7&4294967295|k>>>25),k=P+(A^w&(_^A))+S[9]+2336552879&4294967295,P=w+(k<<12&4294967295|k>>>20),k=A+(_^P&(w^_))+S[10]+4294925233&4294967295,A=P+(k<<17&4294967295|k>>>15),k=_+(w^A&(P^w))+S[11]+2304563134&4294967295,_=A+(k<<22&4294967295|k>>>10),k=w+(P^_&(A^P))+S[12]+1804603682&4294967295,w=_+(k<<7&4294967295|k>>>25),k=P+(A^w&(_^A))+S[13]+4254626195&4294967295,P=w+(k<<12&4294967295|k>>>20),k=A+(_^P&(w^_))+S[14]+2792965006&4294967295,A=P+(k<<17&4294967295|k>>>15),k=_+(w^A&(P^w))+S[15]+1236535329&4294967295,_=A+(k<<22&4294967295|k>>>10),k=w+(A^P&(_^A))+S[1]+4129170786&4294967295,w=_+(k<<5&4294967295|k>>>27),k=P+(_^A&(w^_))+S[6]+3225465664&4294967295,P=w+(k<<9&4294967295|k>>>23),k=A+(w^_&(P^w))+S[11]+643717713&4294967295,A=P+(k<<14&4294967295|k>>>18),k=_+(P^w&(A^P))+S[0]+3921069994&4294967295,_=A+(k<<20&4294967295|k>>>12),k=w+(A^P&(_^A))+S[5]+3593408605&4294967295,w=_+(k<<5&4294967295|k>>>27),k=P+(_^A&(w^_))+S[10]+38016083&4294967295,P=w+(k<<9&4294967295|k>>>23),k=A+(w^_&(P^w))+S[15]+3634488961&4294967295,A=P+(k<<14&4294967295|k>>>18),k=_+(P^w&(A^P))+S[4]+3889429448&4294967295,_=A+(k<<20&4294967295|k>>>12),k=w+(A^P&(_^A))+S[9]+568446438&4294967295,w=_+(k<<5&4294967295|k>>>27),k=P+(_^A&(w^_))+S[14]+3275163606&4294967295,P=w+(k<<9&4294967295|k>>>23),k=A+(w^_&(P^w))+S[3]+4107603335&4294967295,A=P+(k<<14&4294967295|k>>>18),k=_+(P^w&(A^P))+S[8]+1163531501&4294967295,_=A+(k<<20&4294967295|k>>>12),k=w+(A^P&(_^A))+S[13]+2850285829&4294967295,w=_+(k<<5&4294967295|k>>>27),k=P+(_^A&(w^_))+S[2]+4243563512&4294967295,P=w+(k<<9&4294967295|k>>>23),k=A+(w^_&(P^w))+S[7]+1735328473&4294967295,A=P+(k<<14&4294967295|k>>>18),k=_+(P^w&(A^P))+S[12]+2368359562&4294967295,_=A+(k<<20&4294967295|k>>>12),k=w+(_^A^P)+S[5]+4294588738&4294967295,w=_+(k<<4&4294967295|k>>>28),k=P+(w^_^A)+S[8]+2272392833&4294967295,P=w+(k<<11&4294967295|k>>>21),k=A+(P^w^_)+S[11]+1839030562&4294967295,A=P+(k<<16&4294967295|k>>>16),k=_+(A^P^w)+S[14]+4259657740&4294967295,_=A+(k<<23&4294967295|k>>>9),k=w+(_^A^P)+S[1]+2763975236&4294967295,w=_+(k<<4&4294967295|k>>>28),k=P+(w^_^A)+S[4]+1272893353&4294967295,P=w+(k<<11&4294967295|k>>>21),k=A+(P^w^_)+S[7]+4139469664&4294967295,A=P+(k<<16&4294967295|k>>>16),k=_+(A^P^w)+S[10]+3200236656&4294967295,_=A+(k<<23&4294967295|k>>>9),k=w+(_^A^P)+S[13]+681279174&4294967295,w=_+(k<<4&4294967295|k>>>28),k=P+(w^_^A)+S[0]+3936430074&4294967295,P=w+(k<<11&4294967295|k>>>21),k=A+(P^w^_)+S[3]+3572445317&4294967295,A=P+(k<<16&4294967295|k>>>16),k=_+(A^P^w)+S[6]+76029189&4294967295,_=A+(k<<23&4294967295|k>>>9),k=w+(_^A^P)+S[9]+3654602809&4294967295,w=_+(k<<4&4294967295|k>>>28),k=P+(w^_^A)+S[12]+3873151461&4294967295,P=w+(k<<11&4294967295|k>>>21),k=A+(P^w^_)+S[15]+530742520&4294967295,A=P+(k<<16&4294967295|k>>>16),k=_+(A^P^w)+S[2]+3299628645&4294967295,_=A+(k<<23&4294967295|k>>>9),k=w+(A^(_|~P))+S[0]+4096336452&4294967295,w=_+(k<<6&4294967295|k>>>26),k=P+(_^(w|~A))+S[7]+1126891415&4294967295,P=w+(k<<10&4294967295|k>>>22),k=A+(w^(P|~_))+S[14]+2878612391&4294967295,A=P+(k<<15&4294967295|k>>>17),k=_+(P^(A|~w))+S[5]+4237533241&4294967295,_=A+(k<<21&4294967295|k>>>11),k=w+(A^(_|~P))+S[12]+1700485571&4294967295,w=_+(k<<6&4294967295|k>>>26),k=P+(_^(w|~A))+S[3]+2399980690&4294967295,P=w+(k<<10&4294967295|k>>>22),k=A+(w^(P|~_))+S[10]+4293915773&4294967295,A=P+(k<<15&4294967295|k>>>17),k=_+(P^(A|~w))+S[1]+2240044497&4294967295,_=A+(k<<21&4294967295|k>>>11),k=w+(A^(_|~P))+S[8]+1873313359&4294967295,w=_+(k<<6&4294967295|k>>>26),k=P+(_^(w|~A))+S[15]+4264355552&4294967295,P=w+(k<<10&4294967295|k>>>22),k=A+(w^(P|~_))+S[6]+2734768916&4294967295,A=P+(k<<15&4294967295|k>>>17),k=_+(P^(A|~w))+S[13]+1309151649&4294967295,_=A+(k<<21&4294967295|k>>>11),k=w+(A^(_|~P))+S[4]+4149444226&4294967295,w=_+(k<<6&4294967295|k>>>26),k=P+(_^(w|~A))+S[11]+3174756917&4294967295,P=w+(k<<10&4294967295|k>>>22),k=A+(w^(P|~_))+S[2]+718787259&4294967295,A=P+(k<<15&4294967295|k>>>17),k=_+(P^(A|~w))+S[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var _=w-this.blockSize,S=this.B,A=this.h,P=0;P<w;){if(A==0)for(;P<=_;)s(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(S[A++]=I.charCodeAt(P++),A==this.blockSize){s(this,S),A=0;break}}else for(;P<w;)if(S[A++]=I[P++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var _=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=_&255,_/=256;for(this.u(I),I=Array(16),w=_=0;4>w;++w)for(var S=0;32>S;S+=8)I[_++]=this.g[w]>>>S&255;return I};function i(I,w){var _=c;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=w(I)}function o(I,w){this.h=w;for(var _=[],S=!0,A=I.length-1;0<=A;A--){var P=I[A]|0;S&&P==w||(_[A]=P,S=!1)}this.g=_}var c={};function u(I){return-128<=I&&128>I?i(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return T(d(-I));for(var w=[],_=1,S=0;I>=_;S++)w[S]=I/_|0,_*=4294967296;return new o(w,0)}function m(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return T(m(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(w,8)),S=f,A=0;A<I.length;A+=8){var P=Math.min(8,I.length-A),k=parseInt(I.substring(A,A+P),w);8>P?(P=d(Math.pow(w,P)),S=S.j(P).add(d(k))):(S=S.j(_),S=S.add(d(k)))}return S}var f=u(0),g=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-T(this).m();for(var I=0,w=1,_=0;_<this.g.length;_++){var S=this.i(_);I+=(0<=S?S:4294967296+S)*w,w*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(C(this))return"-"+T(this).toString(I);for(var w=d(Math.pow(I,6)),_=this,S="";;){var A=j(_,w).g;_=x(_,A.j(w));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=A,N(_))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function C(I){return I.h==-1}t.l=function(I){return I=x(this,I),C(I)?-1:N(I)?0:1};function T(I){for(var w=I.g.length,_=[],S=0;S<w;S++)_[S]=~I.g[S];return new o(_,~I.h).add(g)}t.abs=function(){return C(this)?T(this):this},t.add=function(I){for(var w=Math.max(this.g.length,I.g.length),_=[],S=0,A=0;A<=w;A++){var P=S+(this.i(A)&65535)+(I.i(A)&65535),k=(P>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);S=k>>>16,P&=65535,k&=65535,_[A]=k<<16|P}return new o(_,_[_.length-1]&-2147483648?-1:0)};function x(I,w){return I.add(T(w))}t.j=function(I){if(N(this)||N(I))return f;if(C(this))return C(I)?T(this).j(T(I)):T(T(this).j(I));if(C(I))return T(this.j(T(I)));if(0>this.l(b)&&0>I.l(b))return d(this.m()*I.m());for(var w=this.g.length+I.g.length,_=[],S=0;S<2*w;S++)_[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<I.g.length;A++){var P=this.i(S)>>>16,k=this.i(S)&65535,K=I.i(A)>>>16,ie=I.i(A)&65535;_[2*S+2*A]+=k*ie,y(_,2*S+2*A),_[2*S+2*A+1]+=P*ie,y(_,2*S+2*A+1),_[2*S+2*A+1]+=k*K,y(_,2*S+2*A+1),_[2*S+2*A+2]+=P*K,y(_,2*S+2*A+2)}for(S=0;S<w;S++)_[S]=_[2*S+1]<<16|_[2*S];for(S=w;S<2*w;S++)_[S]=0;return new o(_,0)};function y(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function E(I,w){this.g=I,this.h=w}function j(I,w){if(N(w))throw Error("division by zero");if(N(I))return new E(f,f);if(C(I))return w=j(T(I),w),new E(T(w.g),T(w.h));if(C(w))return w=j(I,T(w)),new E(T(w.g),w.h);if(30<I.g.length){if(C(I)||C(w))throw Error("slowDivide_ only works with positive integers.");for(var _=g,S=w;0>=S.l(I);)_=L(_),S=L(S);var A=V(_,1),P=V(S,1);for(S=V(S,2),_=V(_,2);!N(S);){var k=P.add(S);0>=k.l(I)&&(A=A.add(_),P=k),S=V(S,1),_=V(_,1)}return w=x(I,A.j(w)),new E(A,w)}for(A=f;0<=I.l(w);){for(_=Math.max(1,Math.floor(I.m()/w.m())),S=Math.ceil(Math.log(_)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=d(_),k=P.j(w);C(k)||0<k.l(I);)_-=S,P=d(_),k=P.j(w);N(P)&&(P=g),A=A.add(P),I=x(I,k)}return new E(A,I)}t.A=function(I){return j(this,I).h},t.and=function(I){for(var w=Math.max(this.g.length,I.g.length),_=[],S=0;S<w;S++)_[S]=this.i(S)&I.i(S);return new o(_,this.h&I.h)},t.or=function(I){for(var w=Math.max(this.g.length,I.g.length),_=[],S=0;S<w;S++)_[S]=this.i(S)|I.i(S);return new o(_,this.h|I.h)},t.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),_=[],S=0;S<w;S++)_[S]=this.i(S)^I.i(S);return new o(_,this.h^I.h)};function L(I){for(var w=I.g.length+1,_=[],S=0;S<w;S++)_[S]=I.i(S)<<1|I.i(S-1)>>>31;return new o(_,I.h)}function V(I,w){var _=w>>5;w%=32;for(var S=I.g.length-_,A=[],P=0;P<S;P++)A[P]=0<w?I.i(P+_)>>>w|I.i(P+_+1)<<32-w:I.i(P+_);return new o(A,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Bw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Hr=o}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $w,Ca,Hw,Ml,zh,Ww,qw,Gw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof vl=="object"&&vl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var D=l[v];if(!(D in p))break e;p=p[D]}l=l[l.length-1],v=p[l],h=h(v),h!=v&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,v=!1,D={next:function(){if(!v&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function m(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),l.apply(h,D)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:f,g.apply(null,arguments)}function b(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function N(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(v,D,O){for(var $=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)$[Te-2]=arguments[Te];return h.prototype[D].apply(v,$)}}function C(l){const h=l.length;if(0<h){const p=Array(h);for(let v=0;v<h;v++)p[v]=l[v];return p}return[]}function T(l,h){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(u(v)){const D=l.length||0,O=v.length||0;l.length=D+O;for(let $=0;$<O;$++)l[D+$]=v[$]}else l.push(v)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(l){return/^[\s\xa0]*$/.test(l)}function E(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var L=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function V(l,h,p){for(const v in l)h.call(p,l[v],v,l)}function I(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function w(l){const h={};for(const p in l)h[p]=l[p];return h}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let p,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(p in v)l[p]=v[p];for(let O=0;O<_.length;O++)p=_[O],Object.prototype.hasOwnProperty.call(v,p)&&(l[p]=v[p])}}function A(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){c.setTimeout(()=>{throw l},0)}function k(){var l=Q;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class K{constructor(){this.h=this.g=null}add(h,p){const v=ie.get();v.set(h,p),this.h?this.h.next=v:this.g=v,this.h=v}}var ie=new x(()=>new ve,l=>l.reset());class ve{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,B=!1,Q=new K,J=()=>{const l=c.Promise.resolve(void 0);ue=()=>{l.then(de)}};var de=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(p){P(p)}var h=ie;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function H(l,h){if(oe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{j(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Y[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&H.aa.h.call(this)}}N(H,oe);var Y={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Ee(l,h,p,v,D){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!v,this.ha=D,this.key=++Ie,this.da=this.fa=!1}function St(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function lt(l){this.src=l,this.g={},this.h=0}lt.prototype.add=function(l,h,p,v,D){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var $=hr(l,h,v,D);return-1<$?(h=l[$],p||(h.fa=!1)):(h=new Ee(h,this.src,O,!!v,D),h.fa=p,l.push(h)),h};function Qt(l,h){var p=h.type;if(p in l.g){var v=l.g[p],D=Array.prototype.indexOf.call(v,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(v,D,1),O&&(St(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function hr(l,h,p,v){for(var D=0;D<l.length;++D){var O=l[D];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==v)return D}return-1}var Hs="closure_lm_"+(1e6*Math.random()|0),F={};function le(l,h,p,v,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)le(l,h[O],p,v,D);return null}return p=Mn(p),l&&l[xe]?l.K(h,p,d(v)?!!v.capture:!1,D):_e(l,h,p,!1,v,D)}function _e(l,h,p,v,D,O){if(!h)throw Error("Invalid event type");var $=d(D)?!!D.capture:!!D,Te=Jt(l);if(Te||(l[Hs]=Te=new lt(l)),p=Te.add(h,p,v,$,O),p.proxy)return p;if(v=De(),p.proxy=v,v.src=l,v.listener=p,l.addEventListener)$e||(D=$),D===void 0&&(D=!1),l.addEventListener(h.toString(),v,D);else if(l.attachEvent)l.attachEvent(He(h.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function De(){function l(p){return h.call(l.src,l.listener,p)}const h=Ln;return l}function nt(l,h,p,v,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)nt(l,h[O],p,v,D);else v=d(v)?!!v.capture:!!v,p=Mn(p),l&&l[xe]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=hr(O,p,v,D),-1<p&&(St(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Jt(l))&&(h=l.g[h.toString()],l=-1,h&&(l=hr(h,p,v,D)),(p=-1<l?h[l]:null)&&Ne(p))}function Ne(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[xe])Qt(h.i,l);else{var p=l.type,v=l.proxy;h.removeEventListener?h.removeEventListener(p,v,l.capture):h.detachEvent?h.detachEvent(He(p),v):h.addListener&&h.removeListener&&h.removeListener(v),(p=Jt(h))?(Qt(p,l),p.h==0&&(p.src=null,h[Hs]=null)):St(l)}}}function He(l){return l in F?F[l]:F[l]="on"+l}function Ln(l,h){if(l.da)l=!0;else{h=new H(h,this);var p=l.listener,v=l.ha||l.src;l.fa&&Ne(l),l=p.call(v,h)}return l}function Jt(l){return l=l[Hs],l instanceof lt?l:null}var Xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mn(l){return typeof l=="function"?l:(l[Xt]||(l[Xt]=function(h){return l.handleEvent(h)}),l[Xt])}function me(){se.call(this),this.i=new lt(this),this.M=this,this.F=null}N(me,se),me.prototype[xe]=!0,me.prototype.removeEventListener=function(l,h,p,v){nt(this,l,h,p,v)};function Ue(l,h){var p,v=l.F;if(v)for(p=[];v;v=v.F)p.push(v);if(l=l.M,v=h.type||h,typeof h=="string")h=new oe(h,l);else if(h instanceof oe)h.target=h.target||l;else{var D=h;h=new oe(v,l),S(h,D)}if(D=!0,p)for(var O=p.length-1;0<=O;O--){var $=h.g=p[O];D=Ut($,v,!0,h)&&D}if($=h.g=l,D=Ut($,v,!0,h)&&D,D=Ut($,v,!1,h)&&D,p)for(O=0;O<p.length;O++)$=h.g=p[O],D=Ut($,v,!1,h)&&D}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],v=0;v<p.length;v++)St(p[v]);delete l.g[h],l.h--}}this.F=null},me.prototype.K=function(l,h,p,v){return this.i.add(String(l),h,!1,p,v)},me.prototype.L=function(l,h,p,v){return this.i.add(String(l),h,!0,p,v)};function Ut(l,h,p,v){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var $=h[O];if($&&!$.da&&$.capture==p){var Te=$.listener,ct=$.ha||$.src;$.fa&&Qt(l.i,$),D=Te.call(ct,v)!==!1&&D}}return D&&!v.defaultPrevented}function un(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Fn(l){l.g=un(()=>{l.g=null,l.i&&(l.i=!1,Fn(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class ta extends se{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Fn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function na(l){se.call(this),this.h=l,this.g={}}N(na,se);var rp=[];function sp(l){V(l.g,function(h,p){this.g.hasOwnProperty(p)&&Ne(h)},l),l.g={}}na.prototype.N=function(){na.aa.N.call(this),sp(this)},na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ku=c.JSON.stringify,s1=c.JSON.parse,i1=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Cu(){}Cu.prototype.h=null;function ip(l){return l.h||(l.h=l.i())}function ap(){}var ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ju(){oe.call(this,"d")}N(ju,oe);function Au(){oe.call(this,"c")}N(Au,oe);var ls={},op=null;function zo(){return op=op||new me}ls.La="serverreachability";function lp(l){oe.call(this,ls.La,l)}N(lp,oe);function sa(l){const h=zo();Ue(h,new lp(h))}ls.STAT_EVENT="statevent";function cp(l,h){oe.call(this,ls.STAT_EVENT,l),this.stat=h}N(cp,oe);function kt(l){const h=zo();Ue(h,new cp(h,l))}ls.Ma="timingevent";function up(l,h){oe.call(this,ls.Ma,l),this.size=h}N(up,oe);function ia(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function aa(){this.g=!0}aa.prototype.xa=function(){this.g=!1};function a1(l,h,p,v,D,O){l.info(function(){if(l.g)if(O)for(var $="",Te=O.split("&"),ct=0;ct<Te.length;ct++){var ye=Te[ct].split("=");if(1<ye.length){var yt=ye[0];ye=ye[1];var xt=yt.split("_");$=2<=xt.length&&xt[1]=="type"?$+(yt+"="+ye+"&"):$+(yt+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+p+`
`+$})}function o1(l,h,p,v,D,O,$){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+p+`
`+O+" "+$})}function Ws(l,h,p,v){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+c1(l,p)+(v?" "+v:"")})}function l1(l,h){l.info(function(){return"TIMEOUT: "+h})}aa.prototype.info=function(){};function c1(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var v=p[l];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<D.length;$++)D[$]=""}}}}return ku(p)}catch{return h}}var Bo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pu;function $o(){}N($o,Cu),$o.prototype.g=function(){return new XMLHttpRequest},$o.prototype.i=function(){return{}},Pu=new $o;function fr(l,h,p,v){this.j=l,this.i=h,this.l=p,this.R=v||1,this.U=new na(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hp}function hp(){this.i=null,this.g="",this.h=!1}var fp={},Ru={};function Du(l,h,p){l.L=1,l.v=Go(Un(h)),l.m=p,l.P=!0,mp(l,null)}function mp(l,h){l.F=Date.now(),Ho(l),l.A=Un(l.v);var p=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),kp(p.i,"t",v),l.C=0,p=l.j.J,l.h=new hp,l.g=qp(l.j,p?h:null,!l.m),0<l.O&&(l.M=new ta(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,v=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(rp[0]=D.toString()),D=rp);for(var O=0;O<D.length;O++){var $=le(p,D[O],v||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),sa(),a1(l.i,l.u,l.A,l.l,l.R,l.m)}fr.prototype.ca=function(l){l=l.target;const h=this.M;h&&zn(l)==3?h.j():this.Y(l)},fr.prototype.Y=function(l){try{if(l==this.g)e:{const xt=zn(this.g);var h=this.g.Ba();const Ks=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Vp(this.g)))){this.J||xt!=4||h==7||(h==8||0>=Ks?sa(3):sa(2)),Vu(this);var p=this.g.Z();this.X=p;t:if(pp(this)){var v=Vp(this.g);l="";var D=v.length,O=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cs(this),oa(this);var $="";break t}this.h.i=new c.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,l+=this.h.i.decode(v[h],{stream:!(O&&h==D-1)});v.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,o1(this.i,this.u,this.A,this.l,this.R,xt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ct=this.g;if((Te=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Te)){var ye=Te;break t}}ye=null}if(p=ye)Ws(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ou(this,p);else{this.o=!1,this.s=3,kt(12),cs(this),oa(this);break e}}if(this.P){p=!0;let dn;for(;!this.J&&this.C<$.length;)if(dn=u1(this,$),dn==Ru){xt==4&&(this.s=4,kt(14),p=!1),Ws(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==fp){this.s=4,kt(15),Ws(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else Ws(this.i,this.l,dn,null),Ou(this,dn);if(pp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||$.length!=0||this.h.h||(this.s=1,kt(16),p=!1),this.o=this.o&&p,!p)Ws(this.i,this.l,$,"[Invalid Chunked Response]"),cs(this),oa(this);else if(0<$.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Bu(yt),yt.M=!0,kt(11))}}else Ws(this.i,this.l,$,null),Ou(this,$);xt==4&&cs(this),this.o&&!this.J&&(xt==4?Bp(this.j,this):(this.o=!1,Ho(this)))}else S1(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),cs(this),oa(this)}}}catch{}finally{}};function pp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function u1(l,h){var p=l.C,v=h.indexOf(`
`,p);return v==-1?Ru:(p=Number(h.substring(p,v)),isNaN(p)?fp:(v+=1,v+p>h.length?Ru:(h=h.slice(v,v+p),l.C=v+p,h)))}fr.prototype.cancel=function(){this.J=!0,cs(this)};function Ho(l){l.S=Date.now()+l.I,gp(l,l.I)}function gp(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ia(g(l.ba,l),h)}function Vu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}fr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(l1(this.i,this.A),this.L!=2&&(sa(),kt(17)),cs(this),this.s=2,oa(this)):gp(this,this.S-l)};function oa(l){l.j.G==0||l.J||Bp(l.j,l)}function cs(l){Vu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,sp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Ou(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Lu(p.h,l))){if(!l.K&&Lu(p.h,l)&&p.G==3){try{var v=p.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Zo(p),Xo(p);else break e;zu(p),kt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=ia(g(p.Za,p),6e3));if(1>=vp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ds(p,11)}else if((l.K||p.g==l)&&Zo(p),!y(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let ye=D[h];if(p.T=ye[0],ye=ye[1],p.G==2)if(ye[0]=="c"){p.K=ye[1],p.ia=ye[2];const yt=ye[3];yt!=null&&(p.la=yt,p.j.info("VER="+p.la));const xt=ye[4];xt!=null&&(p.Aa=xt,p.j.info("SVER="+p.Aa));const Ks=ye[5];Ks!=null&&typeof Ks=="number"&&0<Ks&&(v=1.5*Ks,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const dn=l.g;if(dn){const tl=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var O=v.h;O.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Mu(O,O.h),O.h=null))}if(v.D){const $u=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;$u&&(v.ya=$u,Ce(v.I,v.D,$u))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var $=l;if(v.qa=Wp(v,v.J?v.ia:null,v.W),$.K){wp(v.h,$);var Te=$,ct=v.L;ct&&(Te.I=ct),Te.B&&(Vu(Te),Ho(Te)),v.g=$}else Up(v);0<p.i.length&&Yo(p)}else ye[0]!="stop"&&ye[0]!="close"||ds(p,7);else p.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?ds(p,7):Uu(p):ye[0]!="noop"&&p.l&&p.l.ta(ye),p.v=0)}}sa(4)}catch{}}var d1=class{constructor(l,h){this.g=l,this.map=h}};function yp(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function vp(l){return l.h?1:l.g?l.g.size:0}function Lu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Mu(l,h){l.g?l.g.add(h):l.h=h}function wp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}yp.prototype.cancel=function(){if(this.i=_p(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function _p(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return C(l.i)}function h1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,v=0;v<p;v++)h.push(l[v]);return h}h=[],p=0;for(v in l)h[p++]=l[v];return h}function f1(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const v in l)h[p++]=v;return h}}}function bp(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=f1(l),v=h1(l),D=v.length,O=0;O<D;O++)h.call(void 0,v[O],p&&p[O],l)}var Ep=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m1(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var v=l[p].indexOf("="),D=null;if(0<=v){var O=l[p].substring(0,v);D=l[p].substring(v+1)}else O=l[p];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function us(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof us){this.h=l.h,Wo(this,l.j),this.o=l.o,this.g=l.g,qo(this,l.s),this.l=l.l;var h=l.i,p=new ua;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Np(this,p),this.m=l.m}else l&&(h=String(l).match(Ep))?(this.h=!1,Wo(this,h[1]||"",!0),this.o=la(h[2]||""),this.g=la(h[3]||"",!0),qo(this,h[4]),this.l=la(h[5]||"",!0),Np(this,h[6]||"",!0),this.m=la(h[7]||"")):(this.h=!1,this.i=new ua(null,this.h))}us.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ca(h,Tp,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ca(h,Tp,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(ca(p,p.charAt(0)=="/"?y1:g1,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",ca(p,v1)),l.join("")};function Un(l){return new us(l)}function Wo(l,h,p){l.j=p?la(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function qo(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Np(l,h,p){h instanceof ua?(l.i=h,w1(l.i,l.h)):(p||(h=ca(h,x1)),l.i=new ua(h,l.h))}function Ce(l,h,p){l.i.set(h,p)}function Go(l){return Ce(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function la(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ca(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,p1),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function p1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Tp=/[#\/\?@]/g,g1=/[#\?:]/g,y1=/[#\?]/g,x1=/[#\?@]/g,v1=/#/g;function ua(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function mr(l){l.g||(l.g=new Map,l.h=0,l.i&&m1(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ua.prototype,t.add=function(l,h){mr(this),this.i=null,l=qs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Ip(l,h){mr(l),h=qs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Sp(l,h){return mr(l),h=qs(l,h),l.g.has(h)}t.forEach=function(l,h){mr(this),this.g.forEach(function(p,v){p.forEach(function(D){l.call(h,D,v,this)},this)},this)},t.na=function(){mr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let v=0;v<h.length;v++){const D=l[v];for(let O=0;O<D.length;O++)p.push(h[v])}return p},t.V=function(l){mr(this);let h=[];if(typeof l=="string")Sp(this,l)&&(h=h.concat(this.g.get(qs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return mr(this),this.i=null,l=qs(this,l),Sp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function kp(l,h,p){Ip(l,h),0<p.length&&(l.i=null,l.g.set(qs(l,h),C(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var v=h[p];const O=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var D=O;$[v]!==""&&(D+="="+encodeURIComponent(String($[v]))),l.push(D)}}return this.i=l.join("&")};function qs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function w1(l,h){h&&!l.j&&(mr(l),l.i=null,l.g.forEach(function(p,v){var D=v.toLowerCase();v!=D&&(Ip(this,v),kp(this,D,p))},l)),l.j=h}function _1(l,h){const p=new aa;if(c.Image){const v=new Image;v.onload=b(pr,p,"TestLoadImage: loaded",!0,h,v),v.onerror=b(pr,p,"TestLoadImage: error",!1,h,v),v.onabort=b(pr,p,"TestLoadImage: abort",!1,h,v),v.ontimeout=b(pr,p,"TestLoadImage: timeout",!1,h,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else h(!1)}function b1(l,h){const p=new aa,v=new AbortController,D=setTimeout(()=>{v.abort(),pr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:v.signal}).then(O=>{clearTimeout(D),O.ok?pr(p,"TestPingServer: ok",!0,h):pr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),pr(p,"TestPingServer: error",!1,h)})}function pr(l,h,p,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(p)}catch{}}function E1(){this.g=new i1}function N1(l,h,p){const v=p||"";try{bp(l,function(D,O){let $=D;d(D)&&($=ku(D)),h.push(v+O+"="+encodeURIComponent($))})}catch(D){throw h.push(v+"type="+encodeURIComponent("_badmap")),D}}function Ko(l){this.l=l.Ub||null,this.j=l.eb||!1}N(Ko,Cu),Ko.prototype.g=function(){return new Qo(this.l,this.j)},Ko.prototype.i=function(l){return function(){return l}}({});function Qo(l,h){me.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Qo,me),t=Qo.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ha(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,da(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?da(this):ha(this),this.readyState==3&&Cp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,da(this))},t.Qa=function(l){this.g&&(this.response=l,da(this))},t.ga=function(){this.g&&da(this)};function da(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ha(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function ha(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function jp(l){let h="";return V(l,function(p,v){h+=v,h+=":",h+=p,h+=`\r
`}),h}function Fu(l,h,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=jp(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ce(l,h,p))}function ze(l){me.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ze,me);var T1=/^https?$/i,I1=["POST","PUT"];t=ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pu.g(),this.v=this.o?ip(this.o):ip(Pu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){Ap(this,O);return}if(l=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)p.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())p.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),D=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(I1,h,void 0))||v||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of p)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dp(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){Ap(this,O)}};function Ap(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Pp(l),Jo(l)}function Pp(l){l.A||(l.A=!0,Ue(l,"complete"),Ue(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ue(this,"complete"),Ue(this,"abort"),Jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rp(this):this.bb())},t.bb=function(){Rp(this)};function Rp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||zn(l)!=4||l.Z()!=2)){if(l.u&&zn(l)==4)un(l.Ea,0,l);else if(Ue(l,"readystatechange"),zn(l)==4){l.h=!1;try{const $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var v;if(v=$===0){var D=String(l.D).match(Ep)[1]||null;!D&&c.self&&c.self.location&&(D=c.self.location.protocol.slice(0,-1)),v=!T1.test(D?D.toLowerCase():"")}p=v}if(p)Ue(l,"complete"),Ue(l,"success");else{l.m=6;try{var O=2<zn(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",Pp(l)}}finally{Jo(l)}}}}function Jo(l,h){if(l.g){Dp(l);const p=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Ue(l,"ready");try{p.onreadystatechange=v}catch{}}}function Dp(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function zn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),s1(h)}};function Vp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function S1(l){const h={};l=(l.g&&2<=zn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(y(l[v]))continue;var p=A(l[v]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[D]||[];h[D]=O,O.push(p)}I(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Op(l){this.Aa=0,this.i=[],this.j=new aa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fa("baseRetryDelayMs",5e3,l),this.cb=fa("retryDelaySeedMs",1e4,l),this.Wa=fa("forwardChannelMaxRetries",2,l),this.wa=fa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yp(l&&l.concurrentRequestLimit),this.Da=new E1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Op.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,v){kt(0),this.W=l,this.H=h||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=Wp(this,null,this.W),Yo(this)};function Uu(l){if(Lp(l),l.G==3){var h=l.U++,p=Un(l.I);if(Ce(p,"SID",l.K),Ce(p,"RID",h),Ce(p,"TYPE","terminate"),ma(l,p),h=new fr(l,l.j,h),h.L=2,h.v=Go(Un(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=qp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ho(h)}Hp(l)}function Xo(l){l.g&&(Bu(l),l.g.cancel(),l.g=null)}function Lp(l){Xo(l),l.u&&(c.clearTimeout(l.u),l.u=null),Zo(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Yo(l){if(!xp(l.h)&&!l.s){l.s=!0;var h=l.Ga;ue||J(),B||(ue(),B=!0),Q.add(h,l),l.B=0}}function k1(l,h){return vp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ia(g(l.Ga,l,h),$p(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new fr(this,this.j,l);let O=this.o;if(this.S&&(O?(O=w(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Fp(this,D,h),p=Un(this.I),Ce(p,"RID",l),Ce(p,"CVER",22),this.D&&Ce(p,"X-HTTP-Session-Id",this.D),ma(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(jp(O)))+"&"+h:this.m&&Fu(p,this.m,O)),Mu(this.h,D),this.Ua&&Ce(p,"TYPE","init"),this.P?(Ce(p,"$req",h),Ce(p,"SID","null"),D.T=!0,Du(D,p,null)):Du(D,p,h),this.G=2}}else this.G==3&&(l?Mp(this,l):this.i.length==0||xp(this.h)||Mp(this))};function Mp(l,h){var p;h?p=h.l:p=l.U++;const v=Un(l.I);Ce(v,"SID",l.K),Ce(v,"RID",p),Ce(v,"AID",l.T),ma(l,v),l.m&&l.o&&Fu(v,l.m,l.o),p=new fr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Fp(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Mu(l.h,p),Du(p,v,h)}function ma(l,h){l.H&&V(l.H,function(p,v){Ce(h,v,p)}),l.l&&bp({},function(p,v){Ce(h,v,p)})}function Fp(l,h,p){p=Math.min(l.i.length,p);var v=l.l?g(l.l.Na,l.l,l):null;e:{var D=l.i;let O=-1;for(;;){const $=["count="+p];O==-1?0<p?(O=D[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let Te=!0;for(let ct=0;ct<p;ct++){let ye=D[ct].g;const yt=D[ct].map;if(ye-=O,0>ye)O=Math.max(0,D[ct].g-100),Te=!1;else try{N1(yt,$,"req"+ye+"_")}catch{v&&v(yt)}}if(Te){v=$.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,v}function Up(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ue||J(),B||(ue(),B=!0),Q.add(h,l),l.v=0}}function zu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ia(g(l.Fa,l),$p(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,zp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ia(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Xo(this),zp(this))};function Bu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function zp(l){l.g=new fr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Un(l.qa);Ce(h,"RID","rpc"),Ce(h,"SID",l.K),Ce(h,"AID",l.T),Ce(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ce(h,"TO",l.ja),Ce(h,"TYPE","xmlhttp"),ma(l,h),l.m&&l.o&&Fu(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Go(Un(h)),p.m=null,p.P=!0,mp(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Xo(this),zu(this),kt(19))};function Zo(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Bp(l,h){var p=null;if(l.g==h){Zo(l),Bu(l),l.g=null;var v=2}else if(Lu(l.h,h))p=h.D,wp(l.h,h),v=1;else return;if(l.G!=0){if(h.o)if(v==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=l.B;v=zo(),Ue(v,new up(v,p)),Yo(l)}else Up(l);else if(D=h.s,D==3||D==0&&0<h.X||!(v==1&&k1(l,h)||v==2&&zu(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),D){case 1:ds(l,5);break;case 4:ds(l,10);break;case 3:ds(l,6);break;default:ds(l,2)}}}function $p(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function ds(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),v=l.Xa;const D=!v;v=new us(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Wo(v,"https"),Go(v),D?_1(v.toString(),p):b1(v.toString(),p)}else kt(2);l.G=0,l.l&&l.l.sa(h),Hp(l),Lp(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Hp(l){if(l.G=0,l.ka=[],l.l){const h=_p(l.h);(h.length!=0||l.i.length!=0)&&(T(l.ka,h),T(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function Wp(l,h,p){var v=p instanceof us?Un(p):new us(p);if(v.g!="")h&&(v.g=h+"."+v.g),qo(v,v.s);else{var D=c.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new us(null);v&&Wo(O,v),h&&(O.g=h),D&&qo(O,D),p&&(O.l=p),v=O}return p=l.D,h=l.ya,p&&h&&Ce(v,p,h),Ce(v,"VER",l.la),ma(l,v),v}function qp(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new ze(new Ko({eb:p})):new ze(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gp(){}t=Gp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function el(){}el.prototype.g=function(l,h){return new zt(l,h)};function zt(l,h){me.call(this),this.g=new Op(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!y(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Gs(this)}N(zt,me),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Uu(this.g)},zt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=ku(l),l=p);h.i.push(new d1(h.Ya++,l)),h.G==3&&Yo(h)},zt.prototype.N=function(){this.g.l=null,delete this.j,Uu(this.g),delete this.g,zt.aa.N.call(this)};function Kp(l){ju.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}N(Kp,ju);function Qp(){Au.call(this),this.status=1}N(Qp,Au);function Gs(l){this.g=l}N(Gs,Gp),Gs.prototype.ua=function(){Ue(this.g,"a")},Gs.prototype.ta=function(l){Ue(this.g,new Kp(l))},Gs.prototype.sa=function(l){Ue(this.g,new Qp)},Gs.prototype.ra=function(){Ue(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Gw=function(){return new el},qw=function(){return zo()},Ww=ls,zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,Ml=Bo,dp.COMPLETE="complete",Hw=dp,ap.EventType=ra,ra.OPEN="a",ra.CLOSE="b",ra.ERROR="c",ra.MESSAGE="d",me.prototype.listen=me.prototype.K,Ca=ap,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,$w=ze}).apply(typeof vl<"u"?vl:typeof self<"u"?self:typeof window<"u"?window:{});const ky="@firebase/firestore",Cy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ki="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new dm("@firebase/firestore");function Ys(){return Vs.logLevel}function W(t,...e){if(Vs.logLevel<=he.DEBUG){const n=e.map(mm);Vs.debug(`Firestore (${Ki}): ${t}`,...n)}}function ar(t,...e){if(Vs.logLevel<=he.ERROR){const n=e.map(mm);Vs.error(`Firestore (${Ki}): ${t}`,...n)}}function Jr(t,...e){if(Vs.logLevel<=he.WARN){const n=e.map(mm);Vs.warn(`Firestore (${Ki}): ${t}`,...n)}}function mm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Kw(t,r,n)}function Kw(t,e,n){let r=`FIRESTORE (${Ki}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ar(r),new Error(r)}function we(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Kw(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class sS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class iS{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new Qw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class aS{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new aS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=cS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Bh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ae(r,s);{const i=Jw(),o=uS(i.encode(Ay(t,n)),i.encode(Ay(e,n)));return o!==0?o:ae(r,s)}}n+=r>65535?2:1}return ae(t.length,e.length)}function Ay(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function uS(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ae(t[n],e[n]);return ae(t.length,e.length)}function Di(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__name__";class Nn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Nn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=Nn.isNumericId(e),s=Nn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Nn.extractNumericId(e).compare(Nn.extractNumericId(n)):Bh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class Ae extends Nn{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const dS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Nn{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return dS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Py}static keyField(){return new ft([Py])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new G(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ae.fromString(e))}static fromName(e){return new X(Ae.fromString(e).popFirst(5))}static empty(){return new X(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t,e,n){if(!n)throw new G(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hS(t,e,n,r){if(e===!0&&r===!0)throw new G(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ry(t){if(!X.isDocumentKey(t))throw new G(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dy(t){if(X.isDocumentKey(t))throw new G(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function Yn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gm(t);throw new G(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ao(t,e){if(!Yw(t))throw new G(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=-62135596800,Oy=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Oy);return new Pe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Vy)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Oy}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ao(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Qe("string",Pe._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Pe(0,0))}static max(){return new ne(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=-1;function fS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new Xr(s,X.empty(),e)}function mS(t){return new Xr(t.readTime,t.key,po)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(ne.min(),X.empty(),po)}static max(){return new Xr(ne.max(),X.empty(),po)}}function pS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==gS)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++c,c===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function xS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ji(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}cu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=-1;function uu(t){return t==null}function Nc(t){return t===0&&1/t==-1/0}function vS(t){return typeof t=="number"&&Number.isInteger(t)&&!Nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="";function wS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ly(e)),e=_S(t.get(n),e);return Ly(e)}function _S(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Zw:n+="";break;default:n+=i}}return n}function Ly(t){return t+Zw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function as(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??dt.RED,this.left=s??dt.EMPTY,this.right=i??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new dt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new tt(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Di(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new t_("Invalid base64 string: "+i):i}}(e);return new gt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const bS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(we(!!t,39018),typeof t=="string"){let e=0;const n=bS.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="server_timestamp",r_="__type__",s_="__previous_value__",i_="__local_write_time__";function xm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[r_])===null||n===void 0?void 0:n.stringValue)===n_}function du(t){const e=t.mapValue.fields[s_];return xm(e)?du(e):e}function go(t){const e=Yr(t.mapValue.fields[i_].timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r,s,i,o,c,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const Tc="(default)";class yo{constructor(e,n){this.projectId=e,this.database=n||Tc}static empty(){return new yo("","")}get isDefaultDatabase(){return this.database===Tc}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="__type__",NS="__max__",_l={mapValue:{}},o_="__vector__",Ic="value";function es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xm(t)?4:IS(t)?9007199254740991:TS(t)?10:11:ee(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=es(t);if(n!==es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return go(t).isEqual(go(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yr(s.timestampValue),c=Yr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zr(s.bytesValue).isEqual(Zr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return We(s.geoPointValue.latitude)===We(i.geoPointValue.latitude)&&We(s.geoPointValue.longitude)===We(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return We(s.integerValue)===We(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=We(s.doubleValue),c=We(i.doubleValue);return o===c?Nc(o)===Nc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Di(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(My(o)!==My(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Dn(o[u],c[u])))return!1;return!0}(t,e);default:return ee(52216,{left:t})}}function xo(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Vi(t,e){if(t===e)return 0;const n=es(t),r=es(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=We(i.integerValue||i.doubleValue),u=We(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Uy(t.timestampValue,e.timestampValue);case 4:return Uy(go(t),go(e));case 5:return Bh(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Zr(i),u=Zr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=ae(c[d],u[d]);if(m!==0)return m}return ae(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=ae(We(i.latitude),We(o.latitude));return c!==0?c:ae(We(i.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,m;const f=i.fields||{},g=o.fields||{},b=(c=f[Ic])===null||c===void 0?void 0:c.arrayValue,N=(u=g[Ic])===null||u===void 0?void 0:u.arrayValue,C=ae(((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0,((m=N==null?void 0:N.values)===null||m===void 0?void 0:m.length)||0);return C!==0?C:zy(b,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===_l.mapValue&&o===_l.mapValue)return 0;if(i===_l.mapValue)return 1;if(o===_l.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let f=0;f<u.length&&f<m.length;++f){const g=Bh(u[f],m[f]);if(g!==0)return g;const b=Vi(c[u[f]],d[m[f]]);if(b!==0)return b}return ae(u.length,m.length)}(t.mapValue,e.mapValue);default:throw ee(23264,{le:n})}}function Uy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Yr(t),r=Yr(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function zy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Vi(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function Oi(t){return $h(t)}function $h(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=$h(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${$h(n.fields[o])}`;return s+"}"}(t.mapValue):ee(61005,{value:t})}function Fl(t){switch(es(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=du(t);return e?16+Fl(e):16;case 5:return 2*t.stringValue.length;case 6:return Zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Fl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return as(r.fields,(i,o)=>{s+=i.length+Fl(o)}),s}(t.mapValue);default:throw ee(13486,{value:t})}}function Hh(t){return!!t&&"integerValue"in t}function vm(t){return!!t&&"arrayValue"in t}function By(t){return!!t&&"nullValue"in t}function $y(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ul(t){return!!t&&"mapValue"in t}function TS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[a_])===null||n===void 0?void 0:n.stringValue)===o_}function $a(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return as(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$a(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$a(t.arrayValue.values[n]);return e}return Object.assign({},t)}function IS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ul(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$a(n)}setAll(e){let n=ft.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=$a(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ul(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ul(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){as(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vt($a(this.value))}}function l_(t){const e=[];return as(t.fields,(n,r)=>{const s=new ft([n]);if(Ul(r)){const i=l_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Nt(e,0,ne.min(),ne.min(),ne.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new Nt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new Nt(e,2,n,ne.min(),ne.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,ne.min(),ne.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this.position=e,this.inclusive=n}}function Hy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Vi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n="asc"){this.field=e,this.dir=n}}function SS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{}class Ye extends c_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CS(e,n,r):n==="array-contains"?new PS(e,r):n==="in"?new RS(e,r):n==="not-in"?new DS(e,r):n==="array-contains-any"?new VS(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jS(e,r):new AS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vi(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(Vi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends c_{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Vn(e,n)}matches(e){return u_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function u_(t){return t.op==="and"}function d_(t){return kS(t)&&u_(t)}function kS(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Wh(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+Oi(t.value);if(d_(t))return t.filters.map(e=>Wh(e)).join(",");{const e=t.filters.map(n=>Wh(n)).join(",");return`${t.op}(${e})`}}function h_(t,e){return t instanceof Ye?function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&Dn(r.value,s.value)}(t,e):t instanceof Vn?function(r,s){return s instanceof Vn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&h_(o,s.filters[c]),!0):!1}(t,e):void ee(19439)}function f_(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Oi(n.value)}`}(t):t instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(f_).join(" ,")+"}"}(t):"Filter"}class CS extends Ye{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class jS extends Ye{constructor(e,n){super(e,"in",n),this.keys=m_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AS extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=m_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function m_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class PS extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vm(n)&&xo(n.arrayValue,this.value)}}class RS extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xo(this.value.arrayValue,n)}}class DS extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xo(this.value.arrayValue,n)}}class VS extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Pe=null}}function qy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new OS(t,e,n,r,s,i,o)}function wm(t){const e=re(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oi(r)).join(",")),e.Pe=n}return e.Pe}function _m(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wy(t.startAt,e.startAt)&&Wy(t.endAt,e.endAt)}function qh(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function LS(t,e,n,r,s,i,o,c){return new hu(t,e,n,r,s,i,o,c)}function bm(t){return new hu(t)}function Gy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function MS(t){return t.collectionGroup!==null}function Ha(t){const e=re(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(ft.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new kc(i,r))}),n.has(ft.keyField().canonicalString())||e.Te.push(new kc(ft.keyField(),r))}return e.Te}function Cn(t){const e=re(t);return e.Ie||(e.Ie=FS(e,Ha(t))),e.Ie}function FS(t,e){if(t.limitType==="F")return qy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new kc(s.field,i)});const n=t.endAt?new Sc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sc(t.startAt.position,t.startAt.inclusive):null;return qy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gh(t,e,n){return new hu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fu(t,e){return _m(Cn(t),Cn(e))&&t.limitType===e.limitType}function p_(t){return`${wm(Cn(t))}|lt:${t.limitType}`}function Zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>f_(s)).join(", ")}]`),uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Oi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Oi(s)).join(",")),`Target(${r})`}(Cn(t))}; limitType=${t.limitType})`}function mu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ha(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Hy(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Ha(r),s)||r.endAt&&!function(o,c,u){const d=Hy(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Ha(r),s))}(t,e)}function US(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g_(t){return(e,n)=>{let r=!1;for(const s of Ha(t)){const i=zS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zS(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Vi(u,d):ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return e_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Fe(X.comparator);function or(){return BS}const y_=new Fe(X.comparator);function ja(...t){let e=y_;for(const n of t)e=e.insert(n.key,n);return e}function x_(t){let e=y_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ws(){return Wa()}function v_(){return Wa()}function Wa(){return new Bs(t=>t.toString(),(t,e)=>t.isEqual(e))}const $S=new Fe(X.comparator),HS=new tt(X.comparator);function fe(...t){let e=HS;for(const n of t)e=e.add(n);return e}const WS=new tt(ae);function qS(){return WS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function w_(t){return{integerValue:""+t}}function GS(t,e){return vS(e)?w_(e):Em(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this._=void 0}}function KS(t,e,n){return t instanceof Cc?function(s,i){const o={fields:{[r_]:{stringValue:n_},[i_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xm(i)&&(i=du(i)),i&&(o.fields[s_]=i),{mapValue:o}}(n,e):t instanceof vo?b_(t,e):t instanceof wo?E_(t,e):function(s,i){const o=__(s,i),c=Ky(o)+Ky(s.Ee);return Hh(o)&&Hh(s.Ee)?w_(c):Em(s.serializer,c)}(t,e)}function QS(t,e,n){return t instanceof vo?b_(t,e):t instanceof wo?E_(t,e):n}function __(t,e){return t instanceof jc?function(r){return Hh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Cc extends pu{}class vo extends pu{constructor(e){super(),this.elements=e}}function b_(t,e){const n=N_(e);for(const r of t.elements)n.some(s=>Dn(s,r))||n.push(r);return{arrayValue:{values:n}}}class wo extends pu{constructor(e){super(),this.elements=e}}function E_(t,e){let n=N_(e);for(const r of t.elements)n=n.filter(s=>!Dn(s,r));return{arrayValue:{values:n}}}class jc extends pu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ky(t){return We(t.integerValue||t.doubleValue)}function N_(t){return vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vo&&s instanceof vo||r instanceof wo&&s instanceof wo?Di(r.elements,s.elements,Dn):r instanceof jc&&s instanceof jc?Dn(r.Ee,s.Ee):r instanceof Cc&&s instanceof Cc}(t.transform,e.transform)}class XS{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gu{}function T_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nm(t.key,on.none()):new Po(t.key,t.data,on.none());{const n=t.data,r=Vt.empty();let s=new tt(ft.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new os(t.key,r,new Ht(s.toArray()),on.none())}}function YS(t,e,n){t instanceof Po?function(s,i,o){const c=s.value.clone(),u=Jy(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof os?function(s,i,o){if(!zl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Jy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(I_(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qa(t,e,n,r){return t instanceof Po?function(i,o,c,u){if(!zl(i.precondition,o))return c;const d=i.value.clone(),m=Xy(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(i,o,c,u){if(!zl(i.precondition,o))return c;const d=Xy(i.fieldTransforms,u,o),m=o.data;return m.setAll(I_(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,c){return zl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function ZS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=__(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function Qy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Di(r,s,(i,o)=>JS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Po extends gu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends gu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function I_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Jy(t,e,n){const r=new Map;we(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,QS(o,c,n[s]))}return r}function Xy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,KS(i,o,e))}return r}class Nm extends gu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ek extends gu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&YS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=v_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=T_(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Di(this.mutations,e.mutations,(n,r)=>Qy(n,r))&&Di(this.baseMutations,e.baseMutations,(n,r)=>Qy(n,r))}}class Tm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return $S}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Tm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,pe;function sk(t){switch(t){case U.OK:return ee(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function S_(t){if(t===void 0)return ar("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ge.OK:return U.OK;case Ge.CANCELLED:return U.CANCELLED;case Ge.UNKNOWN:return U.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return U.INTERNAL;case Ge.UNAVAILABLE:return U.UNAVAILABLE;case Ge.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ge.NOT_FOUND:return U.NOT_FOUND;case Ge.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ge.ABORTED:return U.ABORTED;case Ge.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ge.DATA_LOSS:return U.DATA_LOSS;default:return ee(39323,{code:t})}}(pe=Ge||(Ge={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new Hr([4294967295,4294967295],0);function Yy(t){const e=Jw().encode(t),n=new Bw;return n.update(e),new Uint8Array(n.digest())}function Zy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([s,i],0)]}class Im{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Aa(`Invalid padding: ${n}`);if(r<0)throw new Aa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Aa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Aa(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Hr.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Hr.fromNumber(r)));return s.compare(ik)===1&&(s=new Hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Yy(e),[r,s]=Zy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Im(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.fe===0)return;const n=Yy(e),[r,s]=Zy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ro.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new yu(ne.min(),s,new Fe(ae),or(),fe())}}class Ro{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ro(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class k_{constructor(e,n){this.targetId=e,this.De=n}}class C_{constructor(e,n,r=gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class e0{constructor(){this.ve=0,this.Ce=t0(),this.Fe=gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),n=fe(),r=fe();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee(38017,{changeType:i})}}),new Ro(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=t0()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class ak{constructor(e){this.We=e,this.Ge=new Map,this.ze=or(),this.je=bl(),this.Je=bl(),this.He=new Fe(ae)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(qh(i))if(r===0){const o=new X(i.path);this.Xe(n,o,Nt.newNoDocument(o,ne.min()))}else we(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const c=this._t(e),u=c?this.ut(c,e,o):1;if(u!==0){this.rt(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Zr(r).toUint8Array()}catch(u){if(u instanceof t_)return Jr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Im(o,s,i)}catch(u){return Jr(u instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const c=this.st(o);if(c){if(i.current&&qh(c.target)){const u=new X(c.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,Nt.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=fe();this.Je.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new yu(e,n,this.He,this.ze,r);return this.ze=or(),this.je=bl(),this.Je=bl(),this.He=new Fe(ae),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new e0,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new tt(ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new tt(ae),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new e0),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function bl(){return new Fe(X.comparator)}function t0(){return new Fe(X.comparator)}const ok={asc:"ASCENDING",desc:"DESCENDING"},lk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ck={and:"AND",or:"OR"};class uk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kh(t,e){return t.useProto3Json||uu(e)?e:{value:e}}function Ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dk(t,e){return Ac(t,e.toTimestamp())}function jn(t){return we(!!t,49232),ne.fromTimestamp(function(n){const r=Yr(n);return new Pe(r.seconds,r.nanos)}(t))}function Sm(t,e){return Qh(t,e).canonicalString()}function Qh(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function A_(t){const e=Ae.fromString(t);return we(O_(e),10190,{key:e.toString()}),e}function Jh(t,e){return Sm(t.databaseId,e.path)}function Td(t,e){const n=A_(e);if(n.get(1)!==t.databaseId.projectId)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(R_(n))}function P_(t,e){return Sm(t.databaseId,e)}function hk(t){const e=A_(t);return e.length===4?Ae.emptyPath():R_(e)}function Xh(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R_(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function n0(t,e,n){return{name:Jh(t,e),fields:n.value.mapValue.fields}}function fk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(we(m===void 0||typeof m=="string",58123),gt.fromBase64String(m||"")):(we(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),gt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const m=d.code===void 0?U.UNKNOWN:S_(d.code);return new G(m,d.message||"")}(o);n=new C_(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Td(t,r.document.name),i=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):ne.min(),c=new Vt({mapValue:{fields:r.document.fields}}),u=Nt.newFoundDocument(s,i,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new Bl(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Td(t,r.document),i=r.readTime?jn(r.readTime):ne.min(),o=Nt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Bl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Td(t,r.document),i=r.removedTargetIds||[];n=new Bl([],i,s,null)}else{if(!("filter"in e))return ee(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new rk(s,i),c=r.targetId;n=new k_(c,o)}}return n}function mk(t,e){let n;if(e instanceof Po)n={update:n0(t,e.key,e.value)};else if(e instanceof Nm)n={delete:Jh(t,e.key)};else if(e instanceof os)n={update:n0(t,e.key,e.data),updateMask:Ek(e.fieldMask)};else{if(!(e instanceof ek))return ee(16599,{Rt:e.type});n={verify:Jh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Cc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof jc)return{fieldPath:o.field.canonicalString(),increment:c.Ee};throw ee(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee(27497)}(t,e.precondition)),n}function pk(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?jn(s.updateTime):jn(i);return o.isEqual(ne.min())&&(o=jn(i)),new XS(o,s.transformResults||[])}(n,e))):[]}function gk(t,e){return{documents:[P_(t,e.path)]}}function yk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=P_(t,s);const i=function(d){if(d.length!==0)return V_(Vn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:ei(g.field),direction:wk(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Kh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function xk(t){let e=hk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(f){const g=D_(f);return g instanceof Vn&&d_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(N){return new kc(ti(N.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(f){let g;return g=typeof f=="object"?f.value:f,uu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){const g=!!f.before,b=f.values||[];return new Sc(b,g)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const g=!f.before,b=f.values||[];return new Sc(b,g)}(n.endAt)),LS(e,s,o,i,c,"F",u,d)}function vk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ti(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ti(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ti(n.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ti(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(ti(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(r=>D_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(n.compositeFilter.op))}(t):ee(30097,{filter:t})}function wk(t){return ok[t]}function _k(t){return lk[t]}function bk(t){return ck[t]}function ei(t){return{fieldPath:t.canonicalString()}}function ti(t){return ft.fromServerFormat(t.fieldPath)}function V_(t){return t instanceof Ye?function(n){if(n.op==="=="){if($y(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NAN"}};if(By(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($y(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NAN"}};if(By(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(n.field),op:_k(n.op),value:n.value}}}(t):t instanceof Vn?function(n){const r=n.getFilters().map(s=>V_(s));return r.length===1?r[0]:{compositeFilter:{op:bk(n.op),filters:r}}}(t):ee(54877,{filter:t})}function Ek(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function O_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),c=gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.gt=e}}function Tk(t){const e=xk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.Dn=new Sk}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Xr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Sk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new tt(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tt(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L_=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(L_,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Li(0)}static ur(){return new Li(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="LruGarbageCollector",kk=1048576;function i0([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class Ck{constructor(e){this.Tr=e,this.buffer=new tt(i0),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();i0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){W(s0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ji(n)?W(s0,"Ignoring IndexedDB error during garbage collection: ",n):await Qi(n)}await this.Rr(3e5)})}}class Ak{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(cu.ue);const r=new Ck(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(r0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r0):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,c=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Ys()<=he.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function Pk(t,e){return new Ak(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.changes=new Bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&qa(r.mutation,s,Ht.empty(),Pe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ja();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=or();const o=Wa(),c=function(){return Wa()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof os)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),qa(m.mutation,d,m.mutation.getFieldMask(),Pe.now())):o.set(d.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>{var f;return c.set(d,new Dk(m,(f=o.get(d))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Wa();let s=new Fe((o,c)=>o-c),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Ht.empty();m=c.applyToLocalView(d,m),r.set(u,m);const f=(s.get(c.batchId)||fe()).add(u);s=s.insert(c.batchId,f)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,f=v_();m.forEach(g=>{if(!i.has(g)){const b=T_(n.get(g),r.get(g));b!==null&&f.set(g,b),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):MS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(ws());let c=po,u=i;return o.next(d=>M.forEach(d,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),i.get(m)?M.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,fe())).next(m=>({batchId:c,changes:x_(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=ja();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ja();return this.indexManager.getCollectionParents(e,i).next(c=>M.forEach(c,u=>{const d=function(f,g){return new hu(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,Nt.newInvalidDocument(m)))});let c=ja();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&qa(m.mutation,d,Ht.empty(),Pe.now()),mu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:jn(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:Tk(s.bundledQuery),readTime:jn(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.overlays=new Fe(X.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ws();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=ws(),i=n.length+1,o=new X(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=ws(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=ws(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return M.resolve(c)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nk(n,r));let i=this.kr.get(n);i===void 0&&(i=fe(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.qr=new tt(rt.Qr),this.$r=new tt(rt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new rt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new X(new Ae([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new X(new Ae([])),r=new rt(n,e),s=new rt(n,e+1);let i=fe();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return X.comparator(e.key,n.key)||ae(e.Hr,n.Hr)}static Ur(e,n){return ae(e.Hr,n.Hr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new tt(rt.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tk(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Yr=this.Yr.add(new rt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?ym:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);i.push(c)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ae);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],c=>{r=r.add(c.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new rt(new X(i),0);let c=new tt(ae);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},o),M.resolve(this.ei(c))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new rt(n,0),s=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.ni=e,this.docs=function(){return new Fe(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Nt.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=or();const o=n.path,c=new X(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||pS(mS(m),r)<=0||(s.has(m.key)||mu(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zk(this)}getSize(e){return M.resolve(this.size)}}class zk extends Rk{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.persistence=e,this.ii=new Bs(n=>wm(n),_m),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new km,this.targetCount=0,this._i=Li.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Li(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n){this.ai={},this.overlays={},this.ui=new cu(0),this.ci=!1,this.ci=!0,this.li=new Mk,this.referenceDelegate=e(this),this.hi=new Bk(this),this.indexManager=new Ik,this.remoteDocumentCache=function(s){return new Uk(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Nk(n),this.Ti=new Ok(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Lk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Fk(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new $k(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class $k extends yS{constructor(e){super(),this.currentSequenceNumber=e}}class Cm{constructor(e){this.persistence=e,this.Ai=new km,this.Ri=null}static Vi(e){return new Cm(e)}get mi(){if(this.Ri)return this.Ri;throw ee(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{const s=X.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Pc{constructor(e,n){this.persistence=e,this.gi=new Bs(r=>wS(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Pk(this,n)}static Vi(e,n){return new Pc(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(c=>{c||(r++,i.removeEntry(o,ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fl(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return FT()?8:xS(It())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Hk;return this.ws(e,n,o).next(c=>{if(i.result=c,this.Rs)return this.Ss(e,n,o,c.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Ys()<=he.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(Ys()<=he.DEBUG&&W("QueryEngine","Query:",Zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ys()<=he.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):M.resolve())}ps(e,n){if(Gy(n))return M.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gh(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=fe(...i);return this.gs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ds(n,d,o,u.readTime)?this.ps(e,Gh(n,null,"F")):this.vs(e,d,n,u)}))})))}ys(e,n,r,s){return Gy(n)||s.isEqual(ne.min())?M.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?M.resolve(null):(Ys()<=he.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zs(n)),this.vs(e,o,n,fS(s,po)).next(c=>c))})}bs(e,n){let r=new tt(g_(e));return n.forEach((s,i)=>{mu(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Ys()<=he.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Zs(n)),this.gs.getDocumentsMatchingQuery(e,n,Xr.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="LocalStore",qk=3e8;class Gk{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Fe(ae),this.Ms=new Bs(i=>wm(i),_m),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Kk(t,e,n,r){return new Gk(t,e,n,r)}async function F_(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=fe();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:c}))})})}function Qk(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const f=d.batch,g=f.keys();let b=M.resolve();return g.forEach(N=>{b=b.next(()=>m.getEntry(u,N)).next(C=>{const T=d.docVersions.get(N);we(T!==null,48541),C.version.compareTo(T)<0&&(f.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),m.addEntry(C)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=fe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function U_(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Jk(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach((m,f)=>{const g=s.get(f);if(!g)return;c.push(n.hi.removeMatchingKeys(i,m.removedDocuments,f).next(()=>n.hi.addMatchingKeys(i,m.addedDocuments,f)));let b=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?b=b.withResumeToken(gt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),s=s.insert(f,b),function(C,T,x){return C.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=qk?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,b,m)&&c.push(n.hi.updateTargetData(i,b))});let u=or(),d=fe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(Xk(i,o,e.documentUpdates).next(m=>{u=m.Ls,d=m.ks})),!r.isEqual(ne.min())){const m=n.hi.getLastRemoteSnapshotVersion(i).next(f=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(m)}return M.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Fs=s,i))}function Xk(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=or();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):W(Am,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function Yk(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ym),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zk(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Yh(t,e,n){const r=re(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ji(o))throw o;W(Am,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function a0(t,e,n){const r=re(t);let s=ne.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const f=re(u),g=f.Ms.get(m);return g!==void 0?M.resolve(f.Fs.get(g)):f.hi.getTargetData(d,m)}(r,o,Cn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:fe())).next(c=>(eC(r,US(e),c),{documents:c,qs:i})))}function eC(t,e,n){let r=t.xs.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class o0{constructor(){this.activeTargetIds=qS()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tC{constructor(){this.Fo=new o0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new o0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="ConnectivityMonitor";class c0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){W(l0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){W(l0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El=null;function Zh(){return El===null?El=function(){return 268435456+Math.round(2147483648*Math.random())}():El++,"0x"+El.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="RestConnection",rC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Tc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Zh(),c=this.Go(e,n.toUriEncodedString());W(Id,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(c),m=qi(d);return this.jo(e,c,u,r,m).then(f=>(W(Id,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Jr(Id,`RPC '${e}' ${o} failed with error: `,f,"url: ",c,"request:",r),f})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ki}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=rC[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class aC extends sC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=Zh();return new Promise((c,u)=>{const d=new $w;d.setWithCredentials(!0),d.listenOnce(Hw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ml.NO_ERROR:const f=d.getResponseJson();W(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),c(f);break;case Ml.TIMEOUT:W(_t,`RPC '${e}' ${o} timed out`),u(new G(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:const g=d.getStatus();if(W(_t,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const N=b==null?void 0:b.error;if(N&&N.status&&N.message){const C=function(x){const y=x.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(N.status);u(new G(C,N.message))}else u(new G(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new G(U.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{W(_t,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);W(_t,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)})}P_(e,n,r){const s=Zh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Gw(),c=qw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");W(_t,`Creating RPC '${e}' stream ${s}: ${m}`,u);const f=o.createWebChannel(m,u);this.T_(f);let g=!1,b=!1;const N=new iC({Ho:T=>{b?W(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(g||(W(_t,`Opening RPC '${e}' stream ${s} transport.`),f.open(),g=!0),W(_t,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},Yo:()=>f.close()}),C=(T,x,y)=>{T.listen(x,E=>{try{y(E)}catch(j){setTimeout(()=>{throw j},0)}})};return C(f,Ca.EventType.OPEN,()=>{b||(W(_t,`RPC '${e}' stream ${s} transport opened.`),N.s_())}),C(f,Ca.EventType.CLOSE,()=>{b||(b=!0,W(_t,`RPC '${e}' stream ${s} transport closed`),N.__(),this.I_(f))}),C(f,Ca.EventType.ERROR,T=>{b||(b=!0,Jr(_t,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),N.__(new G(U.UNAVAILABLE,"The operation could not be completed")))}),C(f,Ca.EventType.MESSAGE,T=>{var x;if(!b){const y=T.data[0];we(!!y,16349);const E=y,j=(E==null?void 0:E.error)||((x=E[0])===null||x===void 0?void 0:x.error);if(j){W(_t,`RPC '${e}' stream ${s} received error:`,j);const L=j.status;let V=function(_){const S=Ge[_];if(S!==void 0)return S_(S)}(L),I=j.message;V===void 0&&(V=U.INTERNAL,I="Unknown error status: "+L+" with message "+j.message),b=!0,N.__(new G(V,I)),f.close()}else W(_t,`RPC '${e}' stream ${s} received:`,y),N.a_(y)}}),C(c,Ww.STAT_EVENT,T=>{T.stat===zh.PROXY?W(_t,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===zh.NOPROXY&&W(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){return new uk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="PersistentStream";class B_{constructor(e,n,r,s,i,o,c,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new z_(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new G(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return W(u0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(W(u0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oC extends B_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=fk(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?jn(o.readTime):ne.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Xh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=qh(u)?{documents:gk(i,u)}:{query:yk(i,u).Vt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=j_(i,o.resumeToken);const d=Kh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){c.readTime=Ac(i,o.snapshotVersion.toTimestamp());const d=Kh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=vk(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Xh(this.serializer),n.removeTarget=e,this.k_(n)}}class lC extends B_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=pk(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Xh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mk(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{}class uC extends cC{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Qh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(U.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Jo(e,Qh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(U.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class dC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ar(n),this._a=!1):W("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="RemoteStore";class hC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{$s(this)&&(W(Os,"Restarting streams for network reachability change."),await async function(u){const d=re(u);d.Ia.add(4),await Do(d),d.Aa.set("Unknown"),d.Ia.delete(4),await vu(d)}(this))})}),this.Aa=new dC(r,s)}}async function vu(t){if($s(t))for(const e of t.da)await e(!0)}async function Do(t){for(const e of t.da)await e(!1)}function $_(t,e){const n=re(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Vm(n)?Dm(n):Xi(n).x_()&&Rm(n,e))}function Pm(t,e){const n=re(t),r=Xi(n);n.Ta.delete(e),r.x_()&&H_(n,e),n.Ta.size===0&&(r.x_()?r.B_():$s(n)&&n.Aa.set("Unknown"))}function Rm(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xi(t).H_(e)}function H_(t,e){t.Ra.$e(e),Xi(t).Y_(e)}function Dm(t){t.Ra=new ak({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Xi(t).start(),t.Aa.aa()}function Vm(t){return $s(t)&&!Xi(t).M_()&&t.Ta.size>0}function $s(t){return re(t).Ia.size===0}function W_(t){t.Ra=void 0}async function fC(t){t.Aa.set("Online")}async function mC(t){t.Ta.forEach((e,n)=>{Rm(t,e)})}async function pC(t,e){W_(t),Vm(t)?(t.Aa.la(e),Dm(t)):t.Aa.set("Unknown")}async function gC(t,e,n){if(t.Aa.set("Online"),e instanceof C_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ta.delete(c),s.Ra.removeTarget(c))}(t,e)}catch(r){W(Os,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rc(t,r)}else if(e instanceof Bl?t.Ra.Ye(e):e instanceof k_?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ne.min()))try{const r=await U_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Ra.Pt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ta.get(d);m&&i.Ta.set(d,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const m=i.Ta.get(u);if(!m)return;i.Ta.set(u,m.withResumeToken(gt.EMPTY_BYTE_STRING,m.snapshotVersion)),H_(i,u);const f=new jr(m.target,u,d,m.sequenceNumber);Rm(i,f)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){W(Os,"Failed to raise snapshot:",r),await Rc(t,r)}}async function Rc(t,e,n){if(!Ji(e))throw e;t.Ia.add(1),await Do(t),t.Aa.set("Offline"),n||(n=()=>U_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Os,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await vu(t)})}function q_(t,e){return e().catch(n=>Rc(t,n,e))}async function wu(t){const e=re(t),n=ts(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ym;for(;yC(e);)try{const s=await Yk(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,xC(e,s)}catch(s){await Rc(e,s)}G_(e)&&K_(e)}function yC(t){return $s(t)&&t.Pa.length<10}function xC(t,e){t.Pa.push(e);const n=ts(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function G_(t){return $s(t)&&!ts(t).M_()&&t.Pa.length>0}function K_(t){ts(t).start()}async function vC(t){ts(t).na()}async function wC(t){const e=ts(t);for(const n of t.Pa)e.X_(n.mutations)}async function _C(t,e,n){const r=t.Pa.shift(),s=Tm.from(r,e,n);await q_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await wu(t)}async function bC(t,e){e&&ts(t).Z_&&await async function(r,s){if(function(o){return sk(o)&&o!==U.ABORTED}(s.code)){const i=r.Pa.shift();ts(r).N_(),await q_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await wu(r)}}(t,e),G_(t)&&K_(t)}async function d0(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),W(Os,"RemoteStore received new credentials");const r=$s(n);n.Ia.add(3),await Do(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await vu(n)}async function EC(t,e){const n=re(t);e?(n.Ia.delete(2),await vu(n)):e||(n.Ia.add(2),await Do(n),n.Aa.set("Unknown"))}function Xi(t){return t.Va||(t.Va=function(n,r,s){const i=re(n);return i.ia(),new oC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:fC.bind(null,t),e_:mC.bind(null,t),n_:pC.bind(null,t),J_:gC.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Vm(t)?Dm(t):t.Aa.set("Unknown")):(await t.Va.stop(),W_(t))})),t.Va}function ts(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.ia(),new lC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:vC.bind(null,t),n_:bC.bind(null,t),ea:wC.bind(null,t),ta:_C.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await wu(t)):(await t.ma.stop(),t.Pa.length>0&&(W(Os,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Om(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lm(t,e){if(ar("AsyncQueue",`${e}: ${t}`),Ji(t))return new G(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{static emptySet(e){return new bi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=ja(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.fa=new Fe(X.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mi{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Mi(e,n,bi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class TC{constructor(){this.queries=f0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=f0(),i.forEach((o,c)=>{for(const u of c.wa)u.onError(r)})})(this,new G(U.ABORTED,"Firestore shutting down"))}}function f0(){return new Bs(t=>p_(t),fu)}async function Q_(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new NC,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Lm(o,`Initialization of query '${Zs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Mm(n)}async function J_(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IC(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.wa)c.Ca(s)&&(r=!0);o.ya=s}}r&&Mm(n)}function SC(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Mm(t){t.Da.forEach(e=>{e.next()})}var ef,m0;(m0=ef||(ef={})).Fa="default",m0.Cache="cache";class X_{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.key=e}}class Z_{constructor(e){this.key=e}}class kC{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=g_(e),this.eu=new bi(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new h0,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,f)=>{const g=s.get(m),b=mu(this.query,f)?f:null,N=!!g&&this.mutatedKeys.has(g.key),C=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let T=!1;g&&b?g.data.isEqual(b.data)?N!==C&&(r.track({type:3,doc:b}),T=!0):this.iu(g,b)||(r.track({type:2,doc:b}),T=!0,(u&&this.Xa(b,u)>0||d&&this.Xa(b,d)<0)&&(c=!0)):!g&&b?(r.track({type:0,doc:b}),T=!0):g&&!b&&(r.track({type:1,doc:g}),T=!0,(u||d)&&(c=!0)),T&&(b?(o=o.add(b),i=C?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{eu:o,ru:r,Ds:c,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((m,f)=>function(b,N){const C=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{At:T})}};return C(b)-C(N)}(m.type,f.type)||this.Xa(m.doc,f.doc)),this.su(r),s=s!=null&&s;const c=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,o.length!==0||d?{snapshot:new Mi(this.query,e.eu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new h0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Z_(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Y_(r))}),n}uu(e){this.Ha=e.qs,this.Za=fe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Mi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Fm="SyncEngine";class CC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jC{constructor(e){this.key=e,this.lu=!1}}class AC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Bs(c=>p_(c),fu),this.Tu=new Map,this.Iu=new Set,this.du=new Fe(X.comparator),this.Eu=new Map,this.Au=new km,this.Ru={},this.Vu=new Map,this.mu=Li.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function PC(t,e,n=!0){const r=ib(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await eb(r,e,n,!0),s}async function RC(t,e){const n=ib(t);await eb(n,e,!0,!1)}async function eb(t,e,n,r){const s=await Zk(t.localStore,Cn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await DC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&$_(t.remoteStore,s),c}async function DC(t,e,n,r,s){t.gu=(f,g,b)=>async function(C,T,x,y){let E=T.view.nu(x);E.Ds&&(E=await a0(C.localStore,T.query,!1).then(({documents:I})=>T.view.nu(I,E)));const j=y&&y.targetChanges.get(T.targetId),L=y&&y.targetMismatches.get(T.targetId)!=null,V=T.view.applyChanges(E,C.isPrimaryClient,j,L);return g0(C,T.targetId,V._u),V.snapshot}(t,f,g,b);const i=await a0(t.localStore,e,!0),o=new kC(e,i.qs),c=o.nu(i.documents),u=Ro.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);g0(t,n,d._u);const m=new CC(e,n,o);return t.Pu.set(e,m),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function VC(t,e,n){const r=re(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!fu(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Pm(r.remoteStore,s.targetId),tf(r,s.targetId)}).catch(Qi)):(tf(r,s.targetId),await Yh(r.localStore,s.targetId,!0))}async function OC(t,e){const n=re(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pm(n.remoteStore,r.targetId))}async function LC(t,e,n){const r=HC(t);try{const s=await function(o,c){const u=re(o),d=Pe.now(),m=c.reduce((b,N)=>b.add(N.key),fe());let f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let N=or(),C=fe();return u.Os.getEntries(b,m).next(T=>{N=T,N.forEach((x,y)=>{y.isValidDocument()||(C=C.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,N)).next(T=>{f=T;const x=[];for(const y of c){const E=ZS(y,f.get(y.key).overlayedDocument);E!=null&&x.push(new os(y.key,E,l_(E.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,x,c)}).next(T=>{g=T;const x=T.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(b,T.batchId,x)})}).then(()=>({batchId:g.batchId,changes:x_(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ru[o.currentUser.toKey()];d||(d=new Fe(ae)),d=d.insert(c,u),o.Ru[o.currentUser.toKey()]=d}(r,s.batchId,n),await Vo(r,s.changes),await wu(r.remoteStore)}catch(s){const i=Lm(s,"Failed to persist write");n.reject(i)}}async function tb(t,e){const n=re(t);try{const r=await Jk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?we(o.lu,14607):s.removedDocuments.size>0&&(we(o.lu,42227),o.lu=!1))}),await Vo(n,r,e)}catch(r){await Qi(r)}}function p0(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=re(o);u.onlineState=c;let d=!1;u.queries.forEach((m,f)=>{for(const g of f.wa)g.va(c)&&(d=!0)}),d&&Mm(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MC(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Fe(X.comparator);o=o.insert(i,Nt.newNoDocument(i,ne.min()));const c=fe().add(i),u=new yu(ne.min(),new Map,new Fe(ae),o,c);await tb(r,u),r.du=r.du.remove(i),r.Eu.delete(e),Um(r)}else await Yh(r.localStore,e,!1).then(()=>tf(r,e,n)).catch(Qi)}async function FC(t,e){const n=re(t),r=e.batch.batchId;try{const s=await Qk(n.localStore,e);rb(n,r,null),nb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vo(n,s)}catch(s){await Qi(s)}}async function UC(t,e,n){const r=re(t);try{const s=await function(o,c){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(f=>(we(f!==null,37113),m=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);rb(r,e,n),nb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vo(r,s)}catch(s){await Qi(s)}}function nb(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function rb(t,e,n){const r=re(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function tf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||sb(t,r)})}function sb(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Pm(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Um(t))}function g0(t,e,n){for(const r of n)r instanceof Y_?(t.Au.addReference(r.key,e),zC(t,r)):r instanceof Z_?(W(Fm,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||sb(t,r.key)):ee(19791,{yu:r})}function zC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(W(Fm,"New document in limbo: "+n),t.Iu.add(r),Um(t))}function Um(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new X(Ae.fromString(e)),r=t.mu.next();t.Eu.set(r,new jC(n)),t.du=t.du.insert(n,r),$_(t.remoteStore,new jr(Cn(bm(n.path)),r,"TargetPurposeLimboResolution",cu.ue))}}async function Vo(t,e,n){const r=re(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{o.push(r.gu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=jm.Es(u.targetId,d);i.push(f)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,d){const m=re(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(d,g=>M.forEach(g.Is,b=>m.persistence.referenceDelegate.addReference(f,g.targetId,b)).next(()=>M.forEach(g.ds,b=>m.persistence.referenceDelegate.removeReference(f,g.targetId,b)))))}catch(f){if(!Ji(f))throw f;W(Am,"Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const b=m.Fs.get(g),N=b.snapshotVersion,C=b.withLastLimboFreeSnapshotVersion(N);m.Fs=m.Fs.insert(g,C)}}}(r.localStore,i))}async function BC(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){W(Fm,"User change. New user:",e.toKey());const r=await F_(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(c=>{c.forEach(u=>{u.reject(new G(U.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vo(n,r.Bs)}}function $C(t,e){const n=re(t),r=n.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let s=fe();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const c=n.Pu.get(o);s=s.unionWith(c.view.tu)}return s}}function ib(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$C.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MC.bind(null,e),e.hu.J_=IC.bind(null,e.eventManager),e.hu.pu=SC.bind(null,e.eventManager),e}function HC(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UC.bind(null,e),e}class Dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Kk(this.persistence,new Wk,e.initialUser,this.serializer)}Du(e){return new M_(Cm.Vi,this.serializer)}bu(e){return new tC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dc.provider={build:()=>new Dc};class WC extends Dc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){we(this.persistence.referenceDelegate instanceof Pc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jk(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new M_(r=>Pc.Vi(r,n),this.serializer)}}class nf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BC.bind(null,this.syncEngine),await EC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TC}()}createDatastore(e){const n=xu(e.databaseInfo.databaseId),r=function(i){return new aC(i)}(e.databaseInfo);return function(i,o,c,u){return new uC(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new hC(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>p0(this.syncEngine,n,0),function(){return c0.C()?new c0:new nC}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,m){const f=new AC(s,i,o,c,u,d);return m&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);W(Os,"RemoteStore shutting down."),i.Ia.add(5),await Do(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nf.provider={build:()=>new nf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class qC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=pm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(ns,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(ns,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Lm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kd(t,e){t.asyncQueue.verifyOperationInProgress(),W(ns,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await F_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Jr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{W("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Jr("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function y0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GC(t);W(ns,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>d0(e.remoteStore,s)),t._onlineComponents=e}async function GC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(ns,"Using user provided OfflineComponentProvider");try{await kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Jr("Error using user provided cache. Falling back to memory cache: "+n),await kd(t,new Dc)}}else W(ns,"Using default OfflineComponentProvider"),await kd(t,new WC(void 0));return t._offlineComponents}async function ob(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(ns,"Using user provided OnlineComponentProvider"),await y0(t,t._uninitializedComponentsProvider._online)):(W(ns,"Using default OnlineComponentProvider"),await y0(t,new nf))),t._onlineComponents}function KC(t){return ob(t).then(e=>e.syncEngine)}async function rf(t){const e=await ob(t),n=e.eventManager;return n.onListen=PC.bind(null,e.syncEngine),n.onUnlisten=VC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OC.bind(null,e.syncEngine),n}function QC(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new ab({next:g=>{m.Ou(),o.enqueueAndForget(()=>J_(i,f)),g.fromCache&&u.source==="server"?d.reject(new G(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new X_(c,m,{includeMetadataChanges:!0,ka:!0});return Q_(i,f)}(await rf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="firestore.googleapis.com",v0=!0;class w0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cb,this.ssl=v0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:v0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=L_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kk)throw new G(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _u{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rS;switch(r.type){case"firstParty":return new oS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=x0.get(n);r&&(W("ComponentProvider","Removing Datastore"),x0.delete(n),r.terminate())}(this),Promise.resolve()}}function JC(t,e,n,r={}){var s;t=Yn(t,_u);const i=qi(e),o=t._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(Dw(`https://${u}`),Vw("Firestore",!0)),o.host!==cb&&o.host!==u&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Rs(d,c)&&(t._setSettings(d),r.mockUserToken)){let m,f;if(typeof r.mockUserToken=="string")m=r.mockUserToken,f=bt.MOCK_USER;else{m=jT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new bt(g)}t._authCredentials=new sS(new Qw(m,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oo(this.firestore,e,this._query)}}class et{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ao(n,et._jsonSchema))return new et(e,r||null,new X(Ae.fromString(n.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Qe("string",et._jsonSchemaVersion),referencePath:Qe("string")};class qr extends Oo{constructor(e,n,r){super(e,n,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new X(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function yr(t,e,...n){if(t=ot(t),Xw("collection","path",e),t instanceof _u){const r=Ae.fromString(e,...n);return Dy(r),new qr(t,null,r)}{if(!(t instanceof et||t instanceof qr))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Dy(r),new qr(t.firestore,null,r)}}function Nl(t,e,...n){if(t=ot(t),arguments.length===1&&(e=pm.newId()),Xw("doc","path",e),t instanceof _u){const r=Ae.fromString(e,...n);return Ry(r),new et(t,null,new X(r))}{if(!(t instanceof et||t instanceof qr))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Ry(r),new et(t.firestore,t instanceof qr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="AsyncQueue";class b0{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new z_(this,"async_queue_retry"),this.oc=()=>{const r=Sd();r&&W(_0,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Sd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Wr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ji(e))throw e;W(_0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ar("INTERNAL UNHANDLED ERROR: ",E0(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Om.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&ee(47125,{hc:E0(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function E0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Fi extends _u{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new b0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b0(e),this._firestoreClient=void 0,await e}}}function XC(t,e){const n=typeof t=="object"?t:Fw(),r=typeof t=="string"?t:Tc,s=fm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=kT("firestore");i&&JC(s,...i)}return s}function bu(t){if(t._terminated)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YC(t),t._firestoreClient}function YC(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,m){return new ES(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,lb(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new qC(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(gt.fromBase64String(e))}catch(n){throw new G(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ao(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:Qe("string",rn._jsonSchemaVersion),bytes:Qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(e){if(Ao(e,An._jsonSchema))return new An(e.latitude,e.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:Qe("string",An._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ao(e,Pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pn(e.vectorValues);throw new G(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:Qe("string",Pn._jsonSchemaVersion),vectorValues:Qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=/^__.*__$/;class ej{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new Po(e,this.data,n,this.fieldTransforms)}}class ub{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function db(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ec:t})}}class Bm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(db(this.Ec)&&ZC.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class tj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xu(e)}Dc(e,n,r,s=!1){return new Bm({Ec:e,methodName:n,bc:r,path:ft.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hb(t){const e=t._freezeSettings(),n=xu(t._databaseId);return new tj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nj(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);$m("Data must be an object, but it was:",o,r);const c=pb(r,o);let u,d;if(i.merge)u=new Ht(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const f of i.mergeFields){const g=sf(e,f,n);if(!o.contains(g))throw new G(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);yb(m,g)||m.push(g)}u=new Ht(m),d=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=o.fieldTransforms;return new ej(new Vt(c),u,d)}class Eu extends zm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eu}}function fb(t,e,n,r){const s=t.Dc(1,e,n);$m("Data must be an object, but it was:",s,r);const i=[],o=Vt.empty();as(r,(u,d)=>{const m=Hm(e,u,n);d=ot(d);const f=s.gc(m);if(d instanceof Eu)i.push(m);else{const g=Nu(d,f);g!=null&&(i.push(m),o.set(m,g))}});const c=new Ht(i);return new ub(o,c,s.fieldTransforms)}function mb(t,e,n,r,s,i){const o=t.Dc(1,e,n),c=[sf(e,r,n)],u=[s];if(i.length%2!=0)throw new G(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(sf(e,i[g])),u.push(i[g+1]);const d=[],m=Vt.empty();for(let g=c.length-1;g>=0;--g)if(!yb(d,c[g])){const b=c[g];let N=u[g];N=ot(N);const C=o.gc(b);if(N instanceof Eu)d.push(b);else{const T=Nu(N,C);T!=null&&(d.push(b),m.set(b,T))}}const f=new Ht(d);return new ub(m,f,o.fieldTransforms)}function Nu(t,e){if(gb(t=ot(t)))return $m("Unsupported field value:",e,t),pb(t,e);if(t instanceof zm)return function(r,s){if(!db(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=Nu(c,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Pe.fromDate(r);return{timestampValue:Ac(s.serializer,i)}}if(r instanceof Pe){const i=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ac(s.serializer,i)}}if(r instanceof An)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rn)return{bytesValue:j_(s.serializer,r._byteString)};if(r instanceof et){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pn)return function(o,c){return{mapValue:{fields:{[a_]:{stringValue:o_},[Ic]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return Em(c.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${gm(r)}`)}(t,e)}function pb(t,e){const n={};return e_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(t,(r,s)=>{const i=Nu(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function gb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof An||t instanceof rn||t instanceof et||t instanceof zm||t instanceof Pn)}function $m(t,e,n){if(!gb(n)||!Yw(n)){const r=gm(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function sf(t,e,n){if((e=ot(e))instanceof Lo)return e._internalPath;if(typeof e=="string")return Hm(t,e);throw Vc("Field path arguments must be of type string or ",t,!1,void 0,n)}const rj=new RegExp("[~\\*/\\[\\]]");function Hm(t,e,n){if(e.search(rj)>=0)throw Vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lo(...e.split("."))._internalPath}catch{throw Vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(U.INVALID_ARGUMENT,c+t+u)}function yb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sj extends xb{data(){return super.data()}}function vb(t,e){return typeof e=="string"?Hm(t,e):e instanceof Lo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ij{convertValue(e,n="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return as(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Ic].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>We(o.doubleValue));return new Pn(i)}convertGeoPoint(e){return new An(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=du(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(go(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);we(O_(r),9688,{name:e});const s=new yo(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||ar(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ns extends xb{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $l(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ns._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ns._jsonSchema={type:Qe("string",Ns._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class $l extends Ns{data(e={}){return super.data(e)}}class Ts{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Pa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $l(this._firestore,this._userDataWriter,r.key,r,new Pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new $l(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Pa(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new $l(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Pa(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:oj(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ts._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}Ts._jsonSchemaVersion="firestore/querySnapshot/1.0",Ts._jsonSchema={type:Qe("string",Ts._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class Wm extends ij{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,n)}}function Js(t){t=Yn(t,Oo);const e=Yn(t.firestore,Fi),n=bu(e),r=new Wm(e);return wb(t._query),QC(n,t._query).then(s=>new Ts(e,r,t,s))}function Cd(t,e,n,...r){t=Yn(t,et);const s=Yn(t.firestore,Fi),i=hb(s);let o;return o=typeof(e=ot(e))=="string"||e instanceof Lo?mb(i,"updateDoc",t._key,e,n,r):fb(i,"updateDoc",t._key,e),_b(s,[o.toMutation(t._key,on.exists(!0))])}function lj(t,...e){var n,r,s;t=ot(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||N0(e[o])||(i=e[o++]);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(N0(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let u,d,m;if(t instanceof et)d=Yn(t.firestore,Fi),m=bm(t._key.path),u={next:f=>{e[o]&&e[o](cj(d,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Yn(t,Oo);d=Yn(f.firestore,Fi),m=f._query;const g=new Wm(d);u={next:b=>{e[o]&&e[o](new Ts(d,g,f,b))},error:e[o+1],complete:e[o+2]},wb(t._query)}return function(g,b,N,C){const T=new ab(C),x=new X_(b,T,N);return g.asyncQueue.enqueueAndForget(async()=>Q_(await rf(g),x)),()=>{T.Ou(),g.asyncQueue.enqueueAndForget(async()=>J_(await rf(g),x))}}(bu(d),m,c,u)}function _b(t,e){return function(r,s){const i=new Wr;return r.asyncQueue.enqueueAndForget(async()=>LC(await KC(r),s,i)),i.promise}(bu(t),e)}function cj(t,e,n){const r=n.docs.get(e._key),s=new Wm(t);return new Ns(t,s,e._key,r,new Pa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=hb(e)}set(e,n,r){this._verifyNotCommitted();const s=jd(e,this._firestore),i=aj(s.converter,n,r),o=nj(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,on.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=jd(e,this._firestore);let o;return o=typeof(n=ot(n))=="string"||n instanceof Lo?mb(this._dataReader,"WriteBatch.update",i._key,n,r,s):fb(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=jd(e,this._firestore);return this._mutations=this._mutations.concat(new Nm(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jd(t,e){if((t=ot(t)).firestore!==e)throw new G(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t){return bu(t=Yn(t,Fi)),new uj(t,e=>_b(t,e))}(function(e,n=!0){(function(s){Ki=s})(Gi),Ri(new Ds("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Fi(new iS(r.getProvider("auth-internal")),new lS(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(d.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),$r(ky,Cy,e),$r(ky,Cy,"esm2017")})();function qm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hj=bb,Eb=new Co("auth","Firebase",bb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new dm("@firebase/auth");function fj(t,...e){Oc.logLevel<=he.WARN&&Oc.warn(`Auth (${Gi}): ${t}`,...e)}function Hl(t,...e){Oc.logLevel<=he.ERROR&&Oc.error(`Auth (${Gi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw Km(t,...e)}function wn(t,...e){return Km(t,...e)}function Gm(t,e,n){const r=Object.assign(Object.assign({},hj()),{[e]:n});return new Co("auth","Firebase",r).create(e,{appName:t.name})}function Gr(t){return Gm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&On(t,"argument-error"),Gm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Km(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Eb.create(t,...e)}function te(t,e,...n){if(!t)throw Km(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hl(e),new Error(e)}function lr(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mj(){return T0()==="http:"||T0()==="https:"}function T0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mj()||OT()||"connection"in navigator)?navigator.onLine:!0}function gj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.shortDelay=e,this.longDelay=n,lr(n>e,"Short delay should be less than long delay!"),this.isMobile=RT()||LT()}get(){return pj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t,e){lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vj=new Mo(3e4,6e4);function Jm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yi(t,e,n,r,s={}){return Ib(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=jo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return VT()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&qi(t.emulatorConfig.host)&&(d.credentials="include"),Tb.fetch()(await Sb(t,t.config.apiHost,n,c),d)})}async function Ib(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},yj),e);try{const s=new _j(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Tl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Tl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Tl(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Gm(t,m,d);On(t,m)}}catch(s){if(s instanceof dr)throw s;On(t,"network-request-failed",{message:String(s)})}}async function wj(t,e,n,r,s={}){const i=await Yi(t,e,n,r,s);return"mfaPendingCredential"in i&&On(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Sb(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Qm(t.config,s):`${t.config.apiScheme}://${s}`;return xj.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class _j{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),vj.get())})}}function Tl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e){return Yi(t,"POST","/v1/accounts:delete",e)}async function Lc(t,e){return Yi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ej(t,e=!1){const n=ot(t),r=await n.getIdToken(e),s=Xm(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ga(Ad(s.auth_time)),issuedAtTime:Ga(Ad(s.iat)),expirationTime:Ga(Ad(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ad(t){return Number(t)*1e3}function Xm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hl("JWT malformed, contained fewer than 3 sections"),null;try{const s=jw(n);return s?JSON.parse(s):(Hl("Failed to decode base64 JWT payload"),null)}catch(s){return Hl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function I0(t){const e=Xm(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&Nj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Nj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await _o(t,Lc(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?kb(i.providerUserInfo):[],c=Sj(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),m=u?d:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new of(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,f)}async function Ij(t){const e=ot(t);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function kb(t){return t.map(e=>{var{providerId:n}=e,r=qm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e){const n=await Ib(t,{},async()=>{const r=jo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Sb(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&qi(t.emulatorConfig.host)&&(u.credentials="include"),Tb.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Cj(t,e){return Yi(t,"POST","/v2/accounts:revokeToken",Jm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=I0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await kj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ei;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=qm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new of(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _o(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ej(this,e)}reload(){return Ij(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(Gr(this.auth));const e=await this.getIdToken();return await _o(this,bj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,m;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,b=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(c=n.tenantId)!==null&&c!==void 0?c:void 0,T=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:E,emailVerified:j,isAnonymous:L,providerData:V,stsTokenManager:I}=n;te(E&&I,e,"internal-error");const w=Ei.fromJSON(this.name,I);te(typeof E=="string",e,"internal-error"),xr(f,e.name),xr(g,e.name),te(typeof j=="boolean",e,"internal-error"),te(typeof L=="boolean",e,"internal-error"),xr(b,e.name),xr(N,e.name),xr(C,e.name),xr(T,e.name),xr(x,e.name),xr(y,e.name);const _=new gn({uid:E,auth:e,email:g,emailVerified:j,displayName:f,isAnonymous:L,photoURL:N,phoneNumber:b,tenantId:C,stsTokenManager:w,createdAt:x,lastLoginAt:y});return V&&Array.isArray(V)&&(_.providerData=V.map(S=>Object.assign({},S))),T&&(_._redirectEventId=T),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ei;s.updateFromServerResponse(n);const i=new gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Mc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?kb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Ei;c.updateFromIdToken(r);const u=new gn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new of(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map;function Jn(t){lr(t instanceof Function,"Expected a class definition");let e=S0.get(t);return e?(lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Cb.type="NONE";const k0=Cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ni{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Wl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Wl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Lc(this.auth,{idToken:e}).catch(()=>{});return n?gn._fromGetAccountInfoResponse(this.auth,n,e):null}return gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ni(Jn(k0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Jn(k0);const o=Wl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(o);if(m){let f;if(typeof m=="string"){const g=await Lc(e,{idToken:m}).catch(()=>{});if(!g)break;f=await gn._fromGetAccountInfoResponse(e,g,m)}else f=gn._fromJSON(e,m);d!==i&&(c=f),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ni(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ni(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vb(e))return"Blackberry";if(Ob(e))return"Webos";if(Ab(e))return"Safari";if((e.includes("chrome/")||Pb(e))&&!e.includes("edge/"))return"Chrome";if(Db(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jb(t=It()){return/firefox\//i.test(t)}function Ab(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pb(t=It()){return/crios\//i.test(t)}function Rb(t=It()){return/iemobile/i.test(t)}function Db(t=It()){return/android/i.test(t)}function Vb(t=It()){return/blackberry/i.test(t)}function Ob(t=It()){return/webos/i.test(t)}function Ym(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jj(t=It()){var e;return Ym(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Aj(){return MT()&&document.documentMode===10}function Lb(t=It()){return Ym(t)||Db(t)||Ob(t)||Vb(t)||/windows phone/i.test(t)||Rb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t,e=[]){let n;switch(t){case"Browser":n=C0(It());break;case"Worker":n=`${C0(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(t,e={}){return Yi(t,"GET","/v2/passwordPolicy",Jm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=6;class Vj{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Dj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j0(this),this.idTokenSubscription=new j0(this),this.beforeStateQueue=new Pj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ni.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lc(this,{idToken:e}),r=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(Gr(this));const n=e?ot(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(Gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(Gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Rj(this),n=new Vj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Co("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Cj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ni.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Zi(t){return ot(t)}class j0{constructor(e){this.auth=e,this.observer=null,this.addObserver=qT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lj(t){Zm=t}function Mj(t){return Zm.loadJS(t)}function Fj(){return Zm.gapiScript}function Uj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t,e){const n=fm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Rs(i,e??{}))return s;On(s,"already-initialized")}return n.initialize({options:e})}function Bj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $j(t,e,n){const r=Zi(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Fb(e),{host:o,port:c}=Hj(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Rs(d,r.config.emulator)&&Rs(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,qi(o)?(Dw(`${i}//${o}${u}`),Vw("Auth",!0)):Wj()}function Fb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Hj(t){const e=Fb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:A0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:A0(o)}}}function A0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Wj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(t,e){return wj(t,"POST","/v1/accounts:signInWithIdp",Jm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="http://localhost";class Ls extends Ub{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=qm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ls(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ti(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ti(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ti(e,n)}buildRequest(){const e={requestUri:qj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Tu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Fo{constructor(){super("facebook.com")}static credential(e){return Ls._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ls._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Wn.credential(n,r)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Fo{constructor(){super("github.com")}static credential(e){return Ls._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Fo{constructor(){super("twitter.com")}static credential(e,n){return Ls._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await gn._fromIdTokenResponse(e,r,s),o=P0(r);return new Ui({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=P0(r);return new Ui({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function P0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends dr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fc(e,n,r,s)}}function zb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fc._fromErrorAndOperation(t,i,e,r):i})}async function Gj(t,e,n=!1){const r=await _o(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ui._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t,e,n=!1){const{auth:r}=t;if(nn(r.app))return Promise.reject(Gr(r));const s="reauthenticate";try{const i=await _o(t,zb(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=Xm(i.idToken);te(o,r,"internal-error");const{sub:c}=o;return te(t.uid===c,r,"user-mismatch"),Ui._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&On(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(t,e,n=!1){if(nn(t.app))return Promise.reject(Gr(t));const r="signIn",s=await zb(t,r,e),i=await Ui._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Jj(t,e,n,r){return ot(t).onIdTokenChanged(e,n,r)}function Xj(t,e,n){return ot(t).beforeAuthStateChanged(e,n)}function Yj(t){return ot(t).signOut()}const Uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uc,"1"),this.storage.removeItem(Uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=1e3,e4=10;class $b extends Bb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Aj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,e4):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$b.type="LOCAL";const t4=$b;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb extends Bb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Hb.type="SESSION";const Wb=Hb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Iu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await n4(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Iu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=ep("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const g=f;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function s4(t){Rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function i4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function o4(){return qb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebaseLocalStorageDb",l4=1,zc="firebaseLocalStorage",Kb="fbase_key";class Uo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Su(t,e){return t.transaction([zc],e?"readwrite":"readonly").objectStore(zc)}function c4(){const t=indexedDB.deleteDatabase(Gb);return new Uo(t).toPromise()}function lf(){const t=indexedDB.open(Gb,l4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zc,{keyPath:Kb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zc)?e(r):(r.close(),await c4(),e(await lf()))})})}async function R0(t,e,n){const r=Su(t,!0).put({[Kb]:e,value:n});return new Uo(r).toPromise()}async function u4(t,e){const n=Su(t,!1).get(e),r=await new Uo(n).toPromise();return r===void 0?null:r.value}function D0(t,e){const n=Su(t,!0).delete(e);return new Uo(n).toPromise()}const d4=800,h4=3;class Qb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>h4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Iu._getInstance(o4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await i4(),!this.activeServiceWorker)return;this.sender=new r4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lf();return await R0(e,Uc,"1"),await D0(e,Uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>R0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>u4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Su(s,!1).getAll();return new Uo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qb.type="LOCAL";const f4=Qb;new Mo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t,e){return e?Jn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends Ub{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ti(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ti(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ti(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function m4(t){return Qj(t.auth,new np(t),t.bypassAuthState)}function p4(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Kj(n,new np(t),t.bypassAuthState)}async function g4(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Gj(n,new np(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m4;case"linkViaPopup":case"linkViaRedirect":return g4;case"reauthViaPopup":case"reauthViaRedirect":return p4;default:On(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new Mo(2e3,1e4);async function x4(t,e,n){if(nn(t.app))return Promise.reject(wn(t,"operation-not-supported-in-this-environment"));const r=Zi(t);Nb(t,e,Tu);const s=tp(r,n);return new _s(r,"signInViaPopup",e,s).executeNotNull()}class _s extends Jb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_s.currentPopupAction&&_s.currentPopupAction.cancel(),_s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y4.get())};e()}}_s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="pendingRedirect",ql=new Map;class w4 extends Jb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ql.get(this.auth._key());if(!e){try{const r=await _4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ql.set(this.auth._key(),e)}return this.bypassAuthState||ql.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _4(t,e){const n=Yb(e),r=Xb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function b4(t,e){return Xb(t)._set(Yb(e),"true")}function E4(t,e){ql.set(t._key(),e)}function Xb(t){return Jn(t._redirectPersistence)}function Yb(t){return Wl(v4,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t,e,n){return T4(t,e,n)}async function T4(t,e,n){if(nn(t.app))return Promise.reject(Gr(t));const r=Zi(t);Nb(t,e,Tu),await r._initializationPromise;const s=tp(r,n);return await b4(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function I4(t,e){return await Zi(t)._initializationPromise,Zb(t,e,!1)}async function Zb(t,e,n=!1){if(nn(t.app))return Promise.reject(Gr(t));const r=Zi(t),s=tp(r,e),o=await new w4(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=10*60*1e3;class k4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!e1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S4&&this.cachedEventUids.clear(),this.cachedEventUids.has(V0(e))}saveEventToCache(e){this.cachedEventUids.add(V0(e)),this.lastProcessedEventTime=Date.now()}}function V0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function e1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4(t,e={}){return Yi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P4=/^https?/;async function R4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await j4(t);for(const n of e)try{if(D4(n))return}catch{}On(t,"unauthorized-domain")}function D4(t){const e=af(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!P4.test(n))return!1;if(A4.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new Mo(3e4,6e4);function O0(){const t=Rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function O4(t){return new Promise((e,n)=>{var r,s,i;function o(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),n(wn(t,"network-request-failed"))},timeout:V4.get()})}if(!((s=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Rn().gapi)===null||i===void 0)&&i.load)o();else{const c=Uj("iframefcb");return Rn()[c]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},Mj(`${Fj()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Gl=null,e})}let Gl=null;function L4(t){return Gl=Gl||O4(t),Gl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new Mo(5e3,15e3),F4="__/auth/iframe",U4="emulator/auth/iframe",z4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $4(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qm(e,U4):`https://${t.config.authDomain}/${F4}`,r={apiKey:e.apiKey,appName:t.name,v:Gi},s=B4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${jo(r).slice(1)}`}async function H4(t){const e=await L4(t),n=Rn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:$4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),c=Rn().setTimeout(()=>{i(o)},M4.get());function u(){Rn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q4=500,G4=600,K4="_blank",Q4="http://localhost";class L0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J4(t,e,n,r=q4,s=G4){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},W4),{width:r.toString(),height:s.toString(),top:i,left:o}),d=It().toLowerCase();n&&(c=Pb(d)?K4:n),jb(d)&&(e=e||Q4,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[b,N])=>`${g}${b}=${N},`,"");if(jj(d)&&c!=="_self")return X4(e||"",c),new L0(null);const f=window.open(e||"",c,m);te(f,t,"popup-blocked");try{f.focus()}catch{}return new L0(f)}function X4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="__/auth/handler",Z4="emulator/auth/handler",eA=encodeURIComponent("fac");async function M0(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gi,eventId:s};if(e instanceof Tu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,f]of Object.entries({}))o[m]=f}if(e instanceof Fo){const m=e.getScopes().filter(f=>f!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${eA}=${encodeURIComponent(u)}`:"";return`${tA(t)}?${jo(c).slice(1)}${d}`}function tA({config:t}){return t.emulator?Qm(t,Z4):`https://${t.authDomain}/${Y4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class nA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wb,this._completeRedirectFn=Zb,this._overrideRedirectResult=E4}async _openPopup(e,n,r,s){var i;lr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await M0(e,n,r,af(),s);return J4(e,o,ep())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await M0(e,n,r,af(),s);return s4(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(lr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H4(e),r=new k4(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pd,{type:Pd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Pd];o!==void 0&&n(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=R4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Lb()||Ab()||Ym()}}const rA=nA;var F0="@firebase/auth",U0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aA(t){Ri(new Ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mb(t)},d=new Oj(r,s,i,u);return Bj(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ri(new Ds("auth-internal",e=>{const n=Zi(e.getProvider("auth").getImmediate());return(r=>new sA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(F0,U0,iA(t)),$r(F0,U0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=5*60,lA=Rw("authIdTokenMaxAge")||oA;let z0=null;const cA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lA)return;const s=n==null?void 0:n.token;z0!==s&&(z0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uA(t=Fw()){const e=fm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zj(t,{popupRedirectResolver:rA,persistence:[f4,t4,Wb]}),r=Rw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=cA(i.toString());Xj(n,o,()=>o(n.currentUser)),Jj(n,c=>o(c))}}const s=Aw("auth");return s&&$j(n,`http://${s}`),n}function dA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Lj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=wn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aA("Browser");var hA="firebase",fA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(hA,fA,"app");const mA={apiKey:"AIzaSyAwhZEJ6byooK1gtlrNveZ-cSxK9a7kbg0",authDomain:"videocalc-b1b43.firebaseapp.com",projectId:"videocalc-b1b43",storageBucket:"videocalc-b1b43.firebasestorage.app",messagingSenderId:"1002679649212",appId:"1:1002679649212:web:ebdedfaa1962cb9b3921b9",measurementId:"G-NVD93E95GB"},t1=Mw(mA),Yt=XC(t1),Ea=uA(t1);class pA{constructor(){Bn(this,"googleProvider",new Wn)}async signInWithGoogle(){try{return(await x4(Ea,this.googleProvider)).user}catch(e){if(console.error("Error signing in with Google:",e),e instanceof Error&&(e.message.includes("auth/popup-blocked")||e.message.includes("auth/popup-closed-by-user")))return console.log("Popup blocked or closed, falling back to redirect..."),await N4(Ea,this.googleProvider),null;throw e}}async handleRedirectSignInResult(){try{const e=await I4(Ea);return e&&e.user?(console.log("Redirect sign-in successful:",e.user),e.user):null}catch(e){throw console.error("Error handling redirect result:",e),e}}async signOut(){try{await Yj(Ea)}catch(e){throw console.error("Error signing out:",e),new Error("Failed to sign out")}}getCurrentUser(){return Ea.currentUser}isAuthorizedAdmin(){const e=this.getCurrentUser();if(!e)return!1;const n="dave@timelapsetech.com,dgklee@gmail.com".split(",").map(r=>r.trim()).filter(Boolean);return n.length===0?(console.warn("No admin emails configured"),!1):n.includes(e.email||"")}async getCategories(){try{console.log("Fetching categories from Firebase...");const e=yr(Yt,"codecs"),n=await Js(e);if(n.empty)return console.log("No documents found in Firebase"),[];const r=[],s=new Map;for(const o of n.docs){const c=o.data();console.log("Processing document:",o.id,c);const u=c.category_id||c.categoryId||"unknown",d=c.category||"Unknown Category",m=c.description||"";let f=s.get(u);f||(f={id:u,name:d,description:m,codecs:[]},s.set(u,f));const g={id:c.id||o.id,name:c.name||"Unknown Codec",description:c.description||"",workflowNotes:c.workflowNotes||"",variants:[]};if(c.variants&&Array.isArray(c.variants)){for(const b of c.variants)if(b&&b.bitrates){const N={name:b.name||"Unknown Variant",description:b.description||"",bitrates:b.bitrates};g.variants.push(N)}}f.codecs.push(g)}const i=Array.from(s.values());return console.log("Processed categories:",i),i}catch(e){throw console.error("Error fetching categories:",e),new Error("Failed to fetch codec categories from Firebase")}}checkAdminAccess(){if(!this.isAuthorizedAdmin())throw new Error("Unauthorized: Admin access required")}async importCodecData(e){this.checkAdminAccess();try{console.log("Importing codec data to Firebase...");const n=dj(Yt);(await Js(yr(Yt,"codecs"))).forEach(s=>{n.delete(s.ref)});for(const s of e)for(const i of s.codecs){const o=Nl(yr(Yt,"codecs")),c={id:i.id,name:i.name,description:i.description||"",workflowNotes:i.workflowNotes||"",category:s.name,category_id:s.id,variants:i.variants.map(u=>({name:u.name,description:u.description||"",bitrates:u.bitrates})),firebase_created_at:new Date().toISOString(),firebase_updated_at:new Date().toISOString(),source:"admin_import"};n.set(o,c)}await n.commit(),console.log("Successfully imported codec data to Firebase")}catch(n){throw console.error("Error importing codec data:",n),new Error("Failed to import codec data to Firebase")}}async exportCodecData(){return await this.getCategories()}subscribeToCategories(e){const n=yr(Yt,"codecs");return lj(n,async r=>{try{console.log("Firebase data changed, updating categories...");const s=await this.getCategories();e(s)}catch(s){console.error("Error in categories subscription:",s)}})}async addVariant(e,n,r){this.checkAdminAccess();try{console.log("Adding variant to codec:",n,"in category:",e);const s=yr(Yt,"codecs"),i=await Js(s);let o=null,c=null;for(const f of i.docs){const g=f.data();if(g.category_id===e&&g.id===n){o=f.id,c=g;break}}if(!o||!c)throw new Error(`Codec ${n} not found in category ${e}`);const u=c.variants||[];if(u.some(f=>f.name===r.name))throw new Error(`Variant "${r.name}" already exists in this codec`);const d=[...u,{name:r.name,description:r.description||"",bitrates:r.bitrates}],m=Nl(Yt,"codecs",o);await Cd(m,{variants:d,firebase_updated_at:new Date().toISOString()}),console.log("Successfully added variant to Firebase")}catch(s){throw console.error("Error adding variant:",s),new Error(s instanceof Error?s.message:"Failed to add variant")}}async updateVariant(e,n,r,s){this.checkAdminAccess();try{console.log("Updating variant:",r,"in codec:",n);const i=yr(Yt,"codecs"),o=await Js(i);let c=null,u=null;for(const b of o.docs){const N=b.data();if(N.category_id===e&&N.id===n){c=b.id,u=N;break}}if(!c||!u)throw new Error(`Codec ${n} not found in category ${e}`);const d=u.variants||[],m=d.findIndex(b=>b.name===r);if(m===-1)throw new Error(`Variant "${r}" not found in codec ${n}`);if(s.name!==r&&d.some((b,N)=>N!==m&&b.name===s.name))throw new Error(`Variant "${s.name}" already exists in this codec`);const f=[...d];f[m]={name:s.name,description:s.description||"",bitrates:s.bitrates};const g=Nl(Yt,"codecs",c);await Cd(g,{variants:f,firebase_updated_at:new Date().toISOString()}),console.log("Successfully updated variant in Firebase")}catch(i){throw console.error("Error updating variant:",i),new Error(i instanceof Error?i.message:"Failed to update variant")}}async deleteVariant(e,n,r){this.checkAdminAccess();try{console.log("Deleting variant:",r,"from codec:",n);const s=yr(Yt,"codecs"),i=await Js(s);let o=null,c=null;for(const g of i.docs){const b=g.data();if(b.category_id===e&&b.id===n){o=g.id,c=b;break}}if(!o||!c)throw new Error(`Codec ${n} not found in category ${e}`);const u=c.variants||[];if(u.findIndex(g=>g.name===r)===-1)throw new Error(`Variant "${r}" not found in codec ${n}`);if(u.length===1)throw new Error("Cannot delete the last variant from a codec");const m=u.filter(g=>g.name!==r),f=Nl(Yt,"codecs",o);await Cd(f,{variants:m,firebase_updated_at:new Date().toISOString()}),console.log("Successfully deleted variant from Firebase")}catch(s){throw console.error("Error deleting variant:",s),new Error(s instanceof Error?s.message:"Failed to delete variant")}}async testConnection(){try{console.log("Testing Firebase connection...");const e=yr(Yt,"codecs");return await Js(e),console.log("Firebase connection successful"),!0}catch(e){return console.error("Firebase connection test failed:",e),!1}}}const it=new pA,cf=R.createContext(void 0),gA=({children:t})=>{const[e,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState(null);R.useEffect(()=>{c()},[]);const c=async()=>{try{if(s(!0),o(null),console.log("Loading categories from Firebase..."),!await it.testConnection())throw new Error("Unable to connect to Firebase. Please check your configuration.");const N=await it.getCategories();console.log("Loaded categories:",N),n(N),localStorage.setItem("codecData",JSON.stringify(N))}catch(b){console.error("Error loading categories from Firebase:",b),o(b instanceof Error?b.message:"Failed to load codec data");const N=localStorage.getItem("codecData");if(N)try{const C=JSON.parse(N);n(C),console.log("Loaded codec data from local cache")}catch(C){console.error("Error parsing cached data:",C),n([])}else n([])}finally{s(!1)}},u=async()=>{await c()},d=b=>{n(b),localStorage.setItem("codecData",JSON.stringify(b))},m=()=>{n([]),localStorage.removeItem("codecData")},f=async()=>{await c()},g=async b=>{try{o(null),await it.importCodecData(b),await u()}catch(N){throw console.error("Error exporting to Firebase:",N),o(N instanceof Error?N.message:"Failed to export to Firebase"),N}};return r&&e.length===0?a.jsx(cf.Provider,{value:{categories:[],loading:r,error:i,updateCategories:d,refreshCategories:u,resetToDefaults:m,importFromFirebase:f,exportToFirebase:g},children:t}):a.jsx(cf.Provider,{value:{categories:e,loading:r,error:i,updateCategories:d,refreshCategories:u,resetToDefaults:m,importFromFirebase:f,exportToFirebase:g},children:t})},ea=()=>{const t=R.useContext(cf);if(!t)throw new Error("useCodecContext must be used within CodecProvider");return t},Rd=async()=>{try{console.log("Loading default presets from Firebase...");const n=await it.getDefaultPresets();if(n&&n.length>0)return console.log("Loaded default presets from Firebase:",n),localStorage.setItem("firebaseDefaultPresets",JSON.stringify(n)),n}catch(n){console.log("Failed to load from Firebase, trying localStorage cache:",n)}const t=localStorage.getItem("firebaseDefaultPresets");if(t)try{const n=JSON.parse(t);if(Array.isArray(n)&&n.length>0)return console.log("Loaded default presets from localStorage cache"),n}catch{console.log("Failed to parse cached presets")}const e=localStorage.getItem("adminDefaultPresets");if(e)try{const n=JSON.parse(e);if(Array.isArray(n)&&n.length>0)return console.log("Loaded default presets from legacy admin defaults"),n}catch{}return console.log("Using hardcoded default presets"),[{id:"preset-1",name:"YouTube 1080p",category:"delivery",codec:"h264",variant:"High Profile",resolution:"1080p",frameRate:"30"},{id:"preset-2",name:"Netflix 4K",category:"broadcast",codec:"jpeg2000",variant:"J2K IMF 4K",resolution:"4K",frameRate:"24"},{id:"preset-3",name:"News TV",category:"camera",codec:"xdcam",variant:"XDCAM HD422",resolution:"1080i",frameRate:"29.97"},{id:"preset-4",name:"Episodic TV",category:"professional",codec:"dnxhd",variant:"DNxHD 145",resolution:"1080p",frameRate:"23.98"}]},n1=R.createContext(void 0),yA=({children:t})=>{const[e,n]=R.useState([]),[r]=R.useState("idle");R.useEffect(()=>{s()},[]),R.useEffect(()=>{let f=null;try{f=it.subscribeToDefaultPresets(async g=>{localStorage.getItem("customPresets")||(console.log("Firebase default presets updated, refreshing..."),n(g),localStorage.setItem("firebaseDefaultPresets",JSON.stringify(g)))})}catch(g){console.log("Failed to set up Firebase listener:",g)}return()=>{f&&f()}},[]);const s=async()=>{const f=localStorage.getItem("customPresets");if(f)try{const g=JSON.parse(f);console.log("Loaded user custom presets"),n(g);return}catch{console.log("Failed to parse custom presets, loading defaults")}try{const g=await Rd();n(g)}catch(g){console.error("Failed to load default presets:",g),n([{id:"preset-1",name:"YouTube 1080p",category:"delivery",codec:"h264",variant:"High Profile",resolution:"1080p",frameRate:"30"},{id:"preset-2",name:"Netflix 4K",category:"broadcast",codec:"jpeg2000",variant:"J2K IMF 4K",resolution:"4K",frameRate:"24"},{id:"preset-3",name:"News TV",category:"camera",codec:"xdcam",variant:"XDCAM HD422",resolution:"1080i",frameRate:"29.97"},{id:"preset-4",name:"Episodic TV",category:"professional",codec:"dnxhd",variant:"DNxHD 145",resolution:"1080p",frameRate:"23.98"}])}},i=f=>{n(f),localStorage.setItem("customPresets",JSON.stringify(f))},o=(f,g)=>{const b=[...e];b[f]=g,i(b)},c=f=>{const g=[...e,f];i(g)},u=f=>{const g=e.filter((b,N)=>N!==f);i(g)},d=async()=>{try{const f=await Rd();localStorage.removeItem("customPresets"),i(f)}catch(f){console.error("Failed to reset to defaults:",f)}},m=async()=>{try{const f=await Rd();localStorage.getItem("customPresets")||n(f)}catch(f){console.error("Failed to refresh default presets:",f)}};return a.jsx(n1.Provider,{value:{customPresets:e,updatePreset:o,addPreset:c,deletePreset:u,resetToDefaults:d,syncStatus:r,refreshDefaultPresets:m},children:t})},xA=()=>{const t=R.useContext(n1);if(!t)throw new Error("usePresetContext must be used within PresetContext");return t},qn=[{id:"NTSC_DV",name:"NTSC DV (720×480)",width:720,height:480,category:"SD"},{id:"NTSC_D1",name:"NTSC D1 (720×486)",width:720,height:486,category:"SD"},{id:"PAL",name:"PAL (720×576)",width:720,height:576,category:"SD"},{id:"720p",name:"720p HD (1280×720)",width:1280,height:720,category:"HD"},{id:"1080i",name:"1080i (1920×1080 interlaced)",width:1920,height:1080,category:"HD"},{id:"1080p",name:"1080p FHD (1920×1080)",width:1920,height:1080,category:"HD"},{id:"2K DCI",name:"2K DCI (2048×1080)",width:2048,height:1080,category:"Cinema"},{id:"4K DCI",name:"4K DCI (4096×2160)",width:4096,height:2160,category:"Cinema"},{id:"8K DCI",name:"8K DCI (8192×4320)",width:8192,height:4320,category:"Cinema"},{id:"4K",name:"4K UHD (3840×2160)",width:3840,height:2160,category:"UHD"},{id:"8K",name:"8K UHD (7680×4320)",width:7680,height:4320,category:"UHD"}],Zt=[{id:"23.98",name:"23.98 fps (Film on TV)",value:23.976,category:"Film on TV"},{id:"24",name:"24 fps (True Cinema)",value:24,category:"Cinema"},{id:"25",name:"25 fps (PAL/European)",value:25,category:"Broadcast"},{id:"29.97",name:"29.97 fps (NTSC)",value:29.97,category:"Broadcast"},{id:"30",name:"30 fps",value:30,category:"Standard"},{id:"50",name:"50 fps (PAL Progressive)",value:50,category:"Broadcast"},{id:"59.94",name:"59.94 fps (NTSC Progressive)",value:59.94,category:"Broadcast"},{id:"60",name:"60 fps",value:60,category:"Standard"},{id:"120",name:"120 fps (High Frame Rate)",value:120,category:"HFR"},{id:"240",name:"240 fps (Super Slow Motion)",value:240,category:"HFR"}],ps=class ps{constructor(){Bn(this,"preferences",null);this.loadSavedPreferences()}static getInstance(){return ps.instance||(ps.instance=new ps),ps.instance}loadSavedPreferences(){try{const e=localStorage.getItem("cookie-consent");e&&(this.preferences=JSON.parse(e))}catch{this.preferences=null}}hasConsent(){return this.preferences!==null}isAllowed(e){return this.preferences?this.preferences[e]===!0:!1}updatePreferences(e){this.preferences={...e,consentDate:new Date().toISOString()},localStorage.setItem("cookie-consent",JSON.stringify(this.preferences)),localStorage.setItem("cookie-consent-date",this.preferences.consentDate),this.applyPreferences()}applyPreferences(){this.preferences&&(this.preferences.analytics||this.disableAnalytics(),this.preferences.preferences||this.clearNonEssentialStorage())}disableAnalytics(){window.gtag&&window.gtag("consent","update",{analytics_storage:"denied"}),localStorage.removeItem("ga_measurement_id"),localStorage.setItem("ga_enabled","false")}clearNonEssentialStorage(){const e=["cookie-consent","cookie-consent-date","codecData","adminAuth"],n=[];for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);s&&!e.includes(s)&&n.push(s)}n.forEach(r=>localStorage.removeItem(r))}getPreferences(){return this.preferences}needsConsentRenewal(){var s;if(!((s=this.preferences)!=null&&s.consentDate))return!0;const e=new Date(this.preferences.consentDate),n=new Date,r=new Date(n.getFullYear(),n.getMonth()-12,n.getDate());return e<r}resetConsent(){localStorage.removeItem("cookie-consent"),localStorage.removeItem("cookie-consent-date"),this.preferences=null,this.clearNonEssentialStorage()}getAnalyticsConfig(){return this.isAllowed("analytics")?{enabled:!0,anonymize_ip:!0,allow_google_signals:!1,allow_ad_personalization_signals:!1,cookie_expires:63072e3,storage:"none"}:{enabled:!1,anonymize_ip:!0,allow_google_signals:!1,allow_ad_personalization_signals:!1}}};Bn(ps,"instance");let uf=ps;const mi=uf.getInstance(),vr=t=>mi.isAllowed(t),gs=class gs{constructor(){Bn(this,"isInitialized",!1);Bn(this,"measurementId",null);this.autoInitialize()}static getInstance(){return gs.instance||(gs.instance=new gs),gs.instance}autoInitialize(){if(!vr("analytics")){console.log("Google Analytics disabled: User has not consented to analytics cookies");return}const e="G-NVD93E95GB";if(e.match(/^G-[A-Z0-9]+$/))console.log("Auto-initializing Google Analytics from environment variable"),this.initialize(e);else{const n=localStorage.getItem("ga_measurement_id"),r=localStorage.getItem("ga_enabled")==="true";n&&r&&n.match(/^G-[A-Z0-9]+$/)&&(console.log("Initializing Google Analytics from admin configuration"),this.initialize(n))}}initialize(e){if(this.isInitialized||!e)return;if(!vr("analytics")){console.log("Google Analytics initialization blocked: No analytics consent");return}this.measurementId=e;const n=document.createElement("script");n.async=!0,n.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(n),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const r=mi.getAnalyticsConfig();window.gtag("config",e,{page_title:document.title,page_location:window.location.href,anonymize_ip:r.anonymize_ip,allow_google_signals:r.allow_google_signals,allow_ad_personalization_signals:r.allow_ad_personalization_signals,cookie_expires:r.cookie_expires,send_page_view:!0,custom_map:{},transport_type:"beacon"}),window.gtag("consent","default",{analytics_storage:"granted",ad_storage:"denied",functionality_storage:vr("preferences")?"granted":"denied",personalization_storage:"denied",security_storage:"granted"}),this.isInitialized=!0,console.log("Google Analytics initialized with GDPR compliance, ID:",e)}trackPageView(e,n){!this.isInitialized||!window.gtag||!vr("analytics")||window.gtag("config",this.measurementId,{page_path:e,page_title:n||document.title})}trackEvent(e,n){if(!this.isInitialized||!window.gtag||!vr("analytics"))return;const r=this.sanitizeParameters(n);window.gtag("event",e,{event_category:"engagement",...r})}sanitizeParameters(e){if(!e)return{};const n={},r=["event_category","codec_category","codec_name","codec_variant","resolution","frame_rate","preset_name","export_type"];return Object.keys(e).forEach(s=>{r.includes(s)&&typeof e[s]=="string"&&(n[s]=String(e[s]).substring(0,100))}),n}trackCalculation(e,n,r,s,i){this.trackEvent("calculate_file_size",{event_category:"calculator",codec_category:e,codec_name:n,codec_variant:r,resolution:s,frame_rate:i})}trackPresetUsage(e){this.trackEvent("use_preset",{event_category:"presets",preset_name:e})}trackShareLink(){this.trackEvent("share_calculation",{event_category:"sharing"})}trackAdminAccess(){this.trackEvent("admin_access",{event_category:"admin"})}trackCodecDatabaseView(){this.trackEvent("view_codec_database",{event_category:"database"})}trackDataExport(e){this.trackEvent("export_data",{event_category:"data",export_type:e})}isEnabled(){return this.isInitialized&&!!this.measurementId&&vr("analytics")}getMeasurementId(){return this.measurementId}getSource(){return this.measurementId?"G-NVD93E95GB"===this.measurementId?"environment":"admin":"none"}reinitializeWithConsent(){vr("analytics")&&!this.isInitialized?this.autoInitialize():!vr("analytics")&&this.isInitialized&&this.disable()}disable(){window.gtag&&window.gtag("consent","update",{analytics_storage:"denied"}),this.isInitialized=!1,this.measurementId=null}};Bn(gs,"instance");let df=gs;const ht=df.getInstance(),vA=(t,e,n,r,s,i,o,c)=>{const u=new URLSearchParams;return t&&u.set("category",t),e&&u.set("codec",e),n&&u.set("variant",n),r&&u.set("resolution",r),s&&u.set("framerate",s),u.set("hours",i.toString()),u.set("minutes",o.toString()),u.set("seconds",c.toString()),`${window.location.origin}${window.location.pathname}?${u.toString()}`},r1=(t,e,n,r,s,i)=>vA(t,e,n,r,s,i.hours,i.minutes,i.seconds),Na=({label:t,value:e,onChange:n,options:r,placeholder:s="Select option...",disabled:i=!1})=>{const[o,c]=R.useState(!1),[u,d]=R.useState(""),[m,f]=R.useState({top:0,left:0,width:0}),[g,b]=R.useState(!1),[N,C]=R.useState(!1),T=R.useRef(null),x=R.useRef(null),y=R.useRef(null),E=r.find(_=>_.value===e),j=r.filter(_=>_.label.toLowerCase().includes(u.toLowerCase())||_.description&&_.description.toLowerCase().includes(u.toLowerCase()));R.useEffect(()=>{const _=()=>{b(window.innerWidth<768||"ontouchstart"in window)};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const L=()=>{if(T.current){const _=T.current.getBoundingClientRect(),S=window.innerHeight,A=Math.min(300,j.length*60+80);let P=_.bottom+window.scrollY+8;_.bottom+A>S&&(P=_.top+window.scrollY-A-8,P<window.scrollY+20&&(P=window.scrollY+(S-A)/2)),f({top:P,left:_.left+window.scrollX,width:_.width})}};R.useEffect(()=>{const _=k=>{if(T.current&&!T.current.contains(k.target)){const K=document.getElementById("dropdown-portal");(!K||!K.contains(k.target))&&(c(!1),d(""),C(!1))}},S=()=>{o&&!g&&L()},A=()=>{o&&L()},P=k=>{if(o&&g){const K=document.getElementById("dropdown-portal");if(K&&K.contains(k.target))return;k.preventDefault()}};return o&&(document.addEventListener("mousedown",_),window.addEventListener("scroll",S,{passive:!0}),window.addEventListener("resize",A),g&&(document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchstart",k=>{k.touches.length>1&&k.preventDefault()},{passive:!1})),L()),()=>{document.removeEventListener("mousedown",_),window.removeEventListener("scroll",S),window.removeEventListener("resize",A),document.removeEventListener("touchmove",P)}},[o,g]),R.useEffect(()=>{o&&x.current&&!g&&setTimeout(()=>{x.current&&x.current.focus({preventScroll:!0})},100)},[o,g]);const V=_=>{n(_),c(!1),d(""),C(!1)},I=_=>{_.preventDefault(),_.stopPropagation(),i||(o?(c(!1),C(!1)):(C(!0),c(!0)))},w=o&&!i&&a.jsxs("div",{id:"dropdown-portal",ref:y,style:{position:"fixed",top:g?"50%":m.top,left:g?"50%":m.left,width:g?"90vw":m.width,maxWidth:g?"400px":"none",transform:g?"translate(-50%, -50%)":"none",zIndex:1e4,maxHeight:g?"70vh":"300px"},className:`
        bg-dark-secondary border border-gray-700 rounded-lg shadow-2xl overflow-hidden
        ${g?"mx-4":""}
        ${N?"animate-in":""}
        transition-all duration-200 ease-out
        ${o?"opacity-100 scale-100":"opacity-0 scale-95"}
      `,onTouchMove:_=>_.stopPropagation(),children:[g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 -z-10 transition-opacity duration-200",onClick:()=>{c(!1),d(""),C(!1)}}),a.jsx("div",{className:`p-3 border-b border-gray-700 bg-dark-secondary ${g?"sticky top-0":""}`,children:a.jsxs("div",{className:"relative",children:[a.jsx(Tw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{ref:x,type:"text",placeholder:"Search options...",value:u,onChange:_=>d(_.target.value),className:`w-full pl-10 pr-3 py-2 bg-dark-primary border border-gray-700 rounded-md text-white placeholder-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors ${g?"text-base":"text-sm"}`,onClick:_=>_.stopPropagation(),onFocus:_=>{_.target.setSelectionRange(0,0),g&&_.preventDefault()},inputMode:"search",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})]})}),a.jsx("div",{className:`overflow-y-auto bg-dark-secondary ${g?"max-h-[50vh]":"max-h-48"}`,style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:j.length>0?j.map((_,S)=>a.jsxs("button",{type:"button",className:`
                w-full px-4 py-3 text-left hover:bg-dark-primary transition-colors duration-150
                ${e===_.value?"bg-blue-600/20 border-r-2 border-blue-500":""}
                ${g?"py-4 text-base":"py-3 text-sm"}
                transform transition-transform duration-150 hover:scale-[1.02]
              `,onClick:A=>{A.preventDefault(),A.stopPropagation(),V(_.value)},onTouchStart:A=>A.stopPropagation(),style:{animationDelay:`${S*20}ms`},children:[a.jsx("div",{className:`font-medium text-white ${g?"text-base":"text-sm"}`,children:_.label}),_.description&&a.jsx("div",{className:`text-gray-400 mt-1 ${g?"text-sm":"text-xs"}`,children:_.description})]},_.value)):a.jsx("div",{className:`px-4 py-3 text-gray-400 text-center ${g?"py-6 text-base":"py-3 text-sm"}`,children:"No options found"})}),g&&a.jsx("div",{className:"p-3 border-t border-gray-700 bg-dark-secondary",children:a.jsx("button",{onClick:()=>{c(!1),d(""),C(!1)},className:"w-full py-2 px-4 bg-gray-600 hover:bg-gray-700 rounded-lg text-white transition-colors",children:"Close"})})]});return a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:t}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{ref:T,type:"button",className:`
            w-full flex items-center justify-between px-4 py-3 text-left bg-dark-primary border border-gray-700 rounded-lg
            transition-all duration-200 ${i?"opacity-50 cursor-not-allowed":"hover:border-blue-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 active:scale-[0.99]"} ${o?"border-blue-500 ring-1 ring-blue-500 shadow-lg":""}
            ${g?"min-h-[48px]":""}
          `,onClick:I,disabled:i,onFocus:_=>{g&&_.preventDefault()},children:[a.jsx("div",{className:"flex-1 min-w-0",children:E?a.jsxs("div",{children:[a.jsx("div",{className:`text-white font-medium ${g?"text-base":"text-sm"}`,children:E.label}),E.description&&a.jsx("div",{className:`text-gray-400 truncate ${g?"text-sm":"text-xs"}`,children:E.description})]}):a.jsx("span",{className:`text-gray-400 ${g?"text-base":"text-sm"}`,children:s})}),a.jsx(xw,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 ${o?"rotate-180":""} ${g?"ml-2":"ml-1"}`})]}),typeof document<"u"&&rw.createPortal(w,document.body)]})]})},wA=({results:t,duration:e,onDurationChange:n})=>{const[r,s]=pi.useState(!1),[i,o]=pi.useState(!1),[c,u]=pi.useState(!1),d=(T,x)=>{const y=Math.max(0,parseInt(x)||0);let E={...e,[T]:y};T==="seconds"&&y>=60&&(E.minutes+=Math.floor(y/60),E.seconds=y%60),T==="minutes"&&y>=60&&(E.hours+=Math.floor(y/60),E.minutes=y%60),n(E)},m=async()=>{if(t)try{const T=r1(t.category,t.codec.id,t.variant.name,t.resolution.id,t.frameRate.id,e);await navigator.clipboard.writeText(T),s(!0),setTimeout(()=>s(!1),2e3)}catch(T){console.error("Failed to copy URL:",T)}},f=(T,x)=>{if(x){const y=T/1024,E=y/1024;return{sizeGiB:y,sizeTiB:E}}else{const y=T/1e3,E=y/1e3;return{sizeGB:y,sizeTB:E}}},g=(T,x)=>{if(x){const{sizeGiB:y,sizeTiB:E}=f(T,!0);return y<1?`${Math.round(T)} MB`:y<1024?`${y.toFixed(2)} GiB`:`${E.toFixed(2)} TiB`}else{const{sizeGB:y,sizeTB:E}=f(T,!1);return y<1?`${Math.round(T)} MB`:y<1e3?`${y.toFixed(2)} GB`:`${E.toFixed(2)} TB`}},b=(T,x)=>`${T.toLocaleString()} MB`;if(!t)return a.jsx("div",{className:"bg-dark-secondary rounded-xl p-6 shadow-lg",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(fy,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Ready to Calculate"}),a.jsx("p",{className:"text-gray-500",children:"Select your codec settings to see file size estimates"})]})});const N=t.bitrateMbps*60/8,C=N*60;return e.hours*3600+e.minutes*60+e.seconds,a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 shadow-lg fade-in-up",children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-6 flex items-center",children:[a.jsx(fy,{className:"h-5 w-5 mr-2 text-green-400"}),"Calculation Results"]}),a.jsxs("div",{className:"bg-blue-600/10 border border-blue-600/20 rounded-lg p-4 mb-6",children:[a.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(xd,{className:"h-4 w-4 text-blue-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-blue-400",children:"Video Duration"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"number",min:"0",value:e.hours,onChange:T=>d("hours",T.target.value),className:"w-12 px-2 py-1 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-400",children:"h"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"number",min:"0",max:"59",value:e.minutes,onChange:T=>d("minutes",T.target.value),className:"w-12 px-2 py-1 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-400",children:"m"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"number",min:"0",max:"59",value:e.seconds,onChange:T=>d("seconds",T.target.value),className:"w-12 px-2 py-1 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-400",children:"s"})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-medium text-blue-400 mb-2",children:"Display Units"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>u(!c),className:"p-1 rounded-full hover:bg-blue-600/20 transition-colors",title:"Click for unit explanation",children:a.jsx(rr,{className:"h-4 w-4 text-blue-400 hover:text-blue-300"})}),c&&a.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-80 p-3 bg-dark-primary border border-gray-600 rounded-lg shadow-lg z-50",children:[a.jsxs("div",{className:"text-xs text-gray-300 space-y-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-blue-400",children:"GB (Decimal):"})," Uses 1000-based units (1 GB = 1,000 MB). This is how storage manufacturers typically advertise drive capacity."]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-purple-400",children:"GiB (Binary):"})," Uses 1024-based units (1 GiB = 1,024 MB). This is how operating systems typically report file sizes."]}),a.jsx("div",{className:"text-gray-400 text-xs",children:'Example: A "1TB" drive shows as ~931 GiB in your OS due to this difference.'})]}),a.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-600"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`text-sm ${i?"text-gray-400":"text-blue-400 font-medium"}`,children:"GB"}),a.jsx("button",{onClick:()=>o(!i),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-dark-secondary ${i?"bg-purple-600":"bg-blue-600"}`,children:a.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${i?"translate-x-5":"translate-x-1"}`})}),a.jsx("span",{className:`text-sm ${i?"text-purple-400 font-medium":"text-gray-400"}`,children:"GiB"})]})]})]})]}),a.jsxs("div",{className:"md:hidden space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(xd,{className:"h-4 w-4 text-blue-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-blue-400",children:"Video Duration"})]}),a.jsxs("div",{className:"flex items-center space-x-3 justify-center",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"number",min:"0",value:e.hours,onChange:T=>d("hours",T.target.value),className:"w-14 px-2 py-2 bg-dark-primary border border-gray-700 rounded text-white text-base focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-400",children:"h"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"number",min:"0",max:"59",value:e.minutes,onChange:T=>d("minutes",T.target.value),className:"w-14 px-2 py-2 bg-dark-primary border border-gray-700 rounded text-white text-base focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-400",children:"m"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("input",{type:"number",min:"0",max:"59",value:e.seconds,onChange:T=>d("seconds",T.target.value),className:"w-14 px-2 py-2 bg-dark-primary border border-gray-700 rounded text-white text-base focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-400",children:"s"})]})]})]}),a.jsxs("div",{className:"border-t border-blue-600/20 pt-4",children:[a.jsx("div",{className:"text-sm font-medium text-blue-400 mb-3 text-center",children:"Display Units"}),a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>u(!c),className:"p-2 rounded-full hover:bg-blue-600/20 transition-colors",title:"Click for unit explanation",children:a.jsx(rr,{className:"h-5 w-5 text-blue-400 hover:text-blue-300"})}),c&&a.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-72 p-3 bg-dark-primary border border-gray-600 rounded-lg shadow-lg z-50",children:[a.jsxs("div",{className:"text-xs text-gray-300 space-y-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-blue-400",children:"GB (Decimal):"})," Uses 1000-based units. How storage manufacturers advertise capacity."]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-purple-400",children:"GiB (Binary):"})," Uses 1024-based units. How operating systems report file sizes."]})]}),a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-600"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`text-sm ${i?"text-gray-400":"text-blue-400 font-medium"}`,children:"GB"}),a.jsx("button",{onClick:()=>o(!i),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-dark-secondary ${i?"bg-purple-600":"bg-blue-600"}`,children:a.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${i?"translate-x-5":"translate-x-1"}`})}),a.jsx("span",{className:`text-sm ${i?"text-purple-400 font-medium":"text-gray-400"}`,children:"GiB"})]})]})]})]})]}),a.jsx("div",{className:"bg-dark-primary rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-gray-400",children:"Bitrate:"}),a.jsxs("span",{className:"text-xl font-bold text-white",children:[t.bitrateMbps," Mbps"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-gray-400",children:"File Size:"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`text-xl font-bold ${i?"text-purple-400":"text-green-400"}`,children:g(t.fileSizeMB,i)}),a.jsxs("div",{className:"text-xs text-gray-400",children:["(",b(t.fileSizeMB),")"]})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Per Minute"}),a.jsx("div",{className:"text-lg font-semibold text-white",children:g(N,i)})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Per Hour"}),a.jsx("div",{className:"text-lg font-semibold text-white",children:g(C,i)})]})]}),a.jsxs("div",{className:"bg-blue-600/10 border border-blue-600/20 rounded-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Ps,{className:"h-5 w-5 text-blue-400 mr-2"}),a.jsx("h3",{className:"text-lg font-medium text-blue-400",children:"Configuration Summary"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ah,{className:"h-4 w-4 text-blue-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Codec"}),a.jsx("div",{className:"text-white font-medium",children:t.codec.name})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(_c,{className:"h-4 w-4 text-blue-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Variant"}),a.jsx("div",{className:"text-white font-medium",children:t.variant.name})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(bw,{className:"h-4 w-4 text-blue-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Resolution"}),a.jsx("div",{className:"text-white font-medium",children:t.resolution.name})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(xd,{className:"h-4 w-4 text-blue-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Frame Rate"}),a.jsx("div",{className:"text-white font-medium",children:t.frameRate.name})]})]})]})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:m,className:"inline-flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors",children:r?a.jsxs(a.Fragment,{children:[a.jsx(jh,{className:"h-4 w-4"}),a.jsx("span",{children:"Link Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Dh,{className:"h-4 w-4"}),a.jsx("span",{children:"Copy Link to This Calculation"})]})})})]})},_A=({preset:t,isActive:e,onApply:n,onUpdate:r,canDelete:s=!1,onDelete:i})=>{var y,E;const{categories:o}=ea(),[c,u]=R.useState(!1),[d,m]=R.useState(t);R.useEffect(()=>{m(t)},[t]);const f=()=>{m({...t}),u(!0)},g=()=>{r(d),u(!1)},b=()=>{m({...t}),u(!1)},N=d.category?((y=o.find(j=>j.id===d.category))==null?void 0:y.codecs)||[]:[],C=d.codec?((E=N.find(j=>j.id===d.codec))==null?void 0:E.variants)||[]:[],T=j=>{m({...d,category:j,codec:"",variant:""})},x=j=>{m({...d,codec:j,variant:""})};return c?a.jsx("div",{className:"p-4 rounded-lg border-2 border-blue-500 bg-blue-600/10 shadow-lg",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Preset Name"}),a.jsx("input",{type:"text",value:d.name,onChange:j=>m({...d,name:j.target.value}),className:"w-full px-3 py-2 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Enter preset name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Category"}),a.jsxs("select",{value:d.category,onChange:j=>T(j.target.value),className:"w-full px-3 py-2 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select category..."}),o.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Codec"}),a.jsxs("select",{value:d.codec,onChange:j=>x(j.target.value),disabled:!d.category,className:"w-full px-3 py-2 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx("option",{value:"",children:"Select codec..."}),N.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Variant"}),a.jsxs("select",{value:d.variant,onChange:j=>m({...d,variant:j.target.value}),disabled:!d.codec,className:"w-full px-3 py-2 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx("option",{value:"",children:"Select variant..."}),C.map(j=>a.jsx("option",{value:j.name,children:j.name},j.name))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Resolution"}),a.jsx("select",{value:d.resolution,onChange:j=>m({...d,resolution:j.target.value}),className:"w-full px-3 py-2 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:qn.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Frame Rate"}),a.jsx("select",{value:d.frameRate,onChange:j=>m({...d,frameRate:j.target.value}),className:"w-full px-3 py-2 bg-dark-primary border border-gray-700 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:Zt.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2",children:[a.jsx("div",{children:s&&i&&a.jsx("button",{onClick:()=>{confirm("Delete this preset?")&&i()},className:"px-3 py-1.5 text-xs bg-red-600 hover:bg-red-700 rounded text-white transition-colors",children:a.jsx(Sw,{className:"h-3 w-3"})})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:b,className:"px-3 py-1.5 text-xs bg-gray-600 hover:bg-gray-700 rounded text-white transition-colors",children:a.jsx(ur,{className:"h-3 w-3"})}),a.jsx("button",{onClick:g,disabled:!d.name||!d.category||!d.codec||!d.variant,className:"px-3 py-1.5 text-xs bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed rounded text-white transition-colors",children:a.jsx(ou,{className:"h-3 w-3"})})]})]})]})}):a.jsxs("button",{onClick:n,className:`
        relative p-4 rounded-lg border-2 transition-all duration-200 text-left group hover-lift w-full
        ${e?"border-blue-500 bg-blue-600/20 shadow-lg":"border-gray-700 bg-dark-secondary hover:border-blue-400 hover:bg-blue-600/10"}
      `,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:`font-semibold text-sm ${e?"text-blue-300":"text-white group-hover:text-blue-300"}`,children:t.name}),a.jsxs("div",{className:"flex items-center space-x-1",children:[e&&a.jsx(_c,{className:"h-4 w-4 text-blue-400"}),a.jsx("button",{onClick:j=>{j.stopPropagation(),f()},className:"p-1 rounded hover:bg-gray-700 transition-colors opacity-0 group-hover:opacity-100",title:"Edit preset",children:a.jsx(Ew,{className:"h-3 w-3 text-gray-400 hover:text-white"})})]})]}),a.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[a.jsxs("div",{children:["Resolution: ",t.resolution]}),a.jsxs("div",{children:["Codec: ",t.variant]})]})]})},bA=()=>{var hr,Hs;const{categories:t,loading:e,error:n}=ea(),{customPresets:r,updatePreset:s,addPreset:i,resetToDefaults:o,deletePreset:c}=xA(),[u,d]=oT(),[m,f]=R.useState(!1),[g,b]=R.useState(""),[N,C]=R.useState(""),[T,x]=R.useState(""),[y,E]=R.useState("1080p"),[j,L]=R.useState("30"),[V,I]=R.useState({hours:1,minutes:0,seconds:0}),[w,_]=R.useState(!1),[S,A]=R.useState(!1),[P,k]=R.useState(!1),[K,ie]=R.useState(0),[ve,ue]=R.useState(!1),[B,Q]=R.useState(!1),[J,de]=R.useState(null);R.useEffect(()=>{if(e||t.length===0)return;const F=u.get("category")||"",le=u.get("codec")||"",_e=u.get("variant")||"",De=u.get("resolution")||"1080p",nt=u.get("framerate")||"30",Ne=parseInt(u.get("hours")||"1"),He=parseInt(u.get("minutes")||"0"),Ln=parseInt(u.get("seconds")||"0");console.log("URL Parameters:",{category:F,codec:le,variant:_e,resolution:De,frameRate:nt});let Jt="",Xt="",Mn="";if(F){const Ut=t.find(un=>un.id===F);if(Ut){if(Jt=F,console.log("Found valid category:",Ut.name),le){const un=Ut.codecs.find(Fn=>Fn.id===le);if(un){if(Xt=le,console.log("Found valid codec:",un.name),_e){const Fn=un.variants.find(ta=>ta.name===_e);Fn?(Mn=_e,console.log("Found valid variant:",Fn.name)):console.log("Variant not found:",_e,"Available variants:",un.variants.map(ta=>ta.name))}}else console.log("Codec not found:",le,"Available codecs:",Ut.codecs.map(Fn=>Fn.id))}}else console.log("Category not found:",F,"Available categories:",t.map(un=>un.id))}const me=qn.find(Ut=>Ut.id===De)?De:"1080p",Ue=Zt.find(Ut=>Ut.id===nt)?nt:"30";console.log("Setting validated values:",{category:Jt,codec:Xt,variant:Mn,resolution:me,frameRate:Ue}),b(Jt),C(Xt),x(Mn),E(me),L(Ue),I({hours:Math.max(0,Ne),minutes:Math.max(0,Math.min(59,He)),seconds:Math.max(0,Math.min(59,Ln))}),A(!0),Jt&&Xt&&Mn&&me&&Ue&&ue(!0)},[t,u,e]),R.useEffect(()=>{if(!(!S||P)&&(g||N||T||y!=="1080p"||j!=="30"||V.hours!==1||V.minutes!==0||V.seconds!==0)){const F=new URLSearchParams;g&&F.set("category",g),N&&F.set("codec",N),T&&F.set("variant",T),y&&y!=="1080p"&&F.set("resolution",y),j&&j!=="30"&&F.set("framerate",j),V.hours!==1&&F.set("hours",V.hours.toString()),V.minutes!==0&&F.set("minutes",V.minutes.toString()),V.seconds!==0&&F.set("seconds",V.seconds.toString()),d(F,{replace:!0})}},[g,N,T,y,j,V,d,S,P]);const se=g?((hr=t.find(F=>F.id===g))==null?void 0:hr.codecs)||[]:[],oe=N?((Hs=se.find(F=>F.id===N))==null?void 0:Hs.variants)||[]:[],$e=T?(()=>{const F=oe.find(De=>De.name===T);if(!F||!F.bitrates)return qn;const le=Object.keys(F.bitrates),_e=qn.filter(De=>{if(le.includes(De.id)){const Ne=F.bitrates[De.id];if(typeof Ne=="number")return Ne>0;if(typeof Ne=="object"&&Ne!==null)return Object.values(Ne).some(He=>typeof He=="number"&&He>0)}return!1});return console.log("Available resolutions for variant:",F.name,_e.map(De=>De.id)),_e})():qn,H=T&&y?(()=>{const F=oe.find(_e=>_e.name===T);if(!F||!F.bitrates)return Zt;const le=F.bitrates[y];if(!le)return Zt;if(typeof le=="number")return le>0?Zt:[];if(typeof le=="object"){const _e=Object.keys(le),De=Zt.filter(nt=>{if(_e.includes(nt.id)){const He=le[nt.id];return typeof He=="number"&&He>0}return!1});return console.log("Available frame rates for",F.name,"at",y,":",De.map(nt=>nt.id)),De}return Zt})():Zt,Y=(F,le,_e=100)=>{const De=Date.now();if(P||De-K<500){console.log(`Auto-selection throttled for ${F}`);return}console.log(`Auto-selecting ${F}`),k(!0),ie(De),setTimeout(()=>{try{le()}catch(nt){console.error(`Error during auto-selection of ${F}:`,nt)}setTimeout(()=>{k(!1)},200)},_e)};R.useEffect(()=>{!S||P||g&&!se.find(F=>F.id===N)&&(console.log("Resetting codec and variant due to category change"),C(""),x(""))},[g,se,N,S,P]),R.useEffect(()=>{!S||P||N&&!oe.find(F=>F.name===T)&&(console.log("Resetting variant due to codec change"),x(""))},[N,oe,T,S,P]),R.useEffect(()=>{if(!(!S||P)&&N&&!T&&oe.length===1){const F=oe[0];F.bitrates&&Object.keys(F.bitrates).length>0&&Y("variant",()=>{console.log("Auto-selecting variant:",F.name),x(F.name)})}},[N,T,oe,S,P]),R.useEffect(()=>{!S||P||T&&y&&!$e.find(le=>le.id===y)&&$e.length>0&&(console.log("Resetting resolution due to variant change, available:",$e.map(le=>le.id)),E($e[0].id))},[T,$e,y,S,P]),R.useEffect(()=>{!S||P||T&&y&&!H.find(le=>le.id===j)&&H.length>0&&(H.length===1?Y("frameRate",()=>{console.log("Auto-selecting frame rate:",H[0].id),L(H[0].id)}):(console.log("Resetting frame rate due to resolution change, available:",H.map(le=>le.id)),L(H[0].id)))},[T,y,H,j,S,P]);const xe=async()=>{try{const F=r1(g,N,T,y,j,V);await navigator.clipboard.writeText(F),_(!0),setTimeout(()=>_(!1),2e3),ht.trackShareLink()}catch(F){console.error("Failed to copy URL:",F)}},Ie=F=>{k(!0),b(F.category),C(F.codec),x(F.variant),E(F.resolution),L(F.frameRate),setTimeout(()=>{k(!1)},300),ht.trackPresetUsage(F.name)},Ee=(F,le)=>{s(F,le)},St=()=>{if(!g||!N||!T){alert("Please configure a complete codec setup first");return}const F={id:`preset-${Date.now()}`,name:"New Preset",category:g,codec:N,variant:T,resolution:y,frameRate:j};i(F)},lt=()=>{confirm("Reset all presets to defaults? This cannot be undone.")&&o()},Qt=()=>{if(!g||!N||!T||!y)return console.log("Missing required fields for calculation:",{category:g,codec:N,variant:T,resolution:y}),null;try{const F=t.find(me=>me.id===g),le=F==null?void 0:F.codecs.find(me=>me.id===N),_e=le==null?void 0:le.variants.find(me=>me.name===T),De=Zt.find(me=>me.id===j),nt=qn.find(me=>me.id===y);if(!_e||!De||!nt)return console.log("Could not find required objects:",{variant:!!_e,frameRate:!!De,resolution:!!nt}),null;if(!_e.bitrates||typeof _e.bitrates!="object")return console.error("Variant has no bitrates:",_e.name),null;console.log("Calculating with:",{variant:_e.name,resolution:y,frameRate:j,bitrates:_e.bitrates});let Ne;const He=_e.bitrates[y];if(!He)return console.log("No bitrates found for resolution:",y),console.log("Available resolutions:",Object.keys(_e.bitrates)),null;if(typeof He=="number")Ne=He,console.log("Using simple bitrate:",Ne);else if(typeof He=="object"&&He!==null){if(Ne=He[j],console.log("Frame rate specific bitrates:",He),console.log("Selected frame rate:",j),console.log("Found bitrate:",Ne),!Ne||typeof Ne!="number"){const me=Object.keys(He);if(console.log("Available frame rates:",me),me.length>0){const Ue=me[0];Ne=He[Ue],console.log("Using fallback frame rate:",Ue,"with bitrate:",Ne)}else return console.log("No frame rates available"),null}}else return console.error("Invalid bitrates format:",He),null;if(!Ne||Ne<=0||typeof Ne!="number")return console.log("Invalid bitrate:",Ne),null;const Ln=V.hours*3600+V.minutes*60+V.seconds;if(Ln<=0)return console.log("Invalid duration:",Ln),null;const Jt=Ne*Ln/8,Xt=Jt/1024,Mn=Xt/1024;return console.log("Calculation result:",{bitrateMbps:Ne,totalSeconds:Ln,fileSizeMB:Jt,fileSizeGB:Xt}),{bitrateMbps:Ne,fileSizeMB:Jt,fileSizeGB:Xt,fileSizeTB:Mn,totalSeconds:Ln,codec:le,variant:_e,resolution:nt,frameRate:De,category:g}}catch(F){return console.error("Error during calculation:",F),null}};return R.useEffect(()=>{if(!(!S||P))if(g&&N&&T&&y&&j){const F=Qt();de(F),Q(!0)}else de(null)},[g,N,T,y,j,V,S,P]),R.useEffect(()=>{ve&&!B&&(de(Qt()),Q(!0),ue(!1))},[ve,B]),R.useEffect(()=>{const F=()=>{f(!1)};if(m)return document.addEventListener("click",F),()=>document.removeEventListener("click",F)},[m]),!S||e?a.jsx("div",{className:"min-h-screen bg-dark-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:e?"Loading codec data from Firebase...":"Loading calculator..."}),n&&a.jsxs("p",{className:"text-red-400 text-sm mt-2",children:["Error: ",n]}),e&&a.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[a.jsx("p",{children:"Connecting to Firebase database..."}),a.jsxs("p",{children:["Categories loaded: ",t.length]})]})]})}):!e&&t.length===0&&n?a.jsx("div",{className:"min-h-screen bg-dark-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsxs("div",{className:"text-red-400 mb-4",children:[a.jsx(As,{className:"h-16 w-16 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold mb-2",children:"Unable to Load Codec Data"}),a.jsx("p",{className:"text-sm",children:n})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-colors",children:"Retry"}),a.jsx("div",{className:"text-xs text-gray-400",children:a.jsx("p",{children:"If this problem persists, please contact the administrator."})})]})]})}):a.jsxs("div",{className:"min-h-screen bg-dark-primary relative",children:[a.jsx("header",{className:"border-b border-gray-800 bg-dark-secondary/50 backdrop-blur-sm relative z-30",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ah,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-400"}),a.jsxs("h1",{className:"text-lg sm:text-xl font-semibold text-white",children:[a.jsx("span",{className:"hidden sm:inline",children:"Video File Size Calculator"}),a.jsx("span",{className:"sm:hidden",children:"VideoCalc"})]})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[a.jsxs("button",{onClick:xe,className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",title:"Copy share link",children:[w?a.jsx(jh,{className:"h-4 w-4 text-green-400"}):a.jsx(Dh,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:w?"Copied!":"Share"})]}),a.jsxs(Se,{to:"/codec-data",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",title:"Browse Codec Database",onClick:()=>ht.trackCodecDatabaseView(),children:[a.jsx(vn,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Database"})]}),a.jsxs(Se,{to:"/about",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",title:"About",children:[a.jsx(rr,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"About"})]}),a.jsxs(Se,{to:"/admin",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",title:"Admin Panel",children:[a.jsx(Ps,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Admin"})]})]}),a.jsx("div",{className:"md:hidden",children:a.jsx("button",{onClick:F=>{F.stopPropagation(),f(!m)},className:"p-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",title:"Menu",children:m?a.jsx(ur,{className:"h-5 w-5 text-gray-400"}):a.jsx(ko,{className:"h-5 w-5 text-gray-400"})})})]}),m&&a.jsx("div",{className:"md:hidden absolute top-full left-0 right-0 bg-dark-secondary border-b border-gray-800 shadow-lg z-40",onClick:F=>F.stopPropagation(),children:a.jsxs("div",{className:"px-4 py-3 space-y-2",children:[a.jsxs("button",{onClick:()=>{xe(),f(!1)},className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors text-left",children:[w?a.jsx(jh,{className:"h-5 w-5 text-green-400"}):a.jsx(Dh,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:w?"Link Copied!":"Share Calculation"})]}),a.jsxs(Se,{to:"/codec-data",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>{ht.trackCodecDatabaseView(),f(!1)},children:[a.jsx(vn,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:"Codec Database"})]}),a.jsxs(Se,{to:"/about",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>f(!1),children:[a.jsx(rr,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:"About"})]}),a.jsxs(Se,{to:"/admin",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>f(!1),children:[a.jsx(Ps,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:"Admin Panel"})]})]})})]})}),a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-indigo-900/20 border-b border-gray-800",children:[a.jsx("div",{className:"absolute inset-0 opacity-30",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0)",backgroundSize:"20px 20px"}})}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h1",{className:"text-3xl sm:text-5xl md:text-6xl font-bold text-white mb-4 sm:mb-6 tracking-tight",children:[a.jsx("span",{className:"block sm:inline",children:"Video File Size"}),a.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400",children:"Calculator"})]}),a.jsx("p",{className:"text-base sm:text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed px-4",children:"Professional-grade file size estimation for video production workflows. Calculate storage requirements for any codec, resolution, and duration."}),a.jsxs("div",{className:"mt-6 sm:mt-8 flex flex-wrap items-center justify-center gap-4 sm:gap-6 text-xs sm:text-sm text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),a.jsx("span",{children:"Professional Codecs"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),a.jsx("span",{children:"RAW & Cinema Formats"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full"}),a.jsx("span",{children:"Broadcast Standards"})]})]})]})})]}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 relative z-10",children:[a.jsx("div",{className:"mb-6 sm:mb-8",children:a.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/30 rounded-xl p-4 sm:p-6 shadow-lg",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Iw,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-400 mr-2 sm:mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white",children:"Quick Start Presets"}),a.jsx("p",{className:"text-gray-300 text-xs sm:text-sm mt-1",children:"Customize your favorite workflow configurations"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[r.length<8&&a.jsxs("button",{onClick:St,disabled:!g||!N||!T,className:"flex items-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white text-xs sm:text-sm transition-colors",title:"Add current configuration as preset",children:[a.jsx(Nw,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Add Preset"}),a.jsx("span",{className:"sm:hidden",children:"Add"})]}),a.jsxs("button",{onClick:lt,className:"flex items-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg text-white text-xs sm:text-sm transition-colors",title:"Reset to defaults",children:[a.jsx(um,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:r.map((F,le)=>{const _e=g===F.category&&N===F.codec&&T===F.variant&&y===F.resolution&&j===F.frameRate;return a.jsx(_A,{preset:F,isActive:_e,onApply:()=>Ie(F),onUpdate:De=>Ee(le,De),canDelete:r.length>4,onDelete:()=>{confirm("Delete this preset?")&&c(le)}},F.id)})}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-xs text-gray-400",children:"Your presets are saved locally in your browser"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-4 sm:p-6 shadow-lg hover-lift",children:[a.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-white mb-4 sm:mb-6 flex items-center",children:[a.jsx(Ah,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-blue-400"}),"Codec Settings"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Na,{label:"Codec Category",value:g,onChange:b,options:t.map(F=>({value:F.id,label:F.name,description:F.description})),placeholder:"Select category..."}),a.jsx(Na,{label:"Video Codec",value:N,onChange:C,options:se.map(F=>({value:F.id,label:F.name,description:F.description})),placeholder:"Select codec...",disabled:!g}),a.jsx(Na,{label:"Codec Variant",value:T,onChange:x,options:oe.map(F=>({value:F.name,label:F.name,description:F.description})),placeholder:oe.length===1?"Auto-selected":"Select variant...",disabled:!N||oe.length===0})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-4 sm:p-6 shadow-lg hover-lift",children:[a.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-white mb-4 sm:mb-6 flex items-center",children:[a.jsx(bw,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-blue-400"}),"Video Specifications"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Na,{label:"Resolution",value:y,onChange:E,options:$e.map(F=>({value:F.id,label:F.name,description:`${F.category} - ${F.width}×${F.height}`})),placeholder:"Select resolution...",disabled:!T||$e.length===0}),a.jsx(Na,{label:"Frame Rate",value:j,onChange:L,options:H.map(F=>({value:F.id,label:F.name,description:F.category})),placeholder:H.length===1?"Auto-selected":"Select frame rate...",disabled:!T||!y||H.length===0})]})]})]}),a.jsx("div",{className:"lg:sticky lg:top-8",children:a.jsx(wA,{results:J,duration:V,onDurationChange:I})})]})]}),a.jsx("footer",{className:"border-t border-gray-800 bg-dark-secondary/30 backdrop-blur-sm mt-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"text-center sm:text-left",children:[a.jsxs("p",{className:"text-gray-400 text-sm",children:["© 2025 Time Lapse Technologies LLC. Supported by"," ",a.jsx("a",{href:"https://mediasupplychain.org",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"mediasupplychain.org"})]}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Free forever for the media industry"})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("a",{href:"https://bolt.new",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-600/20 to-blue-600/20 border border-purple-500/30 rounded-lg hover:from-purple-600/30 hover:to-blue-600/30 hover:border-purple-400/50 transition-all duration-200 hover:scale-105",title:"Built with Bolt - AI-powered web development",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-purple-400 to-blue-400 rounded flex items-center justify-center",children:a.jsx("svg",{viewBox:"0 0 24 24",className:"w-3 h-3 text-white fill-current",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M13 0L0 13l7 7 13-13L13 0zm-1 6l4 4-4 4-4-4 4-4z"})})}),a.jsx("span",{className:"text-sm font-medium text-gray-300 group-hover:text-white transition-colors",children:"Built with Bolt"})]}),a.jsx(ww,{className:"h-3 w-3 text-gray-400 group-hover:text-gray-300 transition-colors"})]})})]})})})]})},EA=({onAuthSuccess:t})=>{const[e,n]=R.useState(!1),[r,s]=R.useState(""),[i,o]=R.useState(""),c="dave@timelapsetech.com,dgklee@gmail.com".split(",").map(d=>d.trim()).filter(Boolean);R.useEffect(()=>{const d=async()=>{try{const f=await it.handleRedirectSignInResult();if(f){if(!c.includes(f.email)){s(`Access denied. Your email (${f.email}) is not authorized for admin access.`),await it.signOut();return}sessionStorage.setItem("adminAuth",JSON.stringify({id:f.uid,name:f.displayName,email:f.email,picture:f.photoURL})),t();return}}catch(f){console.error("Redirect sign-in error:",f),f instanceof Error?s(`Sign in failed: ${f.message}`):s("Sign in failed. Please try again.")}},m=async()=>{try{await it.testConnection()||o("Firebase connection failed. Please check Firebase configuration.")}catch(f){console.error("Firebase config check failed:",f),o("Firebase is not properly configured. Please check the setup instructions.")}};d(),m()},[]),R.useEffect(()=>{},[c]);const u=async()=>{if(c.length===0){s("Admin emails not configured. Please contact the system administrator.");return}if(i){s("Firebase is not properly configured. Please check the setup instructions below.");return}n(!0),s("");try{const d=await it.signInWithGoogle();if(d===null){n(!0);return}if(!c.includes(d.email)){s(`Access denied. Your email (${d.email}) is not authorized for admin access.`),await it.signOut(),n(!1);return}sessionStorage.setItem("adminAuth",JSON.stringify({id:d.uid,name:d.displayName,email:d.email,picture:d.photoURL})),t()}catch(d){console.error("Sign in error:",d),d instanceof Error?d.message.includes("auth/api-key-not-valid")?s("Firebase API key is not valid. Please check Firebase configuration."):d.message.includes("auth/unauthorized-domain")?s("Domain not authorized. Please add localhost:5173 to Firebase authorized domains in Authentication → Settings → Authorized domains."):d.message.includes("popup-closed-by-user")||d.message.includes("auth/popup-blocked")?s("Popup was blocked or closed. Redirecting to sign in page..."):s(`Sign in failed: ${d.message}`):s("Sign in failed. Please try again."),n(!1)}};return c.length===0?a.jsx("div",{className:"min-h-screen bg-dark-primary flex items-center justify-center px-4",children:a.jsx("div",{className:"max-w-md w-full",children:a.jsxs("div",{className:"bg-dark-secondary rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(sr,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Configuration Error"}),a.jsx("p",{className:"text-gray-400",children:"Admin emails are not configured"})]}),a.jsx("div",{className:"bg-red-600/10 border border-red-600/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ur,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-400 font-medium",children:"Missing Configuration"}),a.jsxs("div",{className:"text-red-300 text-sm mt-1",children:[a.jsx("p",{children:"Environment variable needed:"}),a.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1",children:a.jsxs("li",{children:[a.jsx("code",{children:"VITE_ADMIN_EMAILS"})," - Comma-separated admin emails"]})}),a.jsxs("p",{className:"mt-2",children:[a.jsx("strong",{children:"For Netlify:"})," Set this in your site's Environment Variables section."]}),a.jsxs("p",{className:"mt-1",children:[a.jsx("strong",{children:"For local development:"})," Add it to your .env file."]})]})]})]})})]})})}):a.jsx("div",{className:"min-h-screen bg-dark-primary flex items-center justify-center px-4",children:a.jsx("div",{className:"max-w-md w-full",children:a.jsxs("div",{className:"bg-dark-secondary rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(sr,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Admin Access"}),a.jsx("p",{className:"text-gray-400",children:"Sign in with your authorized Google account"})]}),r&&a.jsx("div",{className:"mb-6 bg-red-600/10 border border-red-600/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ur,{className:"h-5 w-5 text-red-400 mr-2 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-400 font-medium",children:"Authentication Error"}),a.jsx("p",{className:"text-red-300 text-sm mt-1",children:r})]})]})}),i&&a.jsx("div",{className:"mb-6 bg-yellow-600/10 border border-yellow-600/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ur,{className:"h-5 w-5 text-yellow-400 mr-2 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-yellow-400 font-medium",children:"Configuration Issue"}),a.jsx("p",{className:"text-yellow-300 text-sm mt-1",children:i})]})]})}),a.jsx("button",{onClick:u,disabled:e||!!i,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white font-medium transition-colors flex items-center justify-center space-x-2",children:e?a.jsx("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(xT,{className:"h-5 w-5"}),a.jsx("span",{children:"Sign in with Google"})]})}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-600/10 border border-blue-600/20 rounded-lg",children:[a.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:"Admin Access Requirements"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[a.jsx("li",{children:"• Must use an authorized Google account"}),a.jsx("li",{children:"• Contact system administrator to add your email"}),a.jsx("li",{children:"• Access is logged and monitored"})]})]})]})})})},NA="modulepreload",TA=function(t){return"/"+t},B0={},IA=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=TA(u),u in B0)return;B0[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":NA,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((g,b)=>{f.addEventListener("load",g),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},$0=({variant:t,onSave:e,onCancel:n,isLoading:r=!1,isNew:s=!1})=>{const[i,o]=R.useState({name:t.name||"",description:t.description||"",bitrates:t.bitrates||{}}),[c,u]=R.useState(""),[d,m]=R.useState({});R.useEffect(()=>{try{u(JSON.stringify(i.bitrates,null,2))}catch{u("{}")}},[]);const f=()=>{const N={};i.name.trim()||(N.name="Variant name is required");try{const C=JSON.parse(c);if(typeof C!="object"||C===null)N.bitrates="Bitrates must be a valid JSON object";else for(const[T,x]of Object.entries(C))if(typeof x=="number"){if(x<=0){N.bitrates=`Invalid bitrate for ${T}: must be positive`;break}}else if(typeof x=="object"&&x!==null){for(const[y,E]of Object.entries(x))if(typeof E!="number"||E<=0){N.bitrates=`Invalid bitrate for ${T}@${y}: must be a positive number`;break}}else{N.bitrates=`Invalid bitrate format for ${T}`;break}}catch{N.bitrates="Invalid JSON format for bitrates"}return m(N),Object.keys(N).length===0},g=()=>{if(f())try{const N=JSON.parse(c),C={...i,bitrates:N};e(C)}catch{m({bitrates:"Failed to parse bitrates JSON"})}},b=N=>{u(N),d.bitrates&&m({...d,bitrates:""})};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-white font-medium",children:s?"Add New Variant":"Edit Variant"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:g,disabled:r,className:"flex items-center space-x-1 px-3 py-1.5 bg-green-600 hover:bg-green-700 disabled:opacity-50 rounded text-white text-sm transition-colors",children:[r?a.jsx(In,{className:"h-3 w-3 animate-spin"}):a.jsx(ou,{className:"h-3 w-3"}),a.jsx("span",{children:"Save"})]}),a.jsxs("button",{onClick:n,disabled:r,className:"flex items-center space-x-1 px-3 py-1.5 bg-gray-600 hover:bg-gray-700 disabled:opacity-50 rounded text-white text-sm transition-colors",children:[a.jsx(ur,{className:"h-3 w-3"}),a.jsx("span",{children:"Cancel"})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Variant Name *"}),a.jsx("input",{type:"text",value:i.name,onChange:N=>{o({...i,name:N.target.value}),d.name&&m({...d,name:""})},className:`w-full px-3 py-2 bg-gray-700 border rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.name?"border-red-500":"border-gray-600"}`,placeholder:"Enter variant name",disabled:r}),d.name&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:d.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),a.jsx("input",{type:"text",value:i.description||"",onChange:N=>o({...i,description:N.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter variant description (optional)",disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Bitrates Configuration *"}),a.jsx("textarea",{value:c,onChange:N=>b(N.target.value),className:`w-full px-3 py-2 bg-gray-700 border rounded-lg text-white text-sm font-mono focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.bitrates?"border-red-500":"border-gray-600"}`,placeholder:'{"1080p": {"30": 25, "60": 50}, "4K": {"24": 100}}',rows:6,disabled:r}),d.bitrates&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:d.bitrates}),a.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:["JSON format: ",'{"resolution": {"frameRate": bitrate}} or {"resolution": bitrate}']})]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[a.jsx("h5",{className:"text-gray-300 text-sm font-medium mb-2",children:"Example Bitrates:"}),a.jsx("pre",{className:"text-xs text-gray-400 font-mono",children:`{
  "1080p": {
    "24": 25,
    "30": 30,
    "60": 50
  },
  "4K": {
    "24": 100,
    "30": 120
  }
}`})]})]})},SA=()=>{const{categories:t,loading:e,error:n,refreshCategories:r}=ea(),[s,i]=R.useState(!1),[o,c]=R.useState(!1),[u,d]=R.useState("idle"),[m,f]=R.useState("idle"),[g,b]=R.useState(""),[N,C]=R.useState(null),[T,x]=R.useState(null),[y,E]=R.useState({}),[j,L]=R.useState(!1),[V,I]=R.useState(!1),[w,_]=R.useState({id:"",name:"",description:""}),[S,A]=R.useState(new Set),[P,k]=R.useState(null),[K,ie]=R.useState(null),[ve,ue]=R.useState(!1),B=async()=>{if(confirm("This will import the default codec data to Firebase. This will replace existing data. Continue?")){i(!0),d("idle");try{const{defaultCodecData:H}=await IA(async()=>{const{defaultCodecData:Y}=await import("./codecData-BYhqU_tg.js");return{defaultCodecData:Y}},[]);await it.importCodecData(H),await r(),d("success"),b("Default codec data imported successfully!")}catch(H){console.error("Import failed:",H),d("error"),b(H instanceof Error?H.message:"Import failed")}finally{i(!1),setTimeout(()=>{d("idle"),b("")},5e3)}}},Q=async()=>{c(!0),f("idle");try{const H=await it.exportCodecData(),Y=JSON.stringify({metadata:{exportDate:new Date().toISOString(),source:"Firebase",totalCategories:H.length,totalCodecs:H.reduce((St,lt)=>St+lt.codecs.length,0),totalVariants:H.reduce((St,lt)=>St+lt.codecs.reduce((Qt,hr)=>Qt+hr.variants.length,0),0)},categories:H},null,2),xe=new Blob([Y],{type:"application/json"}),Ie=URL.createObjectURL(xe),Ee=document.createElement("a");Ee.href=Ie,Ee.download=`firebase-codec-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(Ie),f("success"),b("Data exported successfully!")}catch(H){console.error("Export failed:",H),f("error"),b(H instanceof Error?H.message:"Export failed")}finally{c(!1),setTimeout(()=>{f("idle"),b("")},5e3)}},J=H=>{var Ie;const Y=(Ie=H.target.files)==null?void 0:Ie[0];if(!Y)return;const xe=new FileReader;xe.onload=async Ee=>{var St;try{const lt=JSON.parse((St=Ee.target)==null?void 0:St.result),Qt=lt.categories||lt;if(!Array.isArray(Qt))throw new Error("Invalid file format");confirm(`Import ${Qt.length} categories to Firebase? This will replace existing data.`)&&(i(!0),await it.importCodecData(Qt),await r(),d("success"),b("Data imported successfully!"))}catch(lt){console.error("Import failed:",lt),d("error"),b("Failed to import data. Please check the file format.")}finally{i(!1),setTimeout(()=>{d("idle"),b("")},5e3)}},xe.readAsText(Y),H.target.value=""},de=H=>{const Y=new Set(S);Y.has(H)?Y.delete(H):Y.add(H),A(Y)},se=async(H,Y,xe)=>{ue(!0);try{await it.addVariant(H,Y,xe),await r(),ie(null),d("success"),b(`Variant "${xe.name}" added successfully!`)}catch(Ie){console.error("Error adding variant:",Ie),d("error"),b(Ie instanceof Error?Ie.message:"Failed to add variant")}finally{ue(!1),setTimeout(()=>{d("idle"),b("")},3e3)}},oe=async(H,Y,xe,Ie)=>{ue(!0);try{await it.updateVariant(H,Y,xe,Ie),await r(),k(null),d("success"),b(`Variant "${Ie.name}" updated successfully!`)}catch(Ee){console.error("Error updating variant:",Ee),d("error"),b(Ee instanceof Error?Ee.message:"Failed to update variant")}finally{ue(!1),setTimeout(()=>{d("idle"),b("")},3e3)}},$e=async(H,Y,xe)=>{if(confirm(`Are you sure you want to delete the variant "${xe}"? This cannot be undone.`)){ue(!0);try{await it.deleteVariant(H,Y,xe),await r(),d("success"),b(`Variant "${xe}" deleted successfully!`)}catch(Ie){console.error("Error deleting variant:",Ie),d("error"),b(Ie instanceof Error?Ie.message:"Failed to delete variant")}finally{ue(!1),setTimeout(()=>{d("idle"),b("")},3e3)}}};return e&&t.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx(In,{className:"h-8 w-8 animate-spin text-blue-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Loading codec data from Firebase..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(vn,{className:"h-6 w-6 text-blue-400 mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Firebase Codec Database"}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Manage codec data stored in Firebase Firestore"})]})]}),a.jsxs("button",{onClick:r,disabled:e,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-lg text-white transition-colors",children:[a.jsx(In,{className:`h-4 w-4 ${e?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]})]}),n&&a.jsx("div",{className:"mb-4 p-4 bg-red-600/10 border border-red-600/20 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ur,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-400 font-medium",children:"Firebase Error"}),a.jsx("p",{className:"text-red-300 text-sm mt-1",children:n})]})]})}),g&&a.jsx("div",{className:`mb-4 p-4 rounded-lg border ${u==="success"||m==="success"?"bg-green-600/10 border-green-600/20":"bg-red-600/10 border-red-600/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[u==="success"||m==="success"?a.jsx(vc,{className:"h-5 w-5 text-green-400 mr-2"}):a.jsx(Ur,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:`font-medium ${u==="success"||m==="success"?"text-green-400":"text-red-400"}`,children:g})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("button",{onClick:B,disabled:s,className:"flex items-center justify-center space-x-2 p-4 bg-green-600 hover:bg-green-700 disabled:opacity-50 rounded-lg text-white transition-colors",children:[s?a.jsx(In,{className:"h-5 w-5 animate-spin"}):a.jsx(Vh,{className:"h-5 w-5"}),a.jsx("span",{children:"Import Defaults"})]}),a.jsxs("label",{className:"flex items-center justify-center space-x-2 p-4 bg-blue-600 hover:bg-blue-700 rounded-lg text-white cursor-pointer transition-colors",children:[a.jsx(Vh,{className:"h-5 w-5"}),a.jsx("span",{children:"Import JSON"}),a.jsx("input",{type:"file",accept:".json",onChange:J,className:"hidden"})]}),a.jsxs("button",{onClick:Q,disabled:o||t.length===0,className:"flex items-center justify-center space-x-2 p-4 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 rounded-lg text-white transition-colors",children:[o?a.jsx(In,{className:"h-5 w-5 animate-spin"}):a.jsx(cm,{className:"h-5 w-5"}),a.jsx("span",{children:"Export Data"})]}),a.jsxs("button",{onClick:r,disabled:e,className:"flex items-center justify-center space-x-2 p-4 bg-gray-600 hover:bg-gray-700 disabled:opacity-50 rounded-lg text-white transition-colors",children:[a.jsx(In,{className:`h-5 w-5 ${e?"animate-spin":""}`}),a.jsx("span",{children:"Sync"})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Current Database Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.length}),a.jsx("div",{className:"text-sm text-gray-400",children:"Categories"})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.reduce((H,Y)=>H+Y.codecs.length,0)}),a.jsx("div",{className:"text-sm text-gray-400",children:"Codecs"})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-400",children:t.reduce((H,Y)=>H+Y.codecs.reduce((xe,Ie)=>xe+Ie.variants.length,0),0)}),a.jsx("div",{className:"text-sm text-gray-400",children:"Variants"})]})]})]}),t.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Categories in Firebase"}),t.map(H=>a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(pT,{className:"h-6 w-6 text-blue-400"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:H.name}),H.description&&a.jsx("p",{className:"text-gray-400 text-sm",children:H.description})]})]}),a.jsxs("div",{className:"space-y-3",children:[H.codecs.map(Y=>{const xe=`${H.id}-${Y.id}`,Ie=S.has(xe);return a.jsxs("div",{className:"bg-dark-primary rounded-lg",children:[a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(vT,{className:"h-5 w-5 text-green-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-white",children:Y.name}),Y.description&&a.jsx("div",{className:"text-sm text-gray-400",children:Y.description}),a.jsxs("div",{className:"text-xs text-gray-500",children:[Y.variants.length," variant",Y.variants.length!==1?"s":""]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>ie({categoryId:H.id,codecId:Y.id}),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-600/20 rounded-lg transition-colors",title:"Add Variant",children:a.jsx(Nw,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>de(xe),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600/20 rounded-lg transition-colors",title:Ie?"Collapse Variants":"Expand Variants",children:Ie?a.jsx(xw,{className:"h-4 w-4"}):a.jsx(dT,{className:"h-4 w-4"})})]})]})}),Ie&&a.jsxs("div",{className:"border-t border-gray-700 p-4 space-y-3",children:[Y.variants.map((Ee,St)=>a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-3",children:(P==null?void 0:P.categoryId)===H.id&&(P==null?void 0:P.codecId)===Y.id&&(P==null?void 0:P.variantName)===Ee.name?a.jsx($0,{variant:P.variant,onSave:lt=>oe(H.id,Y.id,Ee.name,lt),onCancel:()=>k(null),isLoading:ve}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-white text-sm",children:Ee.name}),Ee.description&&a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:Ee.description}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Object.keys(Ee.bitrates||{}).length," resolution",Object.keys(Ee.bitrates||{}).length!==1?"s":""]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>k({categoryId:H.id,codecId:Y.id,variantName:Ee.name,variant:{...Ee}}),className:"p-1.5 text-blue-400 hover:text-blue-300 hover:bg-blue-600/20 rounded transition-colors",title:"Edit Variant",children:a.jsx(Ew,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>$e(H.id,Y.id,Ee.name),className:"p-1.5 text-red-400 hover:text-red-300 hover:bg-red-600/20 rounded transition-colors",title:"Delete Variant",disabled:Y.variants.length===1,children:a.jsx(Sw,{className:"h-3 w-3"})})]})]})},St)),(K==null?void 0:K.categoryId)===H.id&&(K==null?void 0:K.codecId)===Y.id&&a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-3 border-2 border-blue-500/30",children:a.jsx($0,{variant:{name:"",description:"",bitrates:{}},onSave:Ee=>se(H.id,Y.id,Ee),onCancel:()=>ie(null),isLoading:ve,isNew:!0})})]})]},Y.id)}),H.codecs.length===0&&a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No codecs in this category"})]})]},H.id))]}):a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-8 text-center",children:[a.jsx(vn,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"No Data in Firebase"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Import the default codec data or upload a JSON file to get started."}),a.jsx("button",{onClick:B,disabled:s,className:"px-6 py-3 bg-green-600 hover:bg-green-700 disabled:opacity-50 rounded-lg text-white transition-colors",children:"Import Default Data"})]}),a.jsxs("div",{className:"bg-blue-600/10 border border-blue-600/20 rounded-xl p-6",children:[a.jsx("h3",{className:"text-blue-400 font-medium mb-3",children:"Firebase Integration Instructions"}),a.jsxs("div",{className:"text-sm text-gray-300 space-y-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Import Defaults:"})," Load the built-in codec database into Firebase"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Import JSON:"})," Upload a previously exported codec database file"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Export Data:"})," Download the current Firebase data as a JSON file"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Sync:"})," Refresh the data from Firebase to see latest changes"]})]}),a.jsx("div",{className:"mt-4 p-3 bg-yellow-600/10 border border-yellow-600/20 rounded-lg",children:a.jsxs("p",{className:"text-yellow-400 text-sm",children:[a.jsx("strong",{children:"Note:"})," Make sure your Firebase project is properly configured and accessible. The app will fall back to cached data if Firebase is unavailable."]})})]})]})},kA=()=>{const{categories:t}=ea(),e=()=>[{id:"preset-1",name:"YouTube 1080p",category:"delivery",codec:"h264",variant:"High Profile",resolution:"1080p",frameRate:"30"},{id:"preset-2",name:"Netflix 4K",category:"broadcast",codec:"jpeg2000",variant:"J2K IMF 4K",resolution:"4K",frameRate:"24"},{id:"preset-3",name:"News TV",category:"camera",codec:"xdcam",variant:"XDCAM HD422",resolution:"1080i",frameRate:"29.97"},{id:"preset-4",name:"Episodic TV",category:"professional",codec:"dnxhd",variant:"DNxHD 145",resolution:"1080p",frameRate:"23.98"}],[n,r]=R.useState(e()),[s,i]=R.useState(!1),[o,c]=R.useState({}),[u,d]=R.useState(!0);R.useEffect(()=>{(async()=>{try{d(!0),console.log("Loading default presets from Firebase for admin...");const T=await it.getDefaultPresets();T&&T.length>0?(console.log("Loaded presets from Firebase:",T),r(T)):(console.log("No presets found in Firebase, using hardcoded defaults"),r(e()))}catch(T){console.error("Failed to load presets from Firebase:",T);const x=localStorage.getItem("adminDefaultPresets");if(x)try{const y=JSON.parse(x);console.log("Loaded presets from localStorage fallback"),r(y)}catch{console.log("Failed to parse localStorage presets, using hardcoded defaults"),r(e())}else console.log("Using hardcoded defaults"),r(e())}finally{d(!1)}})()},[]);const m=(C,T)=>{if(!C.name.trim())return"Preset name is required";if(!C.category)return"Category is required";const x=t.find(I=>I.id===C.category);if(!x)return"Invalid category selected";if(!C.codec)return"Codec is required";const y=x.codecs.find(I=>I.id===C.codec);if(!y)return"Invalid codec selected";if(!C.variant)return"Variant is required";const E=y.variants.find(I=>I.name===C.variant);if(!E)return"Invalid variant selected";if(!C.resolution)return"Resolution is required";const j=qn.find(I=>I.id===C.resolution);if(!j)return"Invalid resolution selected";if(!C.frameRate)return"Frame rate is required";const L=Zt.find(I=>I.id===C.frameRate);if(!L)return"Invalid frame rate selected";const V=E.bitrates[C.resolution];if(!V)return`${E.name} doesn't support ${j.name}`;if(typeof V=="object"&&!V[C.frameRate]){const I=Object.keys(V);if(I.length>0)return`${E.name} at ${j.name} doesn't support ${L.name}. Available: ${I.join(", ")}`}return null},f=()=>{const C={};return n.forEach((T,x)=>{const y=m(T);y&&(C[x]=y)}),c(C),Object.keys(C).length===0},g=(C,T)=>{const x=[...n];x[C]={...x[C],...T},T.category&&T.category!==n[C].category&&(x[C].codec="",x[C].variant=""),T.codec&&T.codec!==n[C].codec&&(x[C].variant=""),r(x),i(!0)},b=async()=>{if(!f()){alert("Please fix all validation errors before saving.");return}try{await it.saveAllDefaultPresets(n),localStorage.setItem("adminDefaultPresets",JSON.stringify(n)),localStorage.setItem("defaultPresets",JSON.stringify(n)),i(!1),alert("Default presets saved successfully to Firebase!")}catch(C){console.error("Failed to save presets to Firebase:",C),alert("Failed to save presets to Firebase. Please try again.")}},N=()=>{confirm("Reset all presets to factory defaults? This cannot be undone.")&&(r([{id:"preset-1",name:"YouTube 1080p",category:"delivery",codec:"h264",variant:"High Profile",resolution:"1080p",frameRate:"30"},{id:"preset-2",name:"Netflix 4K",category:"broadcast",codec:"jpeg2000",variant:"J2K IMF 4K",resolution:"4K",frameRate:"24"},{id:"preset-3",name:"News TV",category:"camera",codec:"xdcam",variant:"XDCAM HD422",resolution:"1080i",frameRate:"29.97"},{id:"preset-4",name:"Episodic TV",category:"professional",codec:"dnxhd",variant:"DNxHD 145",resolution:"1080p",frameRate:"23.98"}]),i(!0),c({}))};return R.useEffect(()=>{f()},[n,t]),u?a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"bg-dark-secondary rounded-xl p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Loading default presets from Firebase..."})]})})}):a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Iw,{className:"h-6 w-6 text-yellow-400 mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Default Quick Start Presets"}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Configure the 4 default presets that appear for all users"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg text-white transition-colors",children:[a.jsx(um,{className:"h-4 w-4"}),a.jsx("span",{children:"Reset to Defaults"})]}),a.jsxs("button",{onClick:b,disabled:!s||Object.keys(o).length>0,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white transition-colors",children:[a.jsx(ou,{className:"h-4 w-4"}),a.jsx("span",{children:"Save Changes"})]})]})]}),s&&a.jsx("div",{className:"mb-6 p-4 bg-yellow-600/10 border border-yellow-600/20 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ur,{className:"h-5 w-5 text-yellow-400 mr-2"}),a.jsx("span",{className:"text-yellow-400 font-medium",children:"You have unsaved changes"})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map((C,T)=>{const x=t.find(V=>V.id===C.category),y=(x==null?void 0:x.codecs)||[],E=y.find(V=>V.id===C.codec),j=(E==null?void 0:E.variants)||[],L=o[T];return a.jsx("div",{className:`p-6 rounded-lg border-2 ${L?"border-red-500 bg-red-600/10":"border-gray-700 bg-dark-primary"}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preset Name"}),a.jsx("input",{type:"text",value:C.name,onChange:V=>g(T,{name:V.target.value}),className:"w-full px-3 py-2 bg-dark-secondary border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Enter preset name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),a.jsxs("select",{value:C.category,onChange:V=>g(T,{category:V.target.value}),className:"w-full px-3 py-2 bg-dark-secondary border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select category..."}),t.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Codec"}),a.jsxs("select",{value:C.codec,onChange:V=>g(T,{codec:V.target.value}),disabled:!C.category,className:"w-full px-3 py-2 bg-dark-secondary border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx("option",{value:"",children:"Select codec..."}),y.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Variant"}),a.jsxs("select",{value:C.variant,onChange:V=>g(T,{variant:V.target.value}),disabled:!C.codec,className:"w-full px-3 py-2 bg-dark-secondary border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx("option",{value:"",children:"Select variant..."}),j.map(V=>a.jsx("option",{value:V.name,children:V.name},V.name))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Resolution"}),a.jsxs("select",{value:C.resolution,onChange:V=>g(T,{resolution:V.target.value}),className:"w-full px-3 py-2 bg-dark-secondary border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select resolution..."}),qn.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Frame Rate"}),a.jsxs("select",{value:C.frameRate,onChange:V=>g(T,{frameRate:V.target.value}),className:"w-full px-3 py-2 bg-dark-secondary border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select frame rate..."}),Zt.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]})]}),L&&a.jsx("div",{className:"p-3 bg-red-600/20 border border-red-600/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ur,{className:"h-4 w-4 text-red-400 mr-2"}),a.jsx("span",{className:"text-red-400 text-sm",children:L})]})})]})},C.id)})}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-600/10 border border-blue-600/20 rounded-lg",children:[a.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:"How Default Presets Work"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[a.jsx("li",{children:"• These 4 presets appear for all users when they first visit the calculator"}),a.jsx("li",{children:"• Signed-in users can customize their own presets, but these remain as fallbacks"}),a.jsx("li",{children:"• Changes here affect all new users and users who reset their presets"}),a.jsx("li",{children:"• Make sure all configurations are valid and commonly used workflows"}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Frame Rate Guide:"})," 23.98 fps = Film on TV (episodic/broadcast), 24 fps = True Cinema"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"NTSC Formats:"})," NTSC DV (720×480) for DV cameras, NTSC D1 (720×486) for D1 broadcast"]})]})]})]})})},CA=()=>{const[t,e]=R.useState(""),[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,c]=R.useState("idle"),[u,d]=R.useState(""),[m,f]=R.useState(!1);R.useEffect(()=>{const b="G-NVD93E95GB";if(d(b),b.match(/^G-[A-Z0-9]+$/))f(!0),e(b),r(!0);else{const N=localStorage.getItem("ga_measurement_id"),C=localStorage.getItem("ga_enabled")==="true";N&&(e(N),r(C)),f(!1)}},[]);const g=()=>{if(!m){c("saving");try{if(n&&t){if(!t.match(/^G-[A-Z0-9]+$/)){c("error"),setTimeout(()=>c("idle"),3e3);return}localStorage.setItem("ga_measurement_id",t),localStorage.setItem("ga_enabled","true"),ht.initialize(t)}else localStorage.setItem("ga_enabled","false"),localStorage.removeItem("ga_measurement_id");c("saved"),setTimeout(()=>c("idle"),3e3)}catch(b){console.error("Error saving analytics configuration:",b),c("error"),setTimeout(()=>c("idle"),3e3)}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-4 sm:p-6",children:[a.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-white mb-4 sm:mb-6 flex items-center",children:[a.jsx(yw,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Google Analytics Configuration"]}),m?a.jsx("div",{className:"bg-green-600/10 border border-green-600/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(vc,{className:"h-5 w-5 text-green-400 mr-3 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-green-400 font-medium mb-1",children:"Using Environment Configuration"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Google Analytics is automatically configured from your environment variables."}),a.jsxs("p",{className:"text-gray-400 text-xs mt-2",children:["To use admin panel configuration instead, remove the ",a.jsx("code",{className:"bg-green-600/20 px-1 rounded",children:"VITE_GA_MEASUREMENT_ID"})," environment variable from your site settings."]})]})]})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"enableAnalytics",checked:n,onChange:b=>r(b.target.checked),className:"rounded border-gray-600 bg-dark-primary text-blue-500 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"enableAnalytics",className:"text-gray-300",children:"Enable Google Analytics"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"measurementId",className:"block text-sm text-gray-300",children:"Measurement ID (G-XXXXXXXX)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:s?"text":"password",id:"measurementId",value:t,onChange:b=>e(b.target.value),placeholder:"G-XXXXXXXX",className:"w-full px-4 py-2 bg-dark-primary border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:s?a.jsx(_w,{className:"h-5 w-5"}):a.jsx(au,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:g,disabled:o==="saving",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o==="saving"?a.jsxs("span",{className:"flex items-center",children:[a.jsx(In,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):a.jsxs("span",{className:"flex items-center",children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})}),o==="saved"&&a.jsxs("span",{className:"text-green-400 text-sm flex items-center",children:[a.jsx(vc,{className:"h-4 w-4 mr-1"}),"Configuration saved"]}),o==="error"&&a.jsxs("span",{className:"text-red-400 text-sm flex items-center",children:[a.jsx(Ur,{className:"h-4 w-4 mr-1"}),"Failed to save configuration"]})]})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[a.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Configuration Options"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-600/10 border border-blue-600/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-blue-400 font-medium mb-2",children:"Environment Variables"}),a.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"For better security and persistence across deployments, set up Google Analytics using environment variables:"}),a.jsxs("ol",{className:"list-decimal list-inside text-gray-300 text-sm space-y-2",children:[a.jsx("li",{children:"Go to your site dashboard"}),a.jsx("li",{children:"Navigate to Environment Variables"}),a.jsxs("li",{children:["Add ",a.jsx("code",{className:"bg-blue-600/20 px-1 rounded",children:"VITE_GA_MEASUREMENT_ID"})," with your Google Analytics Measurement ID"]})]})]}),a.jsxs("div",{className:"bg-purple-600/10 border border-purple-600/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-purple-400 font-medium mb-2",children:"Admin Panel Configuration"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Alternatively, you can configure Google Analytics through this admin panel. This setting is stored in your browser's local storage."})]})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Current Status"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Status"}),a.jsx("div",{className:`text-lg font-semibold ${ht.isEnabled()?"text-green-400":"text-gray-400"}`,children:ht.isEnabled()?"Active":"Disabled"})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Measurement ID"}),a.jsx("div",{className:"text-lg font-mono text-white",children:ht.getMeasurementId()||"Not configured"})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Configuration Source"}),a.jsx("div",{className:"text-lg font-semibold text-blue-400",children:ht.getSource()==="environment"?"Environment Variable":ht.getSource()==="admin"?"Admin Panel":"None"})]})]})]})]})},jA=()=>{const t=lm(),{categories:e,updateCategories:n,resetToDefaults:r}=ea(),[s,i]=R.useState(!1),[o,c]=R.useState(null),[u,d]=R.useState("codecs"),[m,f]=R.useState(!1),[g,b]=R.useState(!1),[N,C]=R.useState(!1),[T,x]=R.useState(null),[y,E]=R.useState(!1),[j,L]=R.useState(null);R.useEffect(()=>{const K=sessionStorage.getItem("adminAuth");if(K)try{const ie=JSON.parse(K);c(ie),i(!0),ht.trackAdminAccess()}catch{sessionStorage.removeItem("adminAuth")}},[]);const V=()=>{const K=sessionStorage.getItem("adminAuth");if(K)try{const ie=JSON.parse(K);c(ie),i(!0),ht.trackAdminAccess()}catch{console.error("Failed to parse admin auth data")}},I=()=>{i(!1),c(null),sessionStorage.removeItem("adminAuth"),window.google&&window.google.accounts.id.disableAutoSelect(),t("/")},w=async()=>{b(!0);try{const K={metadata:{exportDate:new Date().toISOString(),exportedBy:(o==null?void 0:o.email)||"unknown",version:"2.0",totalCategories:e.length,totalCodecs:e.reduce((Q,J)=>Q+J.codecs.length,0),totalVariants:e.reduce((Q,J)=>Q+J.codecs.reduce((de,se)=>de+se.variants.length,0),0),description:"Complete Video File Size Calculator Codec Database Export"},categories:e,exportSettings:{includeDescriptions:!0,includeWorkflowNotes:!0,includeBitrates:!0,format:"complete"}},ie=JSON.stringify(K,null,2),ve=new Blob([ie],{type:"application/json"}),ue=URL.createObjectURL(ve),B=document.createElement("a");B.href=ue,B.download=`complete-codec-database-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(ue),ht.trackDataExport("complete-codec-database")}catch(K){console.error("Export failed:",K),alert("Failed to export codec data. Please try again.")}finally{b(!1)}},_=K=>{var ue;const ie=(ue=K.target.files)==null?void 0:ue[0];if(!ie)return;C(!0),x(null);const ve=new FileReader;ve.onload=B=>{var Q;try{const J=JSON.parse((Q=B.target)==null?void 0:Q.result),de=S(J);if(!de.isValid){x({success:!1,message:`Invalid file format: ${de.error}`}),C(!1);return}L(J),E(!0),C(!1)}catch{x({success:!1,message:"Error parsing JSON file. Please check the file format."}),C(!1)}},ve.onerror=()=>{x({success:!1,message:"Error reading file. Please try again."}),C(!1)},ve.readAsText(ie),K.target.value=""},S=K=>{if(!K)return{isValid:!1,error:"No data found"};if(K.categories&&Array.isArray(K.categories)){for(const ie of K.categories){if(!ie.id||!ie.name||!Array.isArray(ie.codecs))return{isValid:!1,error:"Invalid category structure"};for(const ve of ie.codecs){if(!ve.id||!ve.name||!Array.isArray(ve.variants))return{isValid:!1,error:"Invalid codec structure"};for(const ue of ve.variants)if(!ue.name||!ue.bitrates||typeof ue.bitrates!="object")return{isValid:!1,error:"Invalid variant structure"}}}return{isValid:!0}}return Array.isArray(K)?S({categories:K}):{isValid:!1,error:"Unrecognized file format"}},A=()=>{if(j)try{const K=j.categories||j,ie=P(e,K);n(K),x({success:!0,message:"Codec database updated successfully!",details:ie}),E(!1),L(null),ht.trackDataExport("codec-database-import-success")}catch(K){console.error("Import processing failed:",K),x({success:!1,message:"Failed to process import. Please check the data format."})}},P=(K,ie)=>{let ve=0,ue=0,B=0,Q=0,J=0,de=0;return ve=ie.length,B=ie.reduce((se,oe)=>se+oe.codecs.length,0),J=ie.reduce((se,oe)=>se+oe.codecs.reduce(($e,H)=>$e+H.variants.length,0),0),{categoriesAdded:ve,categoriesUpdated:ue,codecsAdded:B,codecsUpdated:Q,variantsAdded:J,variantsUpdated:de}},k=()=>{confirm("Are you sure you want to reset to default codec database? This cannot be undone.")&&(r(),x({success:!0,message:"Database reset to defaults successfully."}))};return s?a.jsxs("div",{className:"min-h-screen bg-dark-primary relative",children:[a.jsx("header",{className:"border-b border-gray-800 bg-dark-secondary/50 backdrop-blur-sm relative z-30",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(Se,{to:"/",className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx(iu,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Back to Calculator"})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-3",children:[a.jsx(sr,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-400"}),a.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-white",children:"Admin Panel"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[o&&a.jsxs("div",{className:"hidden sm:flex items-center space-x-3 px-3 py-2 rounded-lg bg-dark-secondary",children:[a.jsx("img",{src:o.picture,alt:o.name,className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full"}),a.jsxs("div",{className:"hidden md:block",children:[a.jsx("div",{className:"text-xs sm:text-sm text-white font-medium",children:o.name}),a.jsx("div",{className:"text-xs text-gray-400",children:o.email})]})]}),a.jsx("div",{className:"sm:hidden",children:a.jsx("button",{onClick:()=>f(!m),className:"p-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:m?a.jsx(ur,{className:"h-5 w-5 text-gray-400"}):a.jsx(ko,{className:"h-5 w-5 text-gray-400"})})}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[a.jsxs(Se,{to:"/about",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:[a.jsx(rr,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"About"})]}),a.jsxs("button",{onClick:I,className:"flex items-center space-x-2 px-3 sm:px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white transition-colors text-sm",children:[a.jsx(py,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})]}),m&&a.jsx("div",{className:"sm:hidden absolute top-full left-0 right-0 bg-dark-secondary border-b border-gray-800 shadow-lg z-40",children:a.jsxs("div",{className:"px-4 py-3 space-y-2",children:[o&&a.jsxs("div",{className:"flex items-center space-x-3 px-3 py-3 border-b border-gray-700",children:[a.jsx("img",{src:o.picture,alt:o.name,className:"w-6 h-6 rounded-full"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-white font-medium",children:o.name}),a.jsx("div",{className:"text-xs text-gray-400",children:o.email})]})]}),a.jsxs(Se,{to:"/about",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>f(!1),children:[a.jsx(rr,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:"About"})]}),a.jsxs("button",{onClick:()=>{I(),f(!1)},className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-red-600/20 transition-colors text-left",children:[a.jsx(py,{className:"h-5 w-5 text-red-400"}),a.jsx("span",{className:"text-red-400",children:"Logout"})]})]})})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-20",children:a.jsx("div",{className:"border-b border-gray-800",children:a.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto",children:[a.jsx("button",{onClick:()=>d("codecs"),className:`py-4 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${u==="codecs"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`,children:"Firebase Codec Database"}),a.jsx("button",{onClick:()=>d("presets"),className:`py-4 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${u==="presets"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`,children:"Default Presets"}),a.jsx("button",{onClick:()=>d("data"),className:`py-4 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${u==="data"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`,children:"Data Management"}),a.jsx("button",{onClick:()=>d("analytics"),className:`py-4 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${u==="analytics"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`,children:"Analytics Configuration"}),a.jsx("button",{onClick:()=>d("google-analytics"),className:`py-4 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${u==="google-analytics"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`,children:"Google Analytics"})]})})}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 relative z-10",children:[u==="codecs"&&a.jsx(SA,{}),u==="presets"&&a.jsx(kA,{}),u==="google-analytics"&&a.jsx(CA,{}),u==="data"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-4 sm:p-6",children:[a.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-white mb-4 sm:mb-6 flex items-center",children:[a.jsx(vn,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Complete Codec Database Management"]}),a.jsxs("div",{className:"mb-6 p-4 bg-blue-600/10 border border-blue-600/20 rounded-lg",children:[a.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:"Enhanced Import/Export System"}),a.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Export the complete codec database including all categories, codecs, variants, bitrates, and metadata. Import modified versions to automatically update the system with new codecs or changes."}),a.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[a.jsx("li",{children:"• Export includes complete database structure with metadata"}),a.jsx("li",{children:"• Import validates data structure before applying changes"}),a.jsx("li",{children:"• Preview changes before confirming import"}),a.jsx("li",{children:"• Automatic backup of current data before import"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("button",{onClick:w,disabled:g,className:"flex items-center justify-center space-x-2 p-3 sm:p-4 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white transition-colors text-sm",children:[g?a.jsx(In,{className:"h-4 w-4 sm:h-5 sm:w-5 animate-spin"}):a.jsx(cm,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:g?"Exporting...":"Export Complete Database"})]}),a.jsxs("label",{className:`flex items-center justify-center space-x-2 p-3 sm:p-4 bg-green-600 hover:bg-green-700 rounded-lg text-white cursor-pointer transition-colors text-sm ${N?"opacity-50 cursor-not-allowed":""}`,children:[N?a.jsx(In,{className:"h-4 w-4 sm:h-5 sm:w-5 animate-spin"}):a.jsx(Vh,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:N?"Processing...":"Import Database"}),a.jsx("input",{type:"file",accept:".json",onChange:_,disabled:N,className:"hidden"})]}),a.jsxs("button",{onClick:k,className:"flex items-center justify-center space-x-2 p-3 sm:p-4 bg-red-600 hover:bg-red-700 rounded-lg text-white transition-colors text-sm",children:[a.jsx(um,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:"Reset to Defaults"})]})]}),T&&a.jsx("div",{className:`mb-6 p-4 rounded-lg border ${T.success?"bg-green-600/10 border-green-600/20":"bg-red-600/10 border-red-600/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[T.success?a.jsx(vc,{className:"h-5 w-5 text-green-400 mr-2"}):a.jsx(As,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:`font-medium ${T.success?"text-green-400":"text-red-400"}`,children:T.success?"Import Successful":"Import Failed"}),a.jsx("p",{className:`text-sm mt-1 ${T.success?"text-green-300":"text-red-300"}`,children:T.message}),T.details&&a.jsxs("div",{className:"mt-2 text-xs text-gray-300",children:[a.jsxs("p",{children:["Categories: ",T.details.categoriesAdded," added, ",T.details.categoriesUpdated," updated"]}),a.jsxs("p",{children:["Codecs: ",T.details.codecsAdded," added, ",T.details.codecsUpdated," updated"]}),a.jsxs("p",{children:["Variants: ",T.details.variantsAdded," added, ",T.details.variantsUpdated," updated"]})]})]})]})}),y&&j&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-dark-secondary rounded-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-700",children:a.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(mT,{className:"h-5 w-5 mr-2 text-blue-400"}),"Import Preview"]})}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-96",children:a.jsxs("div",{className:"space-y-4",children:[j.metadata&&a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h4",{className:"text-white font-medium mb-2",children:"Import Metadata"}),a.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[a.jsxs("p",{children:["Export Date: ",j.metadata.exportDate||"Unknown"]}),a.jsxs("p",{children:["Version: ",j.metadata.version||"Unknown"]}),a.jsxs("p",{children:["Categories: ",j.metadata.totalCategories||"Unknown"]}),a.jsxs("p",{children:["Codecs: ",j.metadata.totalCodecs||"Unknown"]}),a.jsxs("p",{children:["Variants: ",j.metadata.totalVariants||"Unknown"]})]})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h4",{className:"text-white font-medium mb-2",children:"Categories to Import"}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(j.categories||j).map((K,ie)=>{var ve,ue;return a.jsxs("div",{className:"text-sm text-gray-300 border-l-2 border-blue-500 pl-3",children:[a.jsx("p",{className:"font-medium",children:K.name}),a.jsxs("p",{className:"text-xs text-gray-400",children:[((ve=K.codecs)==null?void 0:ve.length)||0," codecs, ",((ue=K.codecs)==null?void 0:ue.reduce((B,Q)=>{var J;return B+(((J=Q.variants)==null?void 0:J.length)||0)},0))||0," variants"]})]},ie)})})]}),a.jsx("div",{className:"bg-yellow-600/10 border border-yellow-600/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(As,{className:"h-5 w-5 text-yellow-400 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-yellow-400 font-medium",children:"Warning"}),a.jsx("p",{className:"text-yellow-300 text-sm mt-1",children:"This will replace your current codec database. Make sure you have exported a backup if needed."})]})]})})]})}),a.jsxs("div",{className:"p-6 border-t border-gray-700 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>{E(!1),L(null)},className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg text-white transition-colors",children:"Cancel"}),a.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-white transition-colors",children:"Confirm Import"})]})]})})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white mb-4",children:"Current Database Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-dark-primary rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-400",children:e.length}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Categories"})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-400",children:e.reduce((K,ie)=>K+ie.codecs.length,0)}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Codecs"})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-400",children:e.reduce((K,ie)=>K+ie.codecs.reduce((ve,ue)=>ve+ue.variants.length,0),0)}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Variants"})]})]})]})]}),u==="analytics"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-4 sm:p-6",children:[a.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-white mb-4 sm:mb-6 flex items-center",children:[a.jsx(yw,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Analytics Configuration"]}),a.jsx("p",{className:"text-gray-400",children:"Google Analytics is enabled and tracking page views and calculator usage."})]})})]})]}):a.jsx(EA,{onAuthSuccess:V})},AA=()=>{const[t,e]=pi.useState(!1);return a.jsxs("div",{className:"min-h-screen bg-dark-primary relative",children:[a.jsx("header",{className:"border-b border-gray-800 bg-dark-secondary/50 backdrop-blur-sm relative z-30",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs(Se,{to:"/",className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx(iu,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Back to Calculator"})]})}),a.jsx("div",{className:"sm:hidden",children:a.jsx("button",{onClick:()=>e(!t),className:"p-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:t?a.jsx(ur,{className:"h-5 w-5 text-gray-400"}):a.jsx(ko,{className:"h-5 w-5 text-gray-400"})})}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[a.jsxs(Se,{to:"/codec-data",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:[a.jsx(vn,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Database"})]}),a.jsxs(Se,{to:"/admin",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:[a.jsx(vd,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Admin"})]})]})]}),t&&a.jsx("div",{className:"sm:hidden absolute top-full left-0 right-0 bg-dark-secondary border-b border-gray-800 shadow-lg z-40",children:a.jsxs("div",{className:"px-4 py-3 space-y-2",children:[a.jsxs(Se,{to:"/codec-data",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>e(!1),children:[a.jsx(vn,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:"Codec Database"})]}),a.jsxs(Se,{to:"/admin",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>e(!1),children:[a.jsx(vd,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:"Admin Panel"})]})]})})]})}),a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-indigo-900/20 border-b border-gray-800",children:[a.jsx("div",{className:"absolute inset-0 opacity-30",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0)",backgroundSize:"20px 20px"}})}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h1",{className:"text-3xl sm:text-5xl md:text-6xl font-bold text-white mb-4 sm:mb-6 tracking-tight",children:["About This",a.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400",children:"Calculator"})]}),a.jsx("p",{className:"text-base sm:text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"A professional tool for the media industry, built with love and shared freely"})]})})]}),a.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/30 rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[a.jsx(yT,{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-400 mr-3 sm:mr-4"}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Our Mission"})]}),a.jsxs("p",{className:"text-base sm:text-lg text-gray-300 leading-relaxed mb-4 sm:mb-6",children:["This Video File Size Calculator is proudly supported by"," ",a.jsx("a",{href:"https://mediasupplychain.org",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline font-semibold",children:"mediasupplychain.org"})," ","for the benefit of all professionals in the media industry."]}),a.jsxs("div",{className:"bg-green-600/10 border border-green-600/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wc,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-400 mr-2"}),a.jsx("span",{className:"text-green-400 font-semibold text-sm sm:text-base",children:"Forever Free Promise"})]}),a.jsx("p",{className:"text-green-300 mt-2 text-sm sm:text-base",children:"This tool will remain completely free forever. No subscriptions, no hidden costs, no limitations."})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-600/20 to-blue-600/20 border border-green-500/30 rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[a.jsx(my,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-400 mr-3 sm:mr-4"}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Open Source & Community"})]}),a.jsx("p",{className:"text-base sm:text-lg text-gray-300 leading-relaxed mb-4 sm:mb-6",children:"This tool is open source under the GPL 3 license and available for contributions on GitHub. We believe in transparency and community-driven development."}),a.jsx("div",{className:"bg-yellow-600/10 border border-yellow-600/20 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(As,{className:"h-5 w-5 text-yellow-400 mr-2 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-yellow-400 font-medium mb-2",children:"Help Us Improve the Data"}),a.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"We have over 1,000 unique configurations of video bitrates, but that is far from a complete list. Catch an issue or want to suggest an addition? Feel free to open an issue on GitHub, or better yet, make your own updates and open a Pull Request. Let's all work together to make this data accessible to everyone!"})]})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("a",{href:"https://github.com/timelapsetech/videocalc-db",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center space-x-2 px-4 sm:px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg text-white font-medium transition-colors text-sm sm:text-base",children:[a.jsx(my,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:"View on GitHub"})]}),a.jsxs("a",{href:"https://github.com/timelapsetech/videocalculator/issues",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center space-x-2 px-4 sm:px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors text-sm sm:text-base",children:[a.jsx(As,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:"Report an Issue"})]}),a.jsxs("a",{href:"https://github.com/timelapsetech/videocalculator/pulls",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center space-x-2 px-4 sm:px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-white font-medium transition-colors text-sm sm:text-base",children:[a.jsx(gT,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:"Contribute"})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center",children:[a.jsx(vd,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-400 mr-2 sm:mr-3"}),"What Makes This Special"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base",children:"Professional Codecs"}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Comprehensive database of industry-standard codecs including ProRes, DNxHD, RAW formats, and broadcast standards."})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base",children:"Frame Rate Accuracy"}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Precise calculations supporting all professional frame rates from 23.98 to 240 fps."})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base",children:"Workflow Presets"}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Quick-start configurations for common workflows like YouTube delivery, Netflix specs, and broadcast standards."})]})]})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base",children:"Shareable Links"}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Generate shareable URLs for specific calculations to collaborate with team members."})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base",children:"Admin Panel"}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Comprehensive management system for codec database and default presets."})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base",children:"Usage Analytics"}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Track popular configurations and usage patterns to improve the tool."})]})]})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center",children:[a.jsx(vn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-400 mr-2 sm:mr-3"}),"Technical Foundation"]}),a.jsxs("div",{className:"prose prose-invert max-w-none",children:[a.jsx("p",{className:"text-gray-300 leading-relaxed mb-4 text-sm sm:text-base",children:"Built with modern web technologies and designed for accuracy, this calculator uses industry-standard bitrate specifications for each codec variant. The database includes detailed configurations for:"}),a.jsxs("ul",{className:"text-gray-300 space-y-2 mb-6 text-sm sm:text-base",children:[a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),a.jsx("span",{children:"Professional acquisition codecs (ProRes, DNxHD, XDCAM)"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),a.jsx("span",{children:"RAW and cinema formats (BRAW, R3D, Cinema DNG)"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),a.jsx("span",{children:"Broadcast and delivery formats (H.264, H.265, JPEG2000)"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),a.jsx("span",{children:"Camera-native formats from major manufacturers"})]})]}),a.jsx("p",{className:"text-gray-300 leading-relaxed text-sm sm:text-base",children:"All calculations are performed client-side for privacy and speed, with no data sent to external servers."})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-600/20 to-blue-600/20 border border-green-500/30 rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[a.jsx(Rh,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-400 mr-3 sm:mr-4"}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"We Value Your Feedback"})]}),a.jsx("p",{className:"text-base sm:text-lg text-gray-300 leading-relaxed mb-4 sm:mb-6",children:"Your input helps us improve this tool for the entire media community. Whether you have suggestions for new codecs, found an issue, or want to request a feature, we'd love to hear from you."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("a",{href:"mailto:feedback@mediasupplychain.org?subject=Video Calculator Feedback",className:"inline-flex items-center justify-center space-x-2 px-4 sm:px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-white font-medium transition-colors text-sm sm:text-base",children:[a.jsx(Rh,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:"Send Feedback"})]}),a.jsxs("a",{href:"https://mediasupplychain.org",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center space-x-2 px-4 sm:px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors text-sm sm:text-base",children:[a.jsx(Ph,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:"Visit mediasupplychain.org"})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center",children:[a.jsx(wc,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-400 mr-2 sm:mr-3"}),"Built for the Community"]}),a.jsx("p",{className:"text-gray-300 leading-relaxed mb-4 text-sm sm:text-base",children:"This calculator was created by media professionals, for media professionals. It's part of our commitment to building tools that make the industry more efficient and accessible to everyone."}),a.jsx("p",{className:"text-gray-300 leading-relaxed text-sm sm:text-base",children:"Whether you're a freelance editor, a post-production facility, a broadcaster, or a student learning the craft, this tool is here to help you make informed decisions about storage requirements and workflow planning."})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-indigo-600/20 border border-purple-500/30 rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[a.jsx(sr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-400 mr-3 sm:mr-4"}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Privacy & Data Protection"})]}),a.jsx("p",{className:"text-base sm:text-lg text-gray-300 leading-relaxed mb-4 sm:mb-6",children:"We respect your privacy and are committed to protecting your data. We collect anonymous usage statistics to improve the tool, but never collect personal information."}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsxs(Se,{to:"/privacy",className:"inline-flex items-center justify-center space-x-2 px-4 sm:px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg text-white font-medium transition-colors text-sm sm:text-base",children:[a.jsx(sr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{children:"Read Privacy Policy"})]})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 border border-purple-500/30 rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[a.jsx(_c,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-400 mr-3 sm:mr-4"}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Born from Innovation"})]}),a.jsx("p",{className:"text-base sm:text-lg text-gray-300 leading-relaxed mb-4 sm:mb-6",children:"This application was created as part of the Bolt hackathon in July 2025, showcasing the power of modern AI-assisted development tools and collaborative innovation."}),a.jsxs("div",{className:"bg-purple-600/10 border border-purple-600/20 rounded-lg p-4 mb-6",children:[a.jsxs("h3",{className:"text-purple-400 font-medium mb-3 flex items-center",children:[a.jsx(yd,{className:"h-4 w-4 mr-2"}),"AI Tools That Made This Possible"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_c,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"text-gray-300 text-sm",children:"Bolt"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hT,{className:"h-4 w-4 text-green-400"}),a.jsx("span",{className:"text-gray-300 text-sm",children:"Netlify"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(yd,{className:"h-4 w-4 text-purple-400"}),a.jsx("span",{className:"text-gray-300 text-sm",children:"Claude"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(yd,{className:"h-4 w-4 text-orange-400"}),a.jsx("span",{className:"text-gray-300 text-sm",children:"ChatGPT"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ph,{className:"h-4 w-4 text-indigo-400"}),a.jsx("span",{className:"text-gray-300 text-sm",children:"Perplexity"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fT,{className:"h-4 w-4 text-yellow-400"}),a.jsx("span",{className:"text-gray-300 text-sm",children:"Cursor"})]})]})]}),a.jsx("p",{className:"text-sm text-gray-400",children:"This project demonstrates how AI tools can accelerate development while maintaining professional quality and user-focused design. The combination of these technologies enabled rapid prototyping, intelligent code generation, and seamless deployment."})]})]})})]})},PA=()=>{const{categories:t}=ea(),[e,n]=R.useState(""),[r,s]=R.useState(""),[i,o]=R.useState(""),[c,u]=R.useState(!1),[d,m]=R.useState(!1),f=R.useMemo(()=>{const x=[];return t.forEach(y=>{y.codecs.forEach(E=>{E.variants.forEach(j=>{Object.entries(j.bitrates).forEach(([L,V])=>{typeof V=="number"?x.push({category:y.name,categoryDescription:y.description||"",codecName:E.name,codecDescription:E.description||"",variantName:j.name,variantDescription:j.description||"",resolution:L,frameRate:"Standard",bitrate:V}):Object.entries(V).forEach(([I,w])=>{const _=Zt.find(S=>S.id===I);x.push({category:y.name,categoryDescription:y.description||"",codecName:E.name,codecDescription:E.description||"",variantName:j.name,variantDescription:j.description||"",resolution:L,frameRate:(_==null?void 0:_.name)||I,bitrate:w})})})})})}),x.sort((y,E)=>y.category!==E.category?y.category.localeCompare(E.category):y.codecName!==E.codecName?y.codecName.localeCompare(E.codecName):y.variantName!==E.variantName?y.variantName.localeCompare(E.variantName):y.resolution.localeCompare(E.resolution))},[t]),g=R.useMemo(()=>f.filter(x=>{const y=e===""||x.category.toLowerCase().includes(e.toLowerCase())||x.codecName.toLowerCase().includes(e.toLowerCase())||x.variantName.toLowerCase().includes(e.toLowerCase())||x.resolution.toLowerCase().includes(e.toLowerCase())||x.frameRate.toLowerCase().includes(e.toLowerCase())||x.categoryDescription.toLowerCase().includes(e.toLowerCase())||x.codecDescription.toLowerCase().includes(e.toLowerCase())||x.variantDescription.toLowerCase().includes(e.toLowerCase()),E=r===""||x.category===r,j=i===""||x.resolution===i;return y&&E&&j}),[f,e,r,i]),b=()=>{const x=[["Category","Codec","Variant","Resolution","Frame Rate","Bitrate (Mbps)"],...g.map(L=>[L.category,L.codecName,L.variantName,L.resolution,L.frameRate,L.bitrate.toString()])].map(L=>L.map(V=>`"${V}"`).join(",")).join(`
`),y=new Blob([x],{type:"text/csv"}),E=URL.createObjectURL(y),j=document.createElement("a");j.href=E,j.download=`codec-data-${new Date().toISOString().split("T")[0]}.csv`,j.click(),URL.revokeObjectURL(E),ht.trackDataExport("codec-database-csv")},N=x=>{const y=qn.find(E=>E.id===x);return y?y.name:x},C=[...new Set(f.map(x=>x.category))].sort(),T=[...new Set(f.map(x=>x.resolution))].sort();return a.jsxs("div",{className:"min-h-screen bg-dark-primary relative",children:[a.jsx("header",{className:"border-b border-gray-800 bg-dark-secondary/50 backdrop-blur-sm relative z-30",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(Se,{to:"/",className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx(iu,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Back to Calculator"})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-3",children:[a.jsx(vn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-400"}),a.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-white",children:"Codec Database"})]})]}),a.jsx("div",{className:"sm:hidden",children:a.jsx("button",{onClick:()=>m(!d),className:"p-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:d?a.jsx(ur,{className:"h-5 w-5 text-gray-400"}):a.jsx(ko,{className:"h-5 w-5 text-gray-400"})})}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[a.jsxs(Se,{to:"/about",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:[a.jsx(rr,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"About"})]}),a.jsxs(Se,{to:"/admin",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:[a.jsx(Ps,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Admin"})]})]})]}),d&&a.jsx("div",{className:"sm:hidden absolute top-full left-0 right-0 bg-dark-secondary border-b border-gray-800 shadow-lg z-40",children:a.jsxs("div",{className:"px-4 py-3 space-y-2",children:[a.jsxs(Se,{to:"/about",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>m(!1),children:[a.jsx(rr,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:"About"})]}),a.jsxs(Se,{to:"/admin",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>m(!1),children:[a.jsx(Ps,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:"Admin Panel"})]})]})})]})}),a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-indigo-900/20 border-b border-gray-800",children:[a.jsx("div",{className:"absolute inset-0 opacity-30",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0)",backgroundSize:"20px 20px"}})}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 sm:mb-4 tracking-tight",children:["Complete Codec",a.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400",children:"Database"})]}),a.jsxs("p",{className:"text-base sm:text-lg text-gray-300 max-w-2xl mx-auto leading-relaxed",children:["Browse and search through all ",f.length," codec configurations in our comprehensive database"]})]})})]}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[a.jsx("div",{className:"bg-dark-secondary rounded-xl p-4 sm:p-6 mb-6 sm:mb-8 shadow-lg",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Tw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search codecs, variants, resolutions...",value:e,onChange:x=>n(x.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-3 bg-dark-primary border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-sm sm:text-base"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("select",{value:r,onChange:x=>s(x.target.value),className:"px-3 py-2 bg-dark-primary border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-sm",children:[a.jsx("option",{value:"",children:"All Categories"}),C.map(x=>a.jsx("option",{value:x,children:x},x))]}),a.jsxs("select",{value:i,onChange:x=>o(x.target.value),className:"px-3 py-2 bg-dark-primary border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-sm",children:[a.jsx("option",{value:"",children:"All Resolutions"}),T.map(x=>a.jsx("option",{value:x,children:N(x)},x))]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>u(!c),className:"flex items-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg text-white transition-colors text-sm",title:c?"Hide descriptions":"Show descriptions",children:[c?a.jsx(_w,{className:"h-4 w-4"}):a.jsx(au,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:c?"Hide":"Show"})]}),a.jsxs("button",{onClick:b,className:"flex items-center space-x-2 px-3 sm:px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-colors text-sm",children:[a.jsx(cm,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),a.jsx("span",{className:"sm:hidden",children:"Export"})]})]})]}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:["Showing ",g.length," of ",f.length," configurations"]})]})}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-dark-primary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Codec"}),a.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Variant"}),a.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Resolution"}),a.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Frame Rate"}),a.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Bitrate (Mbps)"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700",children:g.map((x,y)=>a.jsxs("tr",{className:"hover:bg-dark-primary/50 transition-colors",children:[a.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-white",children:x.category}),c&&x.categoryDescription&&a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:x.categoryDescription})]})}),a.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-white",children:x.codecName}),c&&x.codecDescription&&a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:x.codecDescription})]})}),a.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-white",children:x.variantName}),c&&x.variantDescription&&a.jsx("div",{className:"text-xs text-gray-400 mt-1 max-w-xs",children:x.variantDescription})]})}),a.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-xs sm:text-sm text-white",children:N(x.resolution)})}),a.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-xs sm:text-sm text-white",children:x.frameRate})}),a.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-xs sm:text-sm font-mono text-green-400",children:x.bitrate})})]},y))})]})}),g.length===0&&a.jsxs("div",{className:"text-center py-8 sm:py-12",children:[a.jsx(vn,{className:"h-12 w-12 sm:h-16 sm:w-16 text-gray-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-400 mb-2",children:"No Results Found"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search terms or filters"})]})]}),a.jsxs("div",{className:"mt-6 sm:mt-8 grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[a.jsxs("div",{className:"bg-dark-secondary rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-400",children:t.length}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Categories"})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-400",children:t.reduce((x,y)=>x+y.codecs.length,0)}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Codecs"})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-400",children:t.reduce((x,y)=>x+y.codecs.reduce((E,j)=>E+j.variants.length,0),0)}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Variants"})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-lg sm:text-2xl font-bold text-yellow-400",children:f.length}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Configurations"})]})]})]})]})},RA=()=>{const[t,e]=pi.useState(!1);return a.jsxs("div",{className:"min-h-screen bg-dark-primary relative",children:[a.jsx("header",{className:"border-b border-gray-800 bg-dark-secondary/50 backdrop-blur-sm relative z-30",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs(Se,{to:"/about",className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx(iu,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Back to About"})]})}),a.jsx("div",{className:"sm:hidden",children:a.jsx("button",{onClick:()=>e(!t),className:"p-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:t?a.jsx(ur,{className:"h-5 w-5 text-gray-400"}):a.jsx(ko,{className:"h-5 w-5 text-gray-400"})})}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[a.jsx(Se,{to:"/",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:a.jsx("span",{className:"text-sm text-gray-300",children:"Calculator"})}),a.jsx(Se,{to:"/admin",className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-gray-700 transition-colors",children:a.jsx("span",{className:"text-sm text-gray-300",children:"Admin"})})]})]}),t&&a.jsx("div",{className:"sm:hidden absolute top-full left-0 right-0 bg-dark-secondary border-b border-gray-800 shadow-lg z-40",children:a.jsxs("div",{className:"px-4 py-3 space-y-2",children:[a.jsx(Se,{to:"/",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>e(!1),children:a.jsx("span",{className:"text-gray-300",children:"Calculator"})}),a.jsx(Se,{to:"/admin",className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg hover:bg-dark-primary transition-colors",onClick:()=>e(!1),children:a.jsx("span",{className:"text-gray-300",children:"Admin Panel"})})]})})]})}),a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-indigo-900/20 border-b border-gray-800",children:[a.jsx("div",{className:"absolute inset-0 opacity-30",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0)",backgroundSize:"20px 20px"}})}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h1",{className:"text-3xl sm:text-5xl md:text-6xl font-bold text-white mb-4 sm:mb-6 tracking-tight",children:["Privacy",a.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400",children:"Policy"})]}),a.jsx("p",{className:"text-base sm:text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Your privacy matters to us. Learn how we protect your data and respect your privacy rights under GDPR."})]})})]}),a.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-blue-600/10 border border-blue-600/20 rounded-xl p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(uT,{className:"h-5 w-5 text-blue-400 mr-2"}),a.jsx("span",{className:"text-blue-400 font-medium",children:"Last Updated"})]}),a.jsx("p",{className:"text-gray-300",children:"December 2024"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-600/20 to-blue-600/20 border border-green-500/30 rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[a.jsx(sr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-400 mr-3 sm:mr-4"}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"GDPR Compliance"})]}),a.jsxs("div",{className:"prose prose-invert max-w-none",children:[a.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"This website is fully compliant with the General Data Protection Regulation (GDPR) and other applicable data protection laws. We respect your privacy rights and provide you with full control over your data."}),a.jsxs("div",{className:"bg-green-600/10 border border-green-600/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wc,{className:"h-5 w-5 text-green-400 mr-2"}),a.jsx("span",{className:"text-green-400 font-semibold",children:"Your Rights Under GDPR"})]}),a.jsxs("ul",{className:"text-green-300 mt-2 text-sm space-y-1",children:[a.jsx("li",{children:"• Right to be informed about data collection"}),a.jsx("li",{children:"• Right of access to your personal data"}),a.jsx("li",{children:"• Right to rectification of inaccurate data"}),a.jsx("li",{children:'• Right to erasure ("right to be forgotten")'}),a.jsx("li",{children:"• Right to restrict processing"}),a.jsx("li",{children:"• Right to data portability"}),a.jsx("li",{children:"• Right to object to processing"}),a.jsx("li",{children:"• Rights related to automated decision making"})]})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(sr,{className:"h-6 w-6 text-green-400 mr-3"}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Our Commitment to Privacy"})]}),a.jsxs("div",{className:"prose prose-invert max-w-none",children:[a.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:'Time Lapse Technologies LLC ("we," "our," or "us") operates the Video File Size Calculator. This privacy policy explains how we collect, use, and protect information when you use our service.'}),a.jsxs("div",{className:"bg-green-600/10 border border-green-600/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wc,{className:"h-5 w-5 text-green-400 mr-2"}),a.jsx("span",{className:"text-green-400 font-semibold",children:"No Personal Information Required"})]}),a.jsx("p",{className:"text-green-300 mt-2",children:"You can use our calculator completely anonymously. We do not require registration, login, or any personal information to access our services."})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[a.jsx(vw,{className:"h-6 w-6 text-orange-400 mr-3"}),"Cookie Management & Consent"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"How We Handle Cookies"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"We use a comprehensive cookie consent system that gives you full control over what data is collected:"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-green-600/10 border border-green-600/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-green-400 font-medium mb-2",children:"Necessary Cookies"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Essential for the calculator to function. These cannot be disabled as they are required for basic functionality."})]}),a.jsxs("div",{className:"bg-blue-600/10 border border-blue-600/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-blue-400 font-medium mb-2",children:"Analytics Cookies"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Help us understand usage patterns. You can opt-out of these while still using the calculator."})]}),a.jsxs("div",{className:"bg-purple-600/10 border border-purple-600/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-purple-400 font-medium mb-2",children:"Preference Cookies"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Remember your settings and custom presets. Optional but enhance your experience."})]})]})]}),a.jsxs("div",{className:"bg-orange-600/10 border border-orange-600/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Ps,{className:"h-5 w-5 text-orange-400 mr-2"}),a.jsx("span",{className:"text-orange-400 font-medium",children:"Manage Your Cookie Preferences"})]}),a.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"You can change your cookie preferences at any time. Your choices are remembered and respected."}),a.jsx("button",{onClick:()=>{localStorage.removeItem("cookie-consent"),localStorage.removeItem("cookie-consent-date"),window.location.reload()},className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg text-white text-sm transition-colors",children:"Update Cookie Preferences"})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[a.jsx(vn,{className:"h-6 w-6 text-blue-400 mr-3"}),"Information We Collect"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Anonymous Usage Analytics"}),a.jsxs("p",{className:"text-gray-300 mb-3",children:[a.jsx("strong",{children:"Only collected with your explicit consent."})," We collect anonymous information about how our calculator is used to improve the service:"]}),a.jsxs("ul",{className:"text-gray-300 space-y-2 ml-6",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:'Which codec configurations are calculated (e.g., "H.264 High Profile at 1080p")'})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Frequency of different calculations to show popular configurations"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"General usage patterns to improve the user interface"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Page views and navigation patterns"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Google Analytics (GDPR Compliant)"}),a.jsxs("p",{className:"text-gray-300 mb-3",children:[a.jsx("strong",{children:"Only active with your consent."})," When enabled, Google Analytics may collect:"]}),a.jsxs("ul",{className:"text-gray-300 space-y-2 ml-6",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Browser type and version (anonymized)"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Operating system (anonymized)"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Screen resolution"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"General geographic location (country/region level only)"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Pages visited and time spent on site"})]})]}),a.jsxs("div",{className:"bg-purple-600/10 border border-purple-600/20 rounded-lg p-4 mt-4",children:[a.jsx("h4",{className:"text-purple-400 font-medium mb-2",children:"GDPR Compliance Measures"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[a.jsx("li",{children:"• IP addresses are anonymized"}),a.jsx("li",{children:"• Ad personalization is disabled"}),a.jsx("li",{children:"• Google Signals is disabled"}),a.jsx("li",{children:"• Data retention is limited to 26 months"}),a.jsx("li",{children:"• No cross-device tracking"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Local Storage"}),a.jsxs("p",{className:"text-gray-300",children:[a.jsx("strong",{children:"Only with your consent for preferences."})," We store your custom presets and preferences locally in your browser. This data never leaves your device and is only used to enhance your experience by remembering your preferred settings."]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-red-600/20 to-orange-600/20 border border-red-500/30 rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[a.jsx(au,{className:"h-6 w-6 text-red-400 mr-3"}),"What We Don't Collect"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Names or email addresses"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"IP addresses (anonymized in analytics)"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Personal identifiers"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Account information"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Financial information"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Specific file details"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Project information"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),a.jsx("span",{className:"text-white",children:"Tracking cookies without consent"})]})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Legal Basis for Processing (GDPR Article 6)"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Necessary Cookies"}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[a.jsx("strong",{children:"Legal Basis:"})," Legitimate Interest (Article 6(1)(f)) - Essential for providing the calculator service you requested."]})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Analytics & Preferences"}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[a.jsx("strong",{children:"Legal Basis:"})," Consent (Article 6(1)(a)) - Only processed with your explicit, freely given consent."]})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Data Retention"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Cookie Consent"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Your consent preferences are stored for 12 months, after which you'll be asked to renew your consent."})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Analytics Data"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Google Analytics data is automatically deleted after 26 months. You can request earlier deletion."})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Local Preferences"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Stored locally in your browser until you clear your browser data or withdraw consent."})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6 flex items-center",children:[a.jsx(Ph,{className:"h-6 w-6 text-green-400 mr-3"}),"Your Rights and Choices"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Withdraw Consent"}),a.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"You can withdraw your consent at any time by updating your cookie preferences or clearing your browser data."}),a.jsx("button",{onClick:()=>{localStorage.removeItem("cookie-consent"),localStorage.removeItem("cookie-consent-date"),window.location.reload()},className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm transition-colors",children:"Withdraw All Consent"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Access Your Data"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Since we don't collect personal data, there's no personal data to access. Your preferences are stored locally in your browser."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Data Portability"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"You can export your custom presets from the admin panel if you've created any."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Google Analytics Opt-Out"}),a.jsxs("p",{className:"text-gray-300 text-sm",children:["Install the"," ",a.jsx("a",{href:"https://tools.google.com/dlpage/gaoptout",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"Google Analytics Opt-out Browser Add-on"})," ","for additional protection across all websites."]})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Data Security"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"We implement appropriate security measures to protect the limited data we collect:"}),a.jsxs("ul",{className:"text-gray-300 space-y-2",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"All data transmission is encrypted using HTTPS"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Analytics data is anonymized and aggregated"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"No sensitive personal information is collected or stored"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Regular security updates and monitoring"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"GDPR-compliant data processing agreements with third parties"})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"International Data Transfers"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-300",children:"Google Analytics may transfer data outside the European Economic Area (EEA). Google has implemented appropriate safeguards including:"}),a.jsxs("ul",{className:"text-gray-300 space-y-2 ml-6",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Standard Contractual Clauses (SCCs) approved by the European Commission"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Additional technical and organizational measures for data protection"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"IP anonymization to reduce data sensitivity"})]})]})]})]}),a.jsxs("div",{className:"bg-dark-secondary rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-6",children:"Changes to This Policy"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"We may update this privacy policy from time to time. When we do, we will:"}),a.jsxs("ul",{className:"text-gray-300 space-y-2 mb-4",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:'Update the "Last Updated" date at the top of this policy'})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Post the updated policy on this page"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"For material changes, request new consent where required by law"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a.jsx("span",{children:"Continue to protect your privacy according to these principles"})]})]}),a.jsxs("div",{className:"bg-yellow-600/10 border border-yellow-600/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(As,{className:"h-5 w-5 text-yellow-400 mr-2"}),a.jsx("span",{className:"text-yellow-400 font-medium",children:"Important Notice"})]}),a.jsx("p",{className:"text-yellow-300 text-sm mt-2",children:"If we make material changes that affect how we process your data, we will ask for your renewed consent before applying the changes."})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/30 rounded-xl p-6 sm:p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[a.jsx(Rh,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-400 mr-3 sm:mr-4"}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Contact Us"})]}),a.jsx("p",{className:"text-base sm:text-lg text-gray-300 leading-relaxed mb-4 sm:mb-6",children:"If you have any questions about this privacy policy, want to exercise your rights, or have concerns about our data practices:"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Data Protection Officer"}),a.jsxs("p",{className:"text-gray-300 text-sm",children:["Email: ",a.jsx("a",{href:"mailto:privacy@mediasupplychain.org",className:"text-blue-400 hover:text-blue-300 underline",children:"privacy@mediasupplychain.org"})]}),a.jsx("p",{className:"text-gray-300 text-sm",children:'Subject Line: "GDPR Request - Video Calculator"'})]}),a.jsxs("div",{className:"bg-dark-primary rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-medium mb-2",children:"Time Lapse Technologies LLC"}),a.jsxs("p",{className:"text-gray-300 text-sm",children:["Website: ",a.jsx("a",{href:"https://mediasupplychain.org",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"mediasupplychain.org"})]}),a.jsxs("p",{className:"text-gray-300 text-sm mt-2",children:[a.jsx("strong",{children:"Response Time:"})," We will respond to your request within 30 days as required by GDPR."]})]})]})]})]})})]})},DA=({onAccept:t})=>{const[e,n]=R.useState(!1),[r,s]=R.useState(!1),[i,o]=R.useState({necessary:!0,analytics:!1,preferences:!0});R.useEffect(()=>{const f=localStorage.getItem("cookie-consent");if(!f)setTimeout(()=>n(!0),1e3);else try{const g=JSON.parse(f);t(g)}catch{n(!0)}},[t]);const c=()=>{m({necessary:!0,analytics:!0,preferences:!0})},u=()=>{m(i)},d=()=>{m({necessary:!0,analytics:!1,preferences:!1})},m=f=>{localStorage.setItem("cookie-consent",JSON.stringify(f)),localStorage.setItem("cookie-consent-date",new Date().toISOString()),t(f),n(!1)};return e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 sm:p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto bg-dark-secondary border border-gray-700 rounded-xl shadow-2xl",children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:a.jsx(vw,{className:"h-5 w-5 text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Cookie & Privacy Settings"}),a.jsx("p",{className:"text-sm text-gray-400",children:"We respect your privacy and data protection rights"})]})]}),a.jsx("button",{onClick:()=>n(!1),className:"p-1 text-gray-400 hover:text-white transition-colors",title:"Close (you can change settings later in our privacy policy)",children:a.jsx(ur,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-sm text-gray-300 leading-relaxed",children:[a.jsx("p",{className:"mb-3",children:"We use cookies and similar technologies to enhance your experience, remember your preferences, and analyze how our calculator is used to improve our service."}),a.jsxs("div",{className:"bg-blue-600/10 border border-blue-600/20 rounded-lg p-3 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(sr,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"text-blue-400 font-medium text-sm",children:"Your Data Rights"})]}),a.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[a.jsx("li",{children:"• All calculations are performed locally in your browser"}),a.jsx("li",{children:"• We never store your project details or file information"}),a.jsx("li",{children:"• You can withdraw consent at any time"}),a.jsx("li",{children:"• Analytics data is anonymized and aggregated"})]})]})]}),r&&a.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Cookie Categories"}),a.jsxs("div",{className:"flex items-start justify-between p-3 bg-dark-primary rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-white",children:"Necessary"}),a.jsx("span",{className:"px-2 py-0.5 bg-green-600/20 text-green-400 text-xs rounded",children:"Required"})]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Essential for the calculator to function. Stores your preset configurations and settings locally."})]}),a.jsx("div",{className:"ml-4",children:a.jsx("div",{className:"w-8 h-4 bg-green-600 rounded-full flex items-center",children:a.jsx("div",{className:"w-3 h-3 bg-white rounded-full ml-4 transform transition-transform"})})})]}),a.jsxs("div",{className:"flex items-start justify-between p-3 bg-dark-primary rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-white",children:"Analytics"}),a.jsx("span",{className:"px-2 py-0.5 bg-blue-600/20 text-blue-400 text-xs rounded",children:"Optional"})]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Google Analytics helps us understand which codecs are popular and improve the calculator. All data is anonymized."})]}),a.jsx("div",{className:"ml-4",children:a.jsx("button",{onClick:()=>o(f=>({...f,analytics:!f.analytics})),className:`w-8 h-4 rounded-full flex items-center transition-colors ${i.analytics?"bg-blue-600":"bg-gray-600"}`,children:a.jsx("div",{className:`w-3 h-3 bg-white rounded-full transform transition-transform ${i.analytics?"translate-x-4":"translate-x-0.5"}`})})})]}),a.jsxs("div",{className:"flex items-start justify-between p-3 bg-dark-primary rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-white",children:"Preferences"}),a.jsx("span",{className:"px-2 py-0.5 bg-purple-600/20 text-purple-400 text-xs rounded",children:"Optional"})]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Remembers your custom presets, unit preferences, and interface settings for a better experience."})]}),a.jsx("div",{className:"ml-4",children:a.jsx("button",{onClick:()=>o(f=>({...f,preferences:!f.preferences})),className:`w-8 h-4 rounded-full flex items-center transition-colors ${i.preferences?"bg-purple-600":"bg-gray-600"}`,children:a.jsx("div",{className:`w-3 h-3 bg-white rounded-full transform transition-transform ${i.preferences?"translate-x-4":"translate-x-0.5"}`})})})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-3 sm:space-y-0 sm:space-x-4 pt-4 border-t border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:()=>s(!r),className:"flex items-center space-x-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[a.jsx(Ps,{className:"h-4 w-4"}),a.jsxs("span",{children:[r?"Hide":"Customize"," Settings"]})]}),a.jsxs(Se,{to:"/privacy",className:"flex items-center space-x-1 text-sm text-gray-400 hover:text-gray-300 transition-colors",children:[a.jsx(au,{className:"h-4 w-4"}),a.jsx("span",{children:"Privacy Policy"}),a.jsx(ww,{className:"h-3 w-3"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:d,className:"px-4 py-2 text-sm bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Reject All"}),r&&a.jsx("button",{onClick:u,className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Save Preferences"}),a.jsx("button",{onClick:c,className:"px-4 py-2 text-sm bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium",children:"Accept All"})]})]})]})]})})})]}):null},VA=({isVisible:t,onClose:e})=>(R.useEffect(()=>{if(t){const n=setTimeout(()=>{e()},5e3);return()=>clearTimeout(n)}},[t,e]),t?a.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm animate-in",children:a.jsxs("div",{className:"bg-blue-600/10 border border-blue-600/30 rounded-lg p-4 shadow-lg backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sr,{className:"h-4 w-4 text-blue-400 flex-shrink-0"}),a.jsx("span",{className:"text-sm font-medium text-blue-400",children:"Privacy Notice"})]}),a.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),e()},className:"text-gray-400 hover:text-white transition-colors p-1 rounded hover:bg-gray-700/50",title:"Close notice",children:a.jsx(ur,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:"Your calculations are processed locally in your browser. We use cookies to remember your preferences and Google Analytics to improve our service. You can manage these settings anytime."}),a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(rr,{className:"h-3 w-3 text-blue-400"}),a.jsx("span",{className:"text-xs text-blue-400",children:"GDPR Compliant"})]}),a.jsx("button",{onClick:e,className:"text-xs text-gray-400 hover:text-gray-300 transition-colors",children:"Dismiss"})]})]})}):null);class OA extends R.Component{constructor(){super(...arguments);Bn(this,"state",{hasError:!1});Bn(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){var n;return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-dark-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md px-4",children:[a.jsx(As,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-400 text-sm mb-6",children:((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:this.handleRetry,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-colors mx-auto",children:[a.jsx(In,{className:"h-4 w-4"}),a.jsx("span",{children:"Try Again"})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"block px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg text-white transition-colors mx-auto",children:"Reload Page"})]})]})}):this.props.children}}const LA=R.createContext(void 0),MA=({children:t})=>{const r=async()=>Promise.resolve(),s=()=>{};return a.jsx(LA.Provider,{value:{user:null,isLoading:!1,signIn:r,signOut:s},children:t})},FA=()=>{const t=Wi();R.useEffect(()=>{const e=t.pathname+t.search,n=UA(t.pathname);ht.trackPageView(e,n)},[t])},UA=t=>{switch(t){case"/":return"Video File Size Calculator";case"/admin":return"Admin Panel - Video Calculator";case"/about":return"About - Video Calculator";case"/codec-data":return"Codec Database - Video Calculator";case"/privacy":return"Privacy Policy - Video Calculator";default:return"Video Calculator"}};console.log("App component loaded");const zA=()=>(FA(),a.jsx("div",{className:"min-h-screen bg-dark-primary text-white",children:a.jsxs(Q2,{children:[a.jsx(Xs,{path:"/",element:a.jsx(bA,{})}),a.jsx(Xs,{path:"/admin",element:a.jsx(jA,{})}),a.jsx(Xs,{path:"/about",element:a.jsx(AA,{})}),a.jsx(Xs,{path:"/codec-data",element:a.jsx(PA,{})}),a.jsx(Xs,{path:"/privacy",element:a.jsx(RA,{})})]})}));function BA(){const[t,e]=R.useState(!1),[n,r]=R.useState(!1),s=o=>{console.log("GDPR consent accepted, initializing app",o),mi.updatePreferences(o),ht.reinitializeWithConsent(),!n&&(o.analytics||o.preferences)&&(e(!0),r(!0),setTimeout(()=>e(!1),5e3))},i=()=>{e(!1)};return R.useEffect(()=>{mi.hasConsent()&&mi.needsConsentRenewal()&&mi.resetConsent()},[]),a.jsx(OA,{children:a.jsx(MA,{children:a.jsx(gA,{children:a.jsx(yA,{children:a.jsxs(rT,{children:[a.jsx(zA,{}),a.jsx(DA,{onAccept:s}),a.jsx(VA,{isVisible:t,onClose:i})]})})})})})}console.log("Main entry loaded");const H0=document.getElementById("root");H0&&sw(H0).render(a.jsx(R.StrictMode,{children:a.jsx(BA,{})}));
